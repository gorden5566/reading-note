---
annotation-target: ApachePulsarinAction.pdf
---



>%%
>```annotation-json
>{"created":"2023-07-08T16:03:14.012Z","text":"第一部分：pulsar是如何提供基本的消息、流数据、流处理功能的，此外还包括与其他流行的消息框架的对比","updated":"2023-07-08T16:03:14.012Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":1897,"end":2169},{"type":"TextQuoteSelector","exact":"Part 1 will cover the basics of messaging, streaming data,  and  stream  processing  with  a  focus  on  how  Pulsar  provides  these  features.  It  will  also  cover Pulsar unique architecture and contrast it against the other popular messaging frameworks such as Kafka.","prefix":"ok is divided into three parts. ","suffix":" The second part will focus on P"}]}]}
>```
>%%
>*%%PREFIX%%ok is divided into three parts.%%HIGHLIGHT%% ==Part 1 will cover the basics of messaging, streaming data,  and  stream  processing  with  a  focus  on  how  Pulsar  provides  these  features.  It  will  also  cover Pulsar unique architecture and contrast it against the other popular messaging frameworks such as Kafka.== %%POSTFIX%%The second part will focus on P*
>%%LINK%%[[#^3w2g3jyfzw3|show annotation]]
>%%COMMENT%%
>第一部分：pulsar是如何提供基本的消息、流数据、流处理功能的，此外还包括与其他流行的消息框架的对比
>%%TAGS%%
>
^3w2g3jyfzw3


>%%
>```annotation-json
>{"created":"2023-07-08T16:04:03.249Z","text":"第二部分：介绍pulsar内置的消息处理能力(Function)。易于部署轻量级的计算逻辑，可以使用多种语言开发。","updated":"2023-07-08T16:04:03.249Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":2170,"end":2659},{"type":"TextQuoteSelector","exact":"The second part will focus on Pulsar’s native stream processing capability, known as Pulsar Functions,  that  makes  it  easy  to  deploy  lightweight  computing  logic  using  simple  functions  written  in  one  of  several  popular  programming  languages  including  Python,  Java,  .NET,  and  Go.  It  will  also  cover  how  to  use  Pulsar  Functions  to  develop  event-driven  applications  and  microservices by providing in-depth examples that you can download and try yourself","prefix":"aging frameworks such as Kafka. ","suffix":". The third and final part will "}]}]}
>```
>%%
>*%%PREFIX%%aging frameworks such as Kafka.%%HIGHLIGHT%% ==The second part will focus on Pulsar’s native stream processing capability, known as Pulsar Functions,  that  makes  it  easy  to  deploy  lightweight  computing  logic  using  simple  functions  written  in  one  of  several  popular  programming  languages  including  Python,  Java,  .NET,  and  Go.  It  will  also  cover  how  to  use  Pulsar  Functions  to  develop  event-driven  applications  and  microservices by providing in-depth examples that you can download and try yourself== %%POSTFIX%%. The third and final part will*
>%%LINK%%[[#^e05lop6bqyv|show annotation]]
>%%COMMENT%%
>第二部分：介绍pulsar内置的消息处理能力(Function)。易于部署轻量级的计算逻辑，可以使用多种语言开发。
>%%TAGS%%
>
^e05lop6bqyv


>%%
>```annotation-json
>{"created":"2023-07-08T16:06:32.490Z","text":"第三部分：介绍流的存储，以及pulsar独特的松耦合架构，使得它能在云存储上保存几乎不限容量的消息。另外还会介绍event sourcing和CQRS架构模式的应用开发。","updated":"2023-07-08T16:06:32.490Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":2661,"end":3246},{"type":"TextQuoteSelector","exact":"The third and final part will focus on Stream storage, and how Pulsar’s unique de-coupled architecture enables retain messages indefinitely on cloud storage services such as AWS S3 or Azure  Blob  storage.  We  will  also  explore  how  this  capability  directly  supports  event  sourcing  and the development of applications that follow the Command Query Responsibility Segregation  (CQRS)  architecture  pattern.  Lastly,  we  will  demonstrate  how  to  query  raw  message  data  inside  Pulsar  using  standard  SQL  query  syntax  by  leveraging  the  Presto  execution engine.","prefix":" can download and try yourself. ","suffix":" Your  feedback  is  essential  "}]}]}
>```
>%%
>*%%PREFIX%%can download and try yourself.%%HIGHLIGHT%% ==The third and final part will focus on Stream storage, and how Pulsar’s unique de-coupled architecture enables retain messages indefinitely on cloud storage services such as AWS S3 or Azure  Blob  storage.  We  will  also  explore  how  this  capability  directly  supports  event  sourcing  and the development of applications that follow the Command Query Responsibility Segregation  (CQRS)  architecture  pattern.  Lastly,  we  will  demonstrate  how  to  query  raw  message  data  inside  Pulsar  using  standard  SQL  query  syntax  by  leveraging  the  Presto  execution engine.== %%POSTFIX%%Your  feedback  is  essential*
>%%LINK%%[[#^o91yi7xv3bk|show annotation]]
>%%COMMENT%%
>第三部分：介绍流的存储，以及pulsar独特的松耦合架构，使得它能在云存储上保存几乎不限容量的消息。另外还会介绍event sourcing和CQRS架构模式的应用开发。
>%%TAGS%%
>
^o91yi7xv3bk


>%%
>```annotation-json
>{"created":"2023-07-08T16:09:53.243Z","text":"第一章：pulsar的简介","updated":"2023-07-08T16:09:53.243Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":4149,"end":4178},{"type":"TextQuoteSelector","exact":"Introduction to Apache Pulsar","prefix":".  To comment go to  liveBook   ","suffix":" This chapter covers • The evolu"}]}]}
>```
>%%
>*%%PREFIX%%.  To comment go to  liveBook%%HIGHLIGHT%% ==Introduction to Apache Pulsar== %%POSTFIX%%This chapter covers • The evolu*
>%%LINK%%[[#^7ds9ls0mgjk|show annotation]]
>%%COMMENT%%
>第一章：pulsar的简介
>%%TAGS%%
>
^7ds9ls0mgjk


>%%
>```annotation-json
>{"created":"2023-07-08T16:10:49.973Z","text":"企业级消息系统的演化。为什么说pulsar代表了下一代的演进方向","updated":"2023-07-08T16:10:49.973Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":4201,"end":4325},{"type":"TextQuoteSelector","exact":"The evolution of the enterprise messaging system and why Apache Pulsar represents the next step in the evolutionary process.","prefix":"he Pulsar This chapter covers • ","suffix":" • A comparison of Apache Pulsar"}]}]}
>```
>%%
>*%%PREFIX%%he Pulsar This chapter covers •%%HIGHLIGHT%% ==The evolution of the enterprise messaging system and why Apache Pulsar represents the next step in the evolutionary process.== %%POSTFIX%%• A comparison of Apache Pulsar*
>%%LINK%%[[#^ww7sbcgv1o|show annotation]]
>%%COMMENT%%
>企业级消息系统的演化。为什么说pulsar代表了下一代的演进方向
>%%TAGS%%
>
^ww7sbcgv1o


>%%
>```annotation-json
>{"created":"2023-07-08T16:11:46.564Z","text":"pulsar和现有企业消息系统的对比","updated":"2023-07-08T16:11:46.564Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":4328,"end":4398},{"type":"TextQuoteSelector","exact":"A comparison of Apache Pulsar to existing enterprise messaging systems","prefix":" in the evolutionary process. • ","suffix":"  • How Pulsar’s segment-centric"}]}]}
>```
>%%
>*%%PREFIX%%in the evolutionary process. •%%HIGHLIGHT%% ==A comparison of Apache Pulsar to existing enterprise messaging systems== %%POSTFIX%%• How Pulsar’s segment-centric*
>%%LINK%%[[#^69htustzcw4|show annotation]]
>%%COMMENT%%
>pulsar和现有企业消息系统的对比
>%%TAGS%%
>
^69htustzcw4


>%%
>```annotation-json
>{"created":"2023-07-08T16:12:22.843Z","text":"pulsa的面向segment的存储模型与kafka的面向partition的存储模型有哪些不同","updated":"2023-07-08T16:12:22.843Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":4402,"end":4509},{"type":"TextQuoteSelector","exact":"How Pulsar’s segment-centric storage differs from the partition-centric storage model used in Apache Kafka.","prefix":"enterprise messaging systems  • ","suffix":" • Real-world use cases where Pu"}]}]}
>```
>%%
>*%%PREFIX%%enterprise messaging systems  •%%HIGHLIGHT%% ==How Pulsar’s segment-centric storage differs from the partition-centric storage model used in Apache Kafka.== %%POSTFIX%%• Real-world use cases where Pu*
>%%LINK%%[[#^55kplftaudv|show annotation]]
>%%COMMENT%%
>pulsa的面向segment的存储模型与kafka的面向partition的存储模型有哪些不同
>%%TAGS%%
>
^55kplftaudv


>%%
>```annotation-json
>{"created":"2023-07-08T16:13:10.159Z","text":"介绍真实的pulsar作为流处理的案例，以及为什么你应该考虑pulsar的原因","updated":"2023-07-08T16:13:10.159Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":4512,"end":4624},{"type":"TextQuoteSelector","exact":"Real-world use cases where Pulsar is used for stream processing and why you should consider using Apache Pulsar.","prefix":"e model used in Apache Kafka. • ","suffix":" Developed  at  Yahoo  in  2013,"}]}]}
>```
>%%
>*%%PREFIX%%e model used in Apache Kafka. •%%HIGHLIGHT%% ==Real-world use cases where Pulsar is used for stream processing and why you should consider using Apache Pulsar.== %%POSTFIX%%Developed  at  Yahoo  in  2013,*
>%%LINK%%[[#^uyucuykc61|show annotation]]
>%%COMMENT%%
>介绍真实的pulsar作为流处理的案例，以及为什么你应该考虑pulsar的原因
>%%TAGS%%
>
^uyucuykc61


>%%
>```annotation-json
>{"created":"2023-07-08T16:14:59.926Z","text":"多租户、物理多副本、强持久化保证","updated":"2023-07-08T16:14:59.926Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":4845,"end":5047},{"type":"TextQuoteSelector","exact":"Apache  Pulsar  was  designed  from  the  ground  up  to  address  the  gaps  in  current  open-source  messaging  systems  such  as  multi-tenancy,  geo-replication,  and  strong  durability guarantees","prefix":"  Top  Level  Project  status.  ","suffix":". The  Apache  Pulsar  site  des"}]}]}
>```
>%%
>*%%PREFIX%%Top  Level  Project  status.%%HIGHLIGHT%% ==Apache  Pulsar  was  designed  from  the  ground  up  to  address  the  gaps  in  current  open-source  messaging  systems  such  as  multi-tenancy,  geo-replication,  and  strong  durability guarantees== %%POSTFIX%%. The  Apache  Pulsar  site  des*
>%%LINK%%[[#^l7rhpfrfls|show annotation]]
>%%COMMENT%%
>多租户、物理多副本、强持久化保证
>%%TAGS%%
>
^l7rhpfrfls


>%%
>```annotation-json
>{"created":"2023-07-08T16:16:46.408Z","text":"实时消息","updated":"2023-07-08T16:16:46.408Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":5413,"end":5743},{"type":"TextQuoteSelector","exact":"Real-time  messaging:  Enable  geo-graphically  distributed  applications  and  systems  to communicate with one another in an asynchronous manner by exchanging messages. Pulsar’s goal is to provide this capability to the broadest audience of clients via support for multiple programming languages and binary messaging protocols. ","prefix":"r processing large data sets: • ","suffix":"• Real-time  compute:  Provides "}]}]}
>```
>%%
>*%%PREFIX%%r processing large data sets: •%%HIGHLIGHT%% ==Real-time  messaging:  Enable  geo-graphically  distributed  applications  and  systems  to communicate with one another in an asynchronous manner by exchanging messages. Pulsar’s goal is to provide this capability to the broadest audience of clients via support for multiple programming languages and binary messaging protocols.== %%POSTFIX%%• Real-time  compute:  Provides*
>%%LINK%%[[#^mwrjzo2u3bc|show annotation]]
>%%COMMENT%%
>实时消息
>%%TAGS%%
>
^mwrjzo2u3bc


>%%
>```annotation-json
>{"created":"2023-07-08T16:17:40.211Z","text":"实时计算","updated":"2023-07-08T16:17:40.211Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":5745,"end":5998},{"type":"TextQuoteSelector","exact":"Real-time  compute:  Provides  the  ability  to  perform  user-defined  computations  on  these messages inside of Pulsar itself and without the need for an external computational  system  to  perform  basic  transformational  operations  such  as  data","prefix":"d binary messaging protocols. • ","suffix":"  ©Manning Publications Co.  To "}]}]}
>```
>%%
>*%%PREFIX%%d binary messaging protocols. •%%HIGHLIGHT%% ==Real-time  compute:  Provides  the  ability  to  perform  user-defined  computations  on  these messages inside of Pulsar itself and without the need for an external computational  system  to  perform  basic  transformational  operations  such  as  data== %%POSTFIX%%©Manning Publications Co.  To*
>%%LINK%%[[#^zgpn41zkaji|show annotation]]
>%%COMMENT%%
>实时计算
>%%TAGS%%
>
^zgpn41zkaji


>%%
>```annotation-json
>{"created":"2023-07-08T16:18:58.513Z","text":"可扩展的存储","updated":"2023-07-08T16:18:58.513Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":6097,"end":6361},{"type":"TextQuoteSelector","exact":"Scalable storage: Pulsar’s independent storage layer and support for tiered-storage enable  the  retention  of  your  message  data  for  as  long  as  you  need.  There  is  no  physical limitation on the amount of data that can be retained and accessed by Pulsar","prefix":" filtering, and aggregations. • ","suffix":". 1.1 Enterprise Messaging Syste"}]}]}
>```
>%%
>*%%PREFIX%%filtering, and aggregations. •%%HIGHLIGHT%% ==Scalable storage: Pulsar’s independent storage layer and support for tiered-storage enable  the  retention  of  your  message  data  for  as  long  as  you  need.  There  is  no  physical limitation on the amount of data that can be retained and accessed by Pulsar== %%POSTFIX%%. 1.1 Enterprise Messaging Syste*
>%%LINK%%[[#^uwjjdvongf9|show annotation]]
>%%COMMENT%%
>可扩展的存储
>%%TAGS%%
>
^uwjjdvongf9


>%%
>```annotation-json
>{"created":"2023-07-08T16:21:06.481Z","text":"基于ac-hoc直连模式的点对点通信，例如电子邮件、VoIP、WhatsApp等","updated":"2023-07-08T16:21:06.481Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":6668,"end":7195},{"type":"TextQuoteSelector","exact":"Most  people  are  familiar  with  messaging systems such as email, text messaging, and instant messaging applications such as WhatsApp or Facebook messenger. Messaging systems within this category are designed to  transmit  text  data  and  images  over  the  internet  between  two  or  more  parties.  More  advanced  instant  messaging  systems  support  Voice  over  IP  and  video  chat  capabilities  as  well.  All  of  these  systems  were  designed  to  support  person-to-person  communication  over  ad-hoc channels","prefix":"at  provide  this  capability.  ","suffix":".  Another  category  of  messag"}]}]}
>```
>%%
>*%%PREFIX%%at  provide  this  capability.%%HIGHLIGHT%% ==Most  people  are  familiar  with  messaging systems such as email, text messaging, and instant messaging applications such as WhatsApp or Facebook messenger. Messaging systems within this category are designed to  transmit  text  data  and  images  over  the  internet  between  two  or  more  parties.  More  advanced  instant  messaging  systems  support  Voice  over  IP  and  video  chat  capabilities  as  well.  All  of  these  systems  were  designed  to  support  person-to-person  communication  over  ad-hoc channels== %%POSTFIX%%.  Another  category  of  messag*
>%%LINK%%[[#^rz2ahl7catm|show annotation]]
>%%COMMENT%%
>基于ac-hoc直连模式的点对点通信，例如电子邮件、VoIP、WhatsApp等
>%%TAGS%%
>
^rz2ahl7catm


>%%
>```annotation-json
>{"created":"2023-07-08T16:23:29.354Z","text":"视频点播流服务，通过广播讲数据发送给多个订阅者","updated":"2023-07-08T16:23:29.354Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":7198,"end":7665},{"type":"TextQuoteSelector","exact":"Another  category  of  messaging  system  that  people  are  already  familiar  with  are  the  video-on-demand  streaming  services  such  as  Netflix  or  Hulu  that  stream  video  content  to  multiple  subscribers  simultaneously.  These  video  streaming  services  are  examples  of  one-way,  broadcast  (one  message  to  many  consumers)  transmission  of  data  to  consumers  that subscribe  to  an  existing  channel  in  order  to  receive  the  content","prefix":"cation  over  ad-hoc channels.  ","suffix":".  While  these  types  of  appl"}]}]}
>```
>%%
>*%%PREFIX%%cation  over  ad-hoc channels.%%HIGHLIGHT%% ==Another  category  of  messaging  system  that  people  are  already  familiar  with  are  the  video-on-demand  streaming  services  such  as  Netflix  or  Hulu  that  stream  video  content  to  multiple  subscribers  simultaneously.  These  video  streaming  services  are  examples  of  one-way,  broadcast  (one  message  to  many  consumers)  transmission  of  data  to  consumers  that subscribe  to  an  existing  channel  in  order  to  receive  the  content== %%POSTFIX%%.  While  these  types  of  appl*
>%%LINK%%[[#^v9d0eonr9oq|show annotation]]
>%%COMMENT%%
>视频点播流服务，通过广播讲数据发送给多个订阅者
>%%TAGS%%
>
^v9d0eonr9oq


>%%
>```annotation-json
>{"created":"2023-07-10T16:22:15.973Z","text":"EMS是提供了多种消息协议实现的软件，可用于在分布式系统和应用直接发送和接收消息","updated":"2023-07-10T16:22:15.973Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":7907,"end":8200},{"type":"TextQuoteSelector","exact":"An Enterprise Messaging System (EMS) is the software that provides the implementation of various messaging protocols such as DDS, AMQP, MSMQ, etc. These protocols support the sending  and  receiving  of  messages  between  distributed  systems  and  applications  in  an  asynchronous  fashion","prefix":"enterprise  messaging systems.  ","suffix":".  However,  asynchronous  commu"}]}]}
>```
>%%
>*%%PREFIX%%enterprise  messaging systems.%%HIGHLIGHT%% ==An Enterprise Messaging System (EMS) is the software that provides the implementation of various messaging protocols such as DDS, AMQP, MSMQ, etc. These protocols support the sending  and  receiving  of  messages  between  distributed  systems  and  applications  in  an  asynchronous  fashion== %%POSTFIX%%.  However,  asynchronous  commu*
>%%LINK%%[[#^hbysmi9bbov|show annotation]]
>%%COMMENT%%
>EMS是提供了多种消息协议实现的软件，可用于在分布式系统和应用直接发送和接收消息
>%%TAGS%%
>
^hbysmi9bbov


>%%
>```annotation-json
>{"created":"2023-07-10T16:25:05.928Z","text":"RPC同步调用的缺点：慢（需要等待调用结果）、异常处理（应对远程服务不可用）","updated":"2023-07-10T16:25:05.928Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":9137,"end":9613},{"type":"TextQuoteSelector","exact":"The calling application would then have to wait for the called procedure to return before it could  continue  processing.  The  synchronous  nature  of  these  architectures  made  application  based  upon  them  inherently  slow.  In  addition,  there  was  the  possibility  that  the  remote  service was unavailable for a period of time, which would require the application developer to use defensive programming techniques to identify this condition and react accordingly","prefix":"e it can continue processing.   ","suffix":".  Unlike the point-to-point com"}]}]}
>```
>%%
>*%%PREFIX%%e it can continue processing.%%HIGHLIGHT%% ==The calling application would then have to wait for the called procedure to return before it could  continue  processing.  The  synchronous  nature  of  these  architectures  made  application  based  upon  them  inherently  slow.  In  addition,  there  was  the  possibility  that  the  remote  service was unavailable for a period of time, which would require the application developer to use defensive programming techniques to identify this condition and react accordingly== %%POSTFIX%%.  Unlike the point-to-point com*
>%%LINK%%[[#^tn7k1ekz1db|show annotation]]
>%%COMMENT%%
>RPC同步调用的缺点：慢（需要等待调用结果）、异常处理（应对远程服务不可用）
>%%TAGS%%
>
^tn7k1ekz1db


>%%
>```annotation-json
>{"created":"2023-07-10T16:27:03.699Z","text":"EMS通过中介和远程服务通信","updated":"2023-07-10T16:27:03.699Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":9616,"end":9942},{"type":"TextQuoteSelector","exact":"Unlike the point-to-point communication channels used in RPC programming where you had  to  wait  for  the  procedure  calls  to  provide  a  response,  enterprise  messaging  systems allow remote applications and services to communicate with one another via an intermediate service  rather  than  directly  with  one  another","prefix":"ndition and react accordingly.  ","suffix":".  Rather  than  having  to  est"}]}]}
>```
>%%
>*%%PREFIX%%ndition and react accordingly.%%HIGHLIGHT%% ==Unlike the point-to-point communication channels used in RPC programming where you had  to  wait  for  the  procedure  calls  to  provide  a  response,  enterprise  messaging  systems allow remote applications and services to communicate with one another via an intermediate service  rather  than  directly  with  one  another== %%POSTFIX%%.  Rather  than  having  to  est*
>%%LINK%%[[#^500i9s1ngcx|show annotation]]
>%%COMMENT%%
>EMS通过中介和远程服务通信
>%%TAGS%%
>
^500i9s1ngcx


>%%
>```annotation-json
>{"created":"2023-07-10T16:29:53.548Z","text":"松耦合、结构化消息、语言无关的数据格式","updated":"2023-07-10T16:29:53.548Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":11060,"end":11513},{"type":"TextQuoteSelector","exact":"Enterprise messaging systems promote loosely coupled architectures by allowing independently developed software components that are distributed across different system to communicate  with  one  another  via  structured  messages.  These  message  schemas  are  usually  defined  in  language-neutral  formats  such  as  XML,  JSON,  or  Avro  IDL,  which  allows  the components to be developed in any programming language that supports those formats. ","prefix":"ion in an asynchronous fashion. ","suffix":"©Manning Publications Co.  To co"}]}]}
>```
>%%
>*%%PREFIX%%ion in an asynchronous fashion.%%HIGHLIGHT%% ==Enterprise messaging systems promote loosely coupled architectures by allowing independently developed software components that are distributed across different system to communicate  with  one  another  via  structured  messages.  These  message  schemas  are  usually  defined  in  language-neutral  formats  such  as  XML,  JSON,  or  Avro  IDL,  which  allows  the components to be developed in any programming language that supports those formats.== %%POSTFIX%%©Manning Publications Co.  To co*
>%%LINK%%[[#^9fg77rf042m|show annotation]]
>%%COMMENT%%
>松耦合、结构化消息、语言无关的数据格式
>%%TAGS%%
>
^9fg77rf042m


>%%
>```annotation-json
>{"created":"2023-07-10T16:31:16.717Z","text":"异步通信","updated":"2023-07-10T16:31:16.717Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":11880,"end":12254},{"type":"TextQuoteSelector","exact":"Messaging  systems  allow  services  and  applications  to  communicate  with  one  another  in  a  non-blocking  manner,  meaning  that  the  message  sender  and  receiver  are  not  required  to  interact with the messaging system (or one another) at the same time. A messaging system will retain the messages until the intended all of the intended recipients consume it.","prefix":"des. ASYNCHRONOUS COMMUNICATION ","suffix":" MESSAGE RETENTION Unlike  netwo"}]}]}
>```
>%%
>*%%PREFIX%%des. ASYNCHRONOUS COMMUNICATION%%HIGHLIGHT%% ==Messaging  systems  allow  services  and  applications  to  communicate  with  one  another  in  a  non-blocking  manner,  meaning  that  the  message  sender  and  receiver  are  not  required  to  interact with the messaging system (or one another) at the same time. A messaging system will retain the messages until the intended all of the intended recipients consume it.== %%POSTFIX%%MESSAGE RETENTION Unlike  netwo*
>%%LINK%%[[#^ybftqj49z4n|show annotation]]
>%%COMMENT%%
>异步通信
>%%TAGS%%
>
^ybftqj49z4n


>%%
>```annotation-json
>{"created":"2023-07-10T16:32:13.841Z","text":"消息持久化（retention）","updated":"2023-07-10T16:32:13.841Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":12273,"end":12630},{"type":"TextQuoteSelector","exact":"Unlike  network-based  messaging,  such  as  RPC,  in  which  the  messages  only  exist  on  the  network,  messages  published  to  a  messaging  system  are  retained  on  disk  until  they  are  delivered.  Undelivered  messages  can  be  held  for  hours,  days,  or  even  weeks,  and  most  messaging systems allow you to specify the retention policy","prefix":"s consume it. MESSAGE RETENTION ","suffix":".  ACKNOWLEDGEMENT Messaging  sy"}]}]}
>```
>%%
>*%%PREFIX%%s consume it. MESSAGE RETENTION%%HIGHLIGHT%% ==Unlike  network-based  messaging,  such  as  RPC,  in  which  the  messages  only  exist  on  the  network,  messages  published  to  a  messaging  system  are  retained  on  disk  until  they  are  delivered.  Undelivered  messages  can  be  held  for  hours,  days,  or  even  weeks,  and  most  messaging systems allow you to specify the retention policy== %%POSTFIX%%.  ACKNOWLEDGEMENT Messaging  sy*
>%%LINK%%[[#^xxvu4j83su|show annotation]]
>%%COMMENT%%
>消息持久化（retention）
>%%TAGS%%
>
^xxvu4j83su


>%%
>```annotation-json
>{"created":"2023-07-10T16:33:03.401Z","text":"ACK机制","updated":"2023-07-10T16:33:03.401Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":12649,"end":13078},{"type":"TextQuoteSelector","exact":"Messaging  systems  are  required  to  retain  messages  until  all  of  the  intended  recipients  receive  it,  therefore  a  mechanism  by  which  the  message  consumers  can  acknowledge  the  successful  delivery  and  processing  of  the  message  is  required.  This  allows  the  messaging system to purge all successfully delivered messages, and to retry message delivery to those consumers who have not yet received it","prefix":"ention policy.  ACKNOWLEDGEMENT ","suffix":".   MESSAGE CONSUMPTION Obviousl"}]}]}
>```
>%%
>*%%PREFIX%%ention policy.  ACKNOWLEDGEMENT%%HIGHLIGHT%% ==Messaging  systems  are  required  to  retain  messages  until  all  of  the  intended  recipients  receive  it,  therefore  a  mechanism  by  which  the  message  consumers  can  acknowledge  the  successful  delivery  and  processing  of  the  message  is  required.  This  allows  the  messaging system to purge all successfully delivered messages, and to retry message delivery to those consumers who have not yet received it== %%POSTFIX%%.   MESSAGE CONSUMPTION Obviousl*
>%%LINK%%[[#^1suq3pr7adv|show annotation]]
>%%COMMENT%%
>ACK机制
>%%TAGS%%
>
^1suq3pr7adv


>%%
>```annotation-json
>{"created":"2023-07-10T16:34:43.897Z","text":"消息可消费","updated":"2023-07-10T16:34:43.897Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":13102,"end":13530},{"type":"TextQuoteSelector","exact":"Obviously, a messaging system isn’t particularly useful if it doesn’t provide a mechanism by which  the  intended  recipients  can  consume  messages.  First  and  foremost,  an  EMS  must  guarantee that all the messages it receives get delivered. Often times, a message might be intended  for  multiple  consumers,  and  the  EMS  must  maintain  the  information along  with  of which messages have been delivered and to whom","prefix":"eived it.   MESSAGE CONSUMPTION ","suffix":". 1.2 Message Consumption Patter"}]}]}
>```
>%%
>*%%PREFIX%%eived it.   MESSAGE CONSUMPTION%%HIGHLIGHT%% ==Obviously, a messaging system isn’t particularly useful if it doesn’t provide a mechanism by which  the  intended  recipients  can  consume  messages.  First  and  foremost,  an  EMS  must  guarantee that all the messages it receives get delivered. Often times, a message might be intended  for  multiple  consumers,  and  the  EMS  must  maintain  the  information along  with  of which messages have been delivered and to whom== %%POSTFIX%%. 1.2 Message Consumption Patter*
>%%LINK%%[[#^csmoep2v90p|show annotation]]
>%%COMMENT%%
>消息可消费
>%%TAGS%%
>
^csmoep2v90p


>%%
>```annotation-json
>{"created":"2023-07-10T16:35:54.033Z","text":"消息的两种模式：topic和queue\ntopic支持多个并发的消费者消费相同的消息，任何发布到topic里的消息都能广播到该topic的所有订阅组","updated":"2023-07-10T16:35:54.033Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":13565,"end":14147},{"type":"TextQuoteSelector","exact":"With enterprise messaging systems, you have the option of publishing messages to either a topic  or  a  queue,  and  there  are  fundamental  differences  between  the  two.  A  topic  supports multiple  concurrent  consumers  of  the  same  message.  Any  message  published  to  a  topic  is  automatically  broadcast  to  all  of  the  consumers  that  have  subscribed  to  the  topic.  Any  number of consumers can subscribe to a topic in order to receive the information being sent, kind of like any number of users can subscribe to Netflix and receive their streaming content","prefix":".2 Message Consumption Patterns ","suffix":". 1.2.1  Publish-Subscribe Messa"}]}]}
>```
>%%
>*%%PREFIX%%.2 Message Consumption Patterns%%HIGHLIGHT%% ==With enterprise messaging systems, you have the option of publishing messages to either a topic  or  a  queue,  and  there  are  fundamental  differences  between  the  two.  A  topic  supports multiple  concurrent  consumers  of  the  same  message.  Any  message  published  to  a  topic  is  automatically  broadcast  to  all  of  the  consumers  that  have  subscribed  to  the  topic.  Any  number of consumers can subscribe to a topic in order to receive the information being sent, kind of like any number of users can subscribe to Netflix and receive their streaming content== %%POSTFIX%%. 1.2.1  Publish-Subscribe Messa*
>%%LINK%%[[#^8bez2z0gaim|show annotation]]
>%%COMMENT%%
>消息的两种模式：topic和queue
>topic支持多个并发的消费者消费相同的消息，任何发布到topic里的消息都能广播到该topic的所有订阅组
>%%TAGS%%
>
^8bez2z0gaim


>%%
>```annotation-json
>{"created":"2023-07-10T16:39:33.811Z","text":"pub-sub模式支持多个消费者从同一个topic消费相同的消息","updated":"2023-07-10T16:39:33.811Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":14588,"end":14788},{"type":"TextQuoteSelector","exact":"However,  it  differs  from  message queuing on the consumption side because it supports multiple consumers receiving each message in a topic via a subscription mechanism as shown below in Figure 1.3.","prefix":"ct  order  that  they  arrive.  ","suffix":"    Figure 1.3 With pub-sub mess"}]}]}
>```
>%%
>*%%PREFIX%%ct  order  that  they  arrive.%%HIGHLIGHT%% ==However,  it  differs  from  message queuing on the consumption side because it supports multiple consumers receiving each message in a topic via a subscription mechanism as shown below in Figure 1.3.== %%POSTFIX%%Figure 1.3 With pub-sub mess*
>%%LINK%%[[#^h0ss282wk6t|show annotation]]
>%%COMMENT%%
>pub-sub模式支持多个消费者从同一个topic消费相同的消息
>%%TAGS%%
>
^h0ss282wk6t


>%%
>```annotation-json
>{"created":"2023-07-10T16:42:25.579Z","text":"queue模式下，每个消费者消费到的都是不同的消息","updated":"2023-07-10T16:42:25.579Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":15606,"end":16188},{"type":"TextQuoteSelector","exact":"Queues on the other hand provide first in, first out (FIFO) message delivery semantics to one or  more  competing  consumers  as  shown  in  Figure  1.4.  With  queues,  the  messages  are  delivered  in  the  order  they  are  received  and  only  one  message  consumer  receives  and  processes and individual message rather than all of them. These are perfect for queuing up messages that represent events that trigger some work to be performed, such as orders into a  fulfillment  center  for  dispatch.  In  this  scenario,  you  only  want  each  order  processed  just  once","prefix":"t order. 1.2.2  Message Queuing ","suffix":".  Message queues can easily sup"}]}]}
>```
>%%
>*%%PREFIX%%t order. 1.2.2  Message Queuing%%HIGHLIGHT%% ==Queues on the other hand provide first in, first out (FIFO) message delivery semantics to one or  more  competing  consumers  as  shown  in  Figure  1.4.  With  queues,  the  messages  are  delivered  in  the  order  they  are  received  and  only  one  message  consumer  receives  and  processes and individual message rather than all of them. These are perfect for queuing up messages that represent events that trigger some work to be performed, such as orders into a  fulfillment  center  for  dispatch.  In  this  scenario,  you  only  want  each  order  processed  just  once== %%POSTFIX%%.  Message queues can easily sup*
>%%LINK%%[[#^w21h195t7tq|show annotation]]
>%%COMMENT%%
>queue模式下，每个消费者消费到的都是不同的消息
>%%TAGS%%
>
^w21h195t7tq


>%%
>```annotation-json
>{"created":"2023-07-10T16:44:19.645Z","text":"通用消息系统","updated":"2023-07-10T16:44:19.645Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":18045,"end":18069},{"type":"TextQuoteSelector","exact":"Generic Messaging System","prefix":"sting messaging systems. 1.3.1  ","suffix":" Before I jump into specific mes"}]}]}
>```
>%%
>*%%PREFIX%%sting messaging systems. 1.3.1%%HIGHLIGHT%% ==Generic Messaging System== %%POSTFIX%%Before I jump into specific mes*
>%%LINK%%[[#^uprz3adpmpi|show annotation]]
>%%COMMENT%%
>通用消息系统
>%%TAGS%%
>
^uprz3adpmpi



>%%
>```annotation-json
>{"created":"2023-07-10T16:45:37.177Z","text":"服务层","updated":"2023-07-10T16:45:37.177Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":18918,"end":19422},{"type":"TextQuoteSelector","exact":"The serving layer is a conceptual layer within an enterprise messaging system that interacts directly  with  the  message  producers  and  consumers.  Its  primary  purpose  is  to  accept  incoming messages and route them to one or more destinations. Therefore, it communicates via  one  or  more  of  the  supported  messaging  protocols,  such  as  DDS,  AMQP,  MSMQ,  etc.  Consequently, this layer is heavily dependent on network bandwidth for communication, and CPU for message protocol translation","prefix":"ng Apache Pulsar. SERVING LAYER ","suffix":". STORAGE LAYER The  storage  la"}]}]}
>```
>%%
>*%%PREFIX%%ng Apache Pulsar. SERVING LAYER%%HIGHLIGHT%% ==The serving layer is a conceptual layer within an enterprise messaging system that interacts directly  with  the  message  producers  and  consumers.  Its  primary  purpose  is  to  accept  incoming messages and route them to one or more destinations. Therefore, it communicates via  one  or  more  of  the  supported  messaging  protocols,  such  as  DDS,  AMQP,  MSMQ,  etc.  Consequently, this layer is heavily dependent on network bandwidth for communication, and CPU for message protocol translation== %%POSTFIX%%. STORAGE LAYER The  storage  la*
>%%LINK%%[[#^tdumklipica|show annotation]]
>%%COMMENT%%
>服务层
>%%TAGS%%
>
^tdumklipica


>%%
>```annotation-json
>{"created":"2023-07-10T16:46:03.067Z","text":"存储层","updated":"2023-07-10T16:46:03.067Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":19438,"end":19867},{"type":"TextQuoteSelector","exact":"The  storage  layer  is  the  conceptual  layer  within  an  enterprise  messaging  system  that  is responsible  for  the  persistence  and  retrieval  of  the  messages.  It  interacts  directly  with  the  serving  layer  to  provide  the  requested  messages  and  is  responsible  for  the  retaining  the  proper  order  of  the  messages.  Consequently,  this  layer  is  heavily  dependent  on  disk  for  message storage","prefix":"ocol translation. STORAGE LAYER ","suffix":". 1.3.2  Message Oriented Middle"}]}]}
>```
>%%
>*%%PREFIX%%ocol translation. STORAGE LAYER%%HIGHLIGHT%% ==The  storage  layer  is  the  conceptual  layer  within  an  enterprise  messaging  system  that  is responsible  for  the  persistence  and  retrieval  of  the  messages.  It  interacts  directly  with  the  serving  layer  to  provide  the  requested  messages  and  is  responsible  for  the  retaining  the  proper  order  of  the  messages.  Consequently,  this  layer  is  heavily  dependent  on  disk  for  message storage== %%POSTFIX%%. 1.3.2  Message Oriented Middle*
>%%LINK%%[[#^8sgt5e3uajs|show annotation]]
>%%COMMENT%%
>存储层
>%%TAGS%%
>
^8sgt5e3uajs


>%%
>```annotation-json
>{"created":"2023-07-12T16:24:48.290Z","text":"MOM（面向消息的中间件），IBM WebSphere MQ，大型机单机部署。缺点：单点故障风险，物理机的能力（网卡带宽、磁盘空间等）成了系统的扩展性的限制","updated":"2023-07-12T16:24:48.290Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":20276,"end":20659},{"type":"TextQuoteSelector","exact":"The  earliest  implementations  were  designed  to  be  deployed  upon  a  single  machine  that  was often located deep within the company’s datacenter on a fairly large machine. Not only was this a single-point-of-failure, it also meant that the scalability of the system was limited to  the  physical  hardware  capacity  of  the  host  machine  because  this  single  server  was","prefix":"here MQ, which debuted in 1993. ","suffix":"  ©Manning Publications Co.  To "}]}]}
>```
>%%
>*%%PREFIX%%here MQ, which debuted in 1993.%%HIGHLIGHT%% ==The  earliest  implementations  were  designed  to  be  deployed  upon  a  single  machine  that  was often located deep within the company’s datacenter on a fairly large machine. Not only was this a single-point-of-failure, it also meant that the scalability of the system was limited to  the  physical  hardware  capacity  of  the  host  machine  because  this  single  server  was== %%POSTFIX%%©Manning Publications Co.  To*
>%%LINK%%[[#^3cg1jgrfox4|show annotation]]
>%%COMMENT%%
>MOM（面向消息的中间件），IBM WebSphere MQ，大型机单机部署。缺点：单点故障风险，物理机的能力（网卡带宽、磁盘空间等）成了系统的扩展性的限制
>%%TAGS%%
>
^3cg1jgrfox4


>%%
>```annotation-json
>{"created":"2023-07-12T16:31:46.408Z","text":"集群方式，通过负载均衡将消息打散到每个实例，解决扩展性问题。缺点：每个实例仅处理特定topic的消息","updated":"2023-07-12T16:31:46.408Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":21678,"end":22276},{"type":"TextQuoteSelector","exact":"Eventually these scalability issues were addressed though the addition of clustering capabilities to these single-server MOM systems. This allowed multiple single-service instances  to  share  the  processing  of  the  messages  and  provide  some  load  balancing  as  shown in Figure 1.7. Even though the MOM was clustered, in reality it just meant that each single-service instance was responsible for serving and storing messages for a sub-set of all the topics. A similar approach, called sharding, was taken by relational databases during this period as well to address this scalability issue","prefix":"n one physical host. CLUSTERING ","suffix":". ©Manning Publications Co.  To "}]}]}
>```
>%%
>*%%PREFIX%%n one physical host. CLUSTERING%%HIGHLIGHT%% ==Eventually these scalability issues were addressed though the addition of clustering capabilities to these single-server MOM systems. This allowed multiple single-service instances  to  share  the  processing  of  the  messages  and  provide  some  load  balancing  as  shown in Figure 1.7. Even though the MOM was clustered, in reality it just meant that each single-service instance was responsible for serving and storing messages for a sub-set of all the topics. A similar approach, called sharding, was taken by relational databases during this period as well to address this scalability issue== %%POSTFIX%%. ©Manning Publications Co.  To*
>%%LINK%%[[#^2fxhuwypuec|show annotation]]
>%%COMMENT%%
>集群方式，通过负载均衡将消息打散到每个实例，解决扩展性问题。缺点：每个实例仅处理特定topic的消息
>%%TAGS%%
>
^2fxhuwypuec


>%%
>```annotation-json
>{"created":"2023-07-12T16:35:35.852Z","text":"热点topic可能会导致单个实例出现瓶颈，也有可能消耗完存储空间，进而导致该实例无法提供服务，这还会影响它上面的其他topic。这也是另外一种“单点故障”","updated":"2023-07-12T16:35:35.852Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":22518,"end":23249},{"type":"TextQuoteSelector","exact":"Even  though  the  MOM  was  clustered,  in  reality  it  just  meant  that  each  single-service instance  was  responsible  for  serving  and  storage  messages  for  a  sub-set  of  all  the  topics,  and in the event of topic “hot-spots” the unlucky server assigned that particular topic could still become a bottleneck and/or potentially run out of storage capacity as well. In the event any  one  of  these  servers  in  the  cluster  were  to  fail,  it  would  take  all  of  the  topics  it  was  serving  down  with  it.  While  this  did  minimize  the  impact  of  the  failure  to  the  cluster  as  a  whole, e.g., it continued to run, it was a single-point-of-failure for this particular topics/queues it was serving","prefix":" only a portion of the topics.  ","suffix":". This  limitation  required  or"}]}]}
>```
>%%
>*%%PREFIX%%only a portion of the topics.%%HIGHLIGHT%% ==Even  though  the  MOM  was  clustered,  in  reality  it  just  meant  that  each  single-service instance  was  responsible  for  serving  and  storage  messages  for  a  sub-set  of  all  the  topics,  and in the event of topic “hot-spots” the unlucky server assigned that particular topic could still become a bottleneck and/or potentially run out of storage capacity as well. In the event any  one  of  these  servers  in  the  cluster  were  to  fail,  it  would  take  all  of  the  topics  it  was  serving  down  with  it.  While  this  did  minimize  the  impact  of  the  failure  to  the  cluster  as  a  whole, e.g., it continued to run, it was a single-point-of-failure for this particular topics/queues it was serving== %%POSTFIX%%. This  limitation  required  or*
>%%LINK%%[[#^hqaaqpch92|show annotation]]
>%%COMMENT%%
>热点topic可能会导致单个实例出现瓶颈，也有可能消耗完存储空间，进而导致该实例无法提供服务，这还会影响它上面的其他topic。这也是另外一种“单点故障”
>%%TAGS%%
>
^hqaaqpch92


>%%
>```annotation-json
>{"created":"2023-07-12T16:39:24.302Z","text":"因为存在上述这些限制，使用者需要提前评估topic大小，然后c合理地分配到各物理机上。然而单个topic的数据量可能超过物理机的限制，因此还需要将一个topic分配到多个物理机上方案","updated":"2023-07-12T16:39:24.302Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":23251,"end":24246},{"type":"TextQuoteSelector","exact":"This  limitation  required  organizations  to  meticulously  monitor  their  message  distribution  in order to align their topic distribution to match their underlying physical hardware to ensure that  the  load  was  evenly  distributed  across  the  cluster.  Even  then,  there  was  still  the  possibility that a single topic could still be problematic. Consider the scenario where you work for  a  major  financial  institution  and  you  wanted  a  single  topic  to  store  all  the  trade  information  for  a  particular  stock  and  provide  this  information  to  all  the  trade  desk applications  within  your  organization.  The  sheer  number  of  consumers  and  volume  of  data for this one topic could  easily overwhelm a single-server  that was dedicated to  serving just that topic. What was needed in such a scenario is the ability to distribute the load of a single topic across multiple machines, which as we shall see, is exactly what distributed messaging systems do","prefix":"r topics/queues it was serving. ","suffix":". 1.3.3  Enterprise Service Bus "}]}]}
>```
>%%
>*%%PREFIX%%r topics/queues it was serving.%%HIGHLIGHT%% ==This  limitation  required  organizations  to  meticulously  monitor  their  message  distribution  in order to align their topic distribution to match their underlying physical hardware to ensure that  the  load  was  evenly  distributed  across  the  cluster.  Even  then,  there  was  still  the  possibility that a single topic could still be problematic. Consider the scenario where you work for  a  major  financial  institution  and  you  wanted  a  single  topic  to  store  all  the  trade  information  for  a  particular  stock  and  provide  this  information  to  all  the  trade  desk applications  within  your  organization.  The  sheer  number  of  consumers  and  volume  of  data for this one topic could  easily overwhelm a single-server  that was dedicated to  serving just that topic. What was needed in such a scenario is the ability to distribute the load of a single topic across multiple machines, which as we shall see, is exactly what distributed messaging systems do== %%POSTFIX%%. 1.3.3  Enterprise Service Bus*
>%%LINK%%[[#^g6xyb2hrkd6|show annotation]]
>%%COMMENT%%
>因为存在上述这些限制，使用者需要提前评估topic大小，然后c合理地分配到各物理机上。然而单个topic的数据量可能超过物理机的限制，因此还需要将一个topic分配到多个物理机上方案
>%%TAGS%%
>
^g6xyb2hrkd6


>%%
>```annotation-json
>{"created":"2023-07-12T16:43:57.696Z","text":"ESB采用集中式的架构，它用作所有应用的通信通道","updated":"2023-07-12T16:43:57.696Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":24742,"end":24889},{"type":"TextQuoteSelector","exact":"This  centralized  architecture  is  in  direct  contrast  to  the  point-to-point integration previously used by other message-oriented middleware","prefix":"  applications  and  services.  ","suffix":".   Figure 1.8: The core concept"}]}]}
>```
>%%
>*%%PREFIX%%applications  and  services.%%HIGHLIGHT%% ==This  centralized  architecture  is  in  direct  contrast  to  the  point-to-point integration previously used by other message-oriented middleware== %%POSTFIX%%.   Figure 1.8: The core concept*
>%%LINK%%[[#^akp2yxjldc|show annotation]]
>%%COMMENT%%
>ESB采用集中式的架构，它用作所有应用的通信通道
>%%TAGS%%
>
^akp2yxjldc


>%%
>```annotation-json
>{"created":"2023-07-12T16:47:44.410Z","text":"ESB通过XQuery处理XML文档，提取出单个消息并将其路由到不同的消费者，这就引出了演化的第一阶段：流处理（stream processing）","updated":"2023-07-12T16:47:44.410Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":25869,"end":26376},{"type":"TextQuoteSelector","exact":"Consider  the  scenario  where  you  have  a  large  XML  document  that  contains  100s  of  individual line items within a single customer order, and you wanted to route only a subset of those items to a service based upon some criteria within the message itself, e.g., by product category or department. An ESB provided the capability to extract those individual messages (based  on  the  results  of  a  XQuery)  and  route  them  to  different  consumers  based  on  the  content of the message itself.","prefix":"llow it to route the messages.  ","suffix":"  In  addition  to  these  dynam"}]}]}
>```
>%%
>*%%PREFIX%%llow it to route the messages.%%HIGHLIGHT%% ==Consider  the  scenario  where  you  have  a  large  XML  document  that  contains  100s  of  individual line items within a single customer order, and you wanted to route only a subset of those items to a service based upon some criteria within the message itself, e.g., by product category or department. An ESB provided the capability to extract those individual messages (based  on  the  results  of  a  XQuery)  and  route  them  to  different  consumers  based  on  the  content of the message itself.== %%POSTFIX%%In  addition  to  these  dynam*
>%%LINK%%[[#^l4amwmowgbe|show annotation]]
>%%COMMENT%%
>ESB通过XQuery处理XML文档，提取出单个消息并将其路由到不同的消费者，这就引出了演化的第一阶段：流处理（stream processing）
>%%TAGS%%
>
^l4amwmowgbe


>%%
>```annotation-json
>{"created":"2023-07-12T16:54:05.756Z","text":"ESB的另一个特点：强调与外部系统的集成，可以将数据传输到外部非「面向消息」的系统，例如email、数据库等","updated":"2023-07-12T16:54:05.756Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":28106,"end":28794},{"type":"TextQuoteSelector","exact":"The ESB’s other significant contribution to the evolution of the messaging system was its focus  on  integration  with  external  systems  which  forced  messaging  systems  to  support  a  wide  variety  of  non-messaging  protocols  for  the  first  time.  While  ESB’s  still  fully-support AMQP  and  other  pub/sub  messaging  protocols,  a  key  differentiator  of  ESB  was  its  ability  to move  data  onto  and  off  of  the  bus  from  non-message-oriented  systems  such  as  email, databases,  and  other  third-party  systems.  In  order  to  do  this,  ESBs  provided  SDKs  that  allowed developers to implement their own adapters to integrate with their system of choice.","prefix":"nterprise integration patterns. ","suffix":" ©Manning Publications Co.  To c"}]}]}
>```
>%%
>*%%PREFIX%%nterprise integration patterns.%%HIGHLIGHT%% ==The ESB’s other significant contribution to the evolution of the messaging system was its focus  on  integration  with  external  systems  which  forced  messaging  systems  to  support  a  wide  variety  of  non-messaging  protocols  for  the  first  time.  While  ESB’s  still  fully-support AMQP  and  other  pub/sub  messaging  protocols,  a  key  differentiator  of  ESB  was  its  ability  to move  data  onto  and  off  of  the  bus  from  non-message-oriented  systems  such  as  email, databases,  and  other  third-party  systems.  In  order  to  do  this,  ESBs  provided  SDKs  that  allowed developers to implement their own adapters to integrate with their system of choice.== %%POSTFIX%%©Manning Publications Co.  To c*
>%%LINK%%[[#^1ah2etqnqve|show annotation]]
>%%COMMENT%%
>ESB的另一个特点：强调与外部系统的集成，可以将数据传输到外部非「面向消息」的系统，例如email、数据库等
>%%TAGS%%
>
^1ah2etqnqve


>%%
>```annotation-json
>{"created":"2023-07-12T16:57:32.687Z","text":"分布式系统可以认为是一组通过协作提供服务（例如文件系统、key-value存储、数据库等）的实例，对终端用户来说是无感的，就像是一个实例一样，它可以容忍硬件故障而不影响整个系统的可用性","updated":"2023-07-12T16:57:32.687Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":29793,"end":30414},{"type":"TextQuoteSelector","exact":"A  distributed  system  can  be  described  as  a  collection  of  computers  working  together  to  provide  a  service  or  feature  such  as  a  filesystem,  key-value  store,  database,  etc.  That  acts  as  though  they  are  running  on  a  single  computer  to  the  end  user.  That  is  to  say,  the  end  user  isn’t  aware  of  the  fact  that  the  service  is  being  provided  by  a  collection  of  machines  working  together.  Distributed  systems  have  a  shared  state,  operate  concurrently,  and  are  able to tolerate hardware failures without affecting the availability of the system as a whole","prefix":"  Distributed Messaging Systems ","suffix":". When the distributed computing"}]}]}
>```
>%%
>*%%PREFIX%%Distributed Messaging Systems%%HIGHLIGHT%% ==A  distributed  system  can  be  described  as  a  collection  of  computers  working  together  to  provide  a  service  or  feature  such  as  a  filesystem,  key-value  store,  database,  etc.  That  acts  as  though  they  are  running  on  a  single  computer  to  the  end  user.  That  is  to  say,  the  end  user  isn’t  aware  of  the  fact  that  the  service  is  being  provided  by  a  collection  of  machines  working  together.  Distributed  systems  have  a  shared  state,  operate  concurrently,  and  are  able to tolerate hardware failures without affecting the availability of the system as a whole== %%POSTFIX%%. When the distributed computing*
>%%LINK%%[[#^xfqqtakuui|show annotation]]
>%%COMMENT%%
>分布式系统可以认为是一组通过协作提供服务（例如文件系统、key-value存储、数据库等）的实例，对终端用户来说是无感的，就像是一个实例一样，它可以容忍硬件故障而不影响整个系统的可用性
>%%TAGS%%
>
^xfqqtakuui


>%%
>```annotation-json
>{"created":"2023-07-12T17:03:03.597Z","text":"最大的收益是不再受单机性能的限制，可以通过加机器的方式提升集群的性能","updated":"2023-07-12T17:03:03.597Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":30738,"end":30970},{"type":"TextQuoteSelector","exact":"One of the biggest benefits of distributed computing  is the ability to  scale  the system horizontally  simply by adding new machines  to the system. Unlike their non-distributed predecessors that were previously constrained to the","prefix":"orage across multiple machines. ","suffix":" ©Manning Publications Co.  To c"}]}]}
>```
>%%
>*%%PREFIX%%orage across multiple machines.%%HIGHLIGHT%% ==One of the biggest benefits of distributed computing  is the ability to  scale  the system horizontally  simply by adding new machines  to the system. Unlike their non-distributed predecessors that were previously constrained to the== %%POSTFIX%%©Manning Publications Co.  To c*
>%%LINK%%[[#^945is5mkmlh|show annotation]]
>%%COMMENT%%
>最大的收益是不再受单机性能的限制，可以通过加机器的方式提升集群的性能
>%%TAGS%%
>
^945is5mkmlh


>%%
>```annotation-json
>{"created":"2023-07-12T17:05:50.026Z","text":"分布式消息系统：一个topic可以分布与多个集群，这样提供水平扩展的能力。另外还可以通过冗余实现数据的高可用等等","updated":"2023-07-12T17:05:50.026Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":31864,"end":32499},{"type":"TextQuoteSelector","exact":"Within  a  distributed  messaging  system,  the  contents  of  a  single  topic  are  distributed  across  multiple  machines  in  order  to  provide  horizontally  scalable  storage  at  the  message  layer,  something  that  was  not  possible  with  previous  messaging  systems.  Distributing  the  data across several nodes in the cluster also provides several advantages including redundancy  and  high  availability  of  the  data,  increased  storage  capacity  for  messages, increased  message  throughput  due  to  the  increased  number  of  message  brokers,  and  elimination of single point of failure within the system.","prefix":"stributed across all the nodes. ","suffix":" The key architectural differenc"}]}]}
>```
>%%
>*%%PREFIX%%stributed across all the nodes.%%HIGHLIGHT%% ==Within  a  distributed  messaging  system,  the  contents  of  a  single  topic  are  distributed  across  multiple  machines  in  order  to  provide  horizontally  scalable  storage  at  the  message  layer,  something  that  was  not  possible  with  previous  messaging  systems.  Distributing  the  data across several nodes in the cluster also provides several advantages including redundancy  and  high  availability  of  the  data,  increased  storage  capacity  for  messages, increased  message  throughput  due  to  the  increased  number  of  message  brokers,  and  elimination of single point of failure within the system.== %%POSTFIX%%The key architectural differenc*
>%%LINK%%[[#^r5fn56lwzxa|show annotation]]
>%%COMMENT%%
>分布式消息系统：一个topic可以分布与多个集群，这样提供水平扩展的能力。另外还可以通过冗余实现数据的高可用等等
>%%TAGS%%
>
^r5fn56lwzxa


>%%
>```annotation-json
>{"created":"2023-07-12T17:11:00.628Z","text":"这两种架构的最大不同点在存储层的设计：单节点系统中每个topic只能存储在一台机器的磁盘上，大小受磁盘容量限制。分布式消息系统中每个topic保存在多个机器上，因此topic大小可以超过单个机器的容量限制。关键的架构抽象是“write-ahead-log”，它将消息队列的内容看作是只能追加的数据结构","updated":"2023-07-12T17:11:00.628Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":32500,"end":33517},{"type":"TextQuoteSelector","exact":"The key architectural difference between a distributed messaging system and a clustered single-node system, is the way in which the storage layer is designed. In the previous single-node  systems,  the  message  data  for  any  given  topic  was  all  stored  together  on  the  same  machine  which  allowed  the  data  to  be  served  quickly  from  local  disk.  However,  as  we  mentioned  earlier,  this  limited  the  size  of  the  topic  to  the  capacity  of  the  local  disk  on  that  machine.  Within  a  distributed  messaging  system,  the  data  is  distributed  across  several  machines within the cluster. This distribution of data across multiple machines, allows us to retain  messages within an  individual  topic  that  exceed  the storage capacity of an individual machine. The key architectural abstraction that makes this distribution of data possible is the “write-ahead-log”, which treats the contents of a message queue as single append-only data structure that messages can be stored in","prefix":"t of failure within the system. ","suffix":".  ©Manning Publications Co.  To"}]}]}
>```
>%%
>*%%PREFIX%%t of failure within the system.%%HIGHLIGHT%% ==The key architectural difference between a distributed messaging system and a clustered single-node system, is the way in which the storage layer is designed. In the previous single-node  systems,  the  message  data  for  any  given  topic  was  all  stored  together  on  the  same  machine  which  allowed  the  data  to  be  served  quickly  from  local  disk.  However,  as  we  mentioned  earlier,  this  limited  the  size  of  the  topic  to  the  capacity  of  the  local  disk  on  that  machine.  Within  a  distributed  messaging  system,  the  data  is  distributed  across  several  machines within the cluster. This distribution of data across multiple machines, allows us to retain  messages within an  individual  topic  that  exceed  the storage capacity of an individual machine. The key architectural abstraction that makes this distribution of data possible is the “write-ahead-log”, which treats the contents of a message queue as single append-only data structure that messages can be stored in== %%POSTFIX%%.  ©Manning Publications Co.  To*
>%%LINK%%[[#^sqnc6cy28sf|show annotation]]
>%%COMMENT%%
>这两种架构的最大不同点在存储层的设计：单节点系统中每个topic只能存储在一台机器的磁盘上，大小受磁盘容量限制。分布式消息系统中每个topic保存在多个机器上，因此topic大小可以超过单个机器的容量限制。关键的架构抽象是“write-ahead-log”，它将消息队列的内容看作是只能追加的数据结构
>%%TAGS%%
>
^sqnc6cy28sf


>%%
>```annotation-json
>{"created":"2023-07-12T17:16:17.341Z","text":"多台机器为一个topic提供服务，提高了生产和消费的吞吐量","updated":"2023-07-12T17:16:17.341Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":34133,"end":35078},{"type":"TextQuoteSelector","exact":"This  provides  distributed  messaging  systems  with  a  far  more  scalable  storage  capacity  layer than the previous generations of messaging systems. Another benefit of the distributed messaging architecture is the ability of more than one broker to serve the messages for any given  topic,  which  increases  the  message  production  and  consumption  throughput  by  spreading the load across multiple machines. For example, messages published to the topic shown  in  Figure  1.12  would  be  handled  by  three  separate  servers,  each  with  its  own  write  path to disk. This would result in a higher write rate since the load is spread across multiple disks  rather  than  just  a  single  disk  as  it  was  in  the  previous  generation  of  messaging  systems.  There  are  two  distinct  approaches  taken  when  it  comes  to  how  the  data  is  distributed across the nodes in the cluster: partition-based and segment-based","prefix":"ashion across multiple servers. ","suffix":". ©Manning Publications Co.  To "}]}]}
>```
>%%
>*%%PREFIX%%ashion across multiple servers.%%HIGHLIGHT%% ==This  provides  distributed  messaging  systems  with  a  far  more  scalable  storage  capacity  layer than the previous generations of messaging systems. Another benefit of the distributed messaging architecture is the ability of more than one broker to serve the messages for any given  topic,  which  increases  the  message  production  and  consumption  throughput  by  spreading the load across multiple machines. For example, messages published to the topic shown  in  Figure  1.12  would  be  handled  by  three  separate  servers,  each  with  its  own  write  path to disk. This would result in a higher write rate since the load is spread across multiple disks  rather  than  just  a  single  disk  as  it  was  in  the  previous  generation  of  messaging  systems.  There  are  two  distinct  approaches  taken  when  it  comes  to  how  the  data  is  distributed across the nodes in the cluster: partition-based and segment-based== %%POSTFIX%%. ©Manning Publications Co.  To*
>%%LINK%%[[#^irarck0hsgk|show annotation]]
>%%COMMENT%%
>多台机器为一个topic提供服务，提高了生产和消费的吞吐量
>%%TAGS%%
>
^irarck0hsgk


>%%
>```annotation-json
>{"created":"2023-07-13T16:29:50.534Z","text":"kafka-基于分区策略的消息系统：topic被分割成固定数量、相同大小的组（称为分区）。数据被分发到每一个分区，topic的总容量等于分区数乘以分区大小，超过该容量后就不能再写入数据。单纯增加broker数量无法解决此问题，因为还需要增加分区的数量，然而增加分区数量需要执行重平衡，它的代价比较大并且很耗时","updated":"2023-07-13T16:29:50.534Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":35169,"end":36110},{"type":"TextQuoteSelector","exact":"When using the partition-based strategy within a messaging system, the topic is divided into a  fixed  number  of  equal  sized  groupings  known  as  partitions.  Data  that  is  published  to  the  topic  is  evenly  distributed  across  the  partitions  as  shown  in  Figure  1.13  with  each  partition  receiving one-third of the messages published to the topic. The total storage capacity of the topic  is  now  equal  to  the  number  of  partitions  in  the  topic  times  the  size  of  each  partition.  Once  this  limit  is  reached  no  more  data  can  be  added  to  the  topic.  Simply  adding  more  brokers to the cluster will not alleviate this issue because you will also need to increase the number of partitions in the topic which must be performed manually. Furthermore, increasing the number of partitions also requires a rebalance to be performed which, as I will discuss, is an expensive and time-consuming process","prefix":"TITION-CENTRIC STORAGE IN KAFKA ","suffix":". Within  a  partition-centric  "}]}]}
>```
>%%
>*%%PREFIX%%TITION-CENTRIC STORAGE IN KAFKA%%HIGHLIGHT%% ==When using the partition-based strategy within a messaging system, the topic is divided into a  fixed  number  of  equal  sized  groupings  known  as  partitions.  Data  that  is  published  to  the  topic  is  evenly  distributed  across  the  partitions  as  shown  in  Figure  1.13  with  each  partition  receiving one-third of the messages published to the topic. The total storage capacity of the topic  is  now  equal  to  the  number  of  partitions  in  the  topic  times  the  size  of  each  partition.  Once  this  limit  is  reached  no  more  data  can  be  added  to  the  topic.  Simply  adding  more  brokers to the cluster will not alleviate this issue because you will also need to increase the number of partitions in the topic which must be performed manually. Furthermore, increasing the number of partitions also requires a rebalance to be performed which, as I will discuss, is an expensive and time-consuming process== %%POSTFIX%%. Within  a  partition-centric*
>%%LINK%%[[#^jj4cnvnwcj|show annotation]]
>%%COMMENT%%
>kafka-基于分区策略的消息系统：topic被分割成固定数量、相同大小的组（称为分区）。数据被分发到每一个分区，topic的总容量等于分区数乘以分区大小，超过该容量后就不能再写入数据。单纯增加broker数量无法解决此问题，因为还需要增加分区的数量，然而增加分区数量需要执行重平衡，它的代价比较大并且很耗时
>%%TAGS%%
>
^jj4cnvnwcj


>%%
>```annotation-json
>{"created":"2023-07-14T13:15:44.168Z","text":"在基于分区存储的系统中，当创建系统的时候分区的数量就已经决定了，这使得系统可以决定哪个节点存储哪个分区。然而预先确定分区的数量也有一些副作用","updated":"2023-07-14T13:15:44.168Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":36112,"end":36470},{"type":"TextQuoteSelector","exact":"Within  a  partition-centric  storage-based  system,  the  number  of  partitions  is  specified  when  the  topic  is  created,  as  this  allows  the  system  to  determine  the  which  node  will  be  responsible  for  storing  the  which  partiton,  etc.  However,  pre-determining  the  number  of  partitions has a few unintended side-effects including","prefix":"ive and time-consuming process. ","suffix":":  • A single partition can only"}]}]}
>```
>%%
>*%%PREFIX%%ive and time-consuming process.%%HIGHLIGHT%% ==Within  a  partition-centric  storage-based  system,  the  number  of  partitions  is  specified  when  the  topic  is  created,  as  this  allows  the  system  to  determine  the  which  node  will  be  responsible  for  storing  the  which  partiton,  etc.  However,  pre-determining  the  number  of  partitions has a few unintended side-effects including== %%POSTFIX%%:  • A single partition can only*
>%%LINK%%[[#^ogrtyl2wzt8|show annotation]]
>%%COMMENT%%
>在基于分区存储的系统中，当创建系统的时候分区的数量就已经决定了，这使得系统可以决定哪个节点存储哪个分区。然而预先确定分区的数量也有一些副作用
>%%TAGS%%
>
^ogrtyl2wzt8


>%%
>```annotation-json
>{"created":"2023-07-14T13:20:11.159Z","text":"一个分区只能存储在集群中的一个节点上，因此分区的大小受到该节点磁盘剩余空间大小的限制","updated":"2023-07-14T13:20:11.159Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":36475,"end":36631},{"type":"TextQuoteSelector","exact":"A single partition can only be stored on a single node within the cluster, so the size of the partition is limited to amount of free disk space on that node","prefix":"nded side-effects including:  • ","suffix":". • Since  the  data  is  evenly"}]}]}
>```
>%%
>*%%PREFIX%%nded side-effects including:  •%%HIGHLIGHT%% ==A single partition can only be stored on a single node within the cluster, so the size of the partition is limited to amount of free disk space on that node== %%POSTFIX%%. • Since  the  data  is  evenly*
>%%LINK%%[[#^n6le8ywj5un|show annotation]]
>%%COMMENT%%
>一个分区只能存储在集群中的一个节点上，因此分区的大小受到该节点磁盘剩余空间大小的限制
>%%TAGS%%
>
^n6le8ywj5un


>%%
>```annotation-json
>{"created":"2023-07-14T13:21:39.331Z","text":"因为数据平均分布于所有的分区，所以可用分区的大小等于该topic下最小的分区大小","updated":"2023-07-14T13:21:39.331Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":36635,"end":36782},{"type":"TextQuoteSelector","exact":"Since  the  data  is  evenly  distributed  across  all  partitions,  each  partition  is  limited  to  the size of smallest partition in the topic.","prefix":"free disk space on that node. • ","suffix":" For instance, if a topic is dis"}]}]}
>```
>%%
>*%%PREFIX%%free disk space on that node. •%%HIGHLIGHT%% ==Since  the  data  is  evenly  distributed  across  all  partitions,  each  partition  is  limited  to  the size of smallest partition in the topic.== %%POSTFIX%%For instance, if a topic is dis*
>%%LINK%%[[#^6cuknyhwvjc|show annotation]]
>%%COMMENT%%
>因为数据平均分布于所有的分区，所以可用分区的大小等于该topic下最小的分区大小
>%%TAGS%%
>
^6cuknyhwvjc


>%%
>```annotation-json
>{"created":"2023-07-14T13:23:36.902Z","text":"尽管不是严格要求，通常情况下每一个分区会在其他节点上复制多个副本，因此分区的最大空间要小于最小的那个副本","updated":"2023-07-14T13:23:36.902Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":37035,"end":37265},{"type":"TextQuoteSelector","exact":"Although it isn’t strictly required, each partition is usually replicated multiple times to different nodes to ensure data redundancy. Therefore, the maximum partition size is further restricted to the size of the smallest replica","prefix":"can only grow to 1TB as well. • ","suffix":". ©Manning Publications Co.  To "}]}]}
>```
>%%
>*%%PREFIX%%can only grow to 1TB as well. •%%HIGHLIGHT%% ==Although it isn’t strictly required, each partition is usually replicated multiple times to different nodes to ensure data redundancy. Therefore, the maximum partition size is further restricted to the size of the smallest replica== %%POSTFIX%%. ©Manning Publications Co.  To*
>%%LINK%%[[#^66brq15h9vb|show annotation]]
>%%COMMENT%%
>尽管不是严格要求，通常情况下每一个分区会在其他节点上复制多个副本，因此分区的最大空间要小于最小的那个副本
>%%TAGS%%
>
^66brq15h9vb


>%%
>```annotation-json
>{"created":"2023-07-14T13:26:05.179Z","text":"一旦你遇到容量不足的情况，唯一的解决方案是增加该topic的分区数量。然而这种容量扩容的过程需要对整个topic进行重平衡。在重平衡过程中，topic已有的数据需要重新分配到所有的分区上，以便从现有节点的磁盘上释放出空间。","updated":"2023-07-14T13:26:05.179Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":37389,"end":38004},{"type":"TextQuoteSelector","exact":"In  the  event  you  run  into  one  of  these  capacity  limitations,  your  only  remedy  is  to  increase  the  number  of  partitions  in  the  topic.  However,  this  capacity  expansion  processes  requires rebalancing the entire topic as shown in Figure 1.14. During this rebalancing process the existing topic data is redistributed across all of the topic partitions in order to free up disk space on the existing nodes. Therefore, when you add a fourth partition to an existing topic each  partition  should  have  approximately  25%  of  the  total  messages  once  the  rebalancing  process has completed","prefix":"artition-Based Messaging System ","suffix":".  This  recopying  of  data  is"}]}]}
>```
>%%
>*%%PREFIX%%artition-Based Messaging System%%HIGHLIGHT%% ==In  the  event  you  run  into  one  of  these  capacity  limitations,  your  only  remedy  is  to  increase  the  number  of  partitions  in  the  topic.  However,  this  capacity  expansion  processes  requires rebalancing the entire topic as shown in Figure 1.14. During this rebalancing process the existing topic data is redistributed across all of the topic partitions in order to free up disk space on the existing nodes. Therefore, when you add a fourth partition to an existing topic each  partition  should  have  approximately  25%  of  the  total  messages  once  the  rebalancing  process has completed== %%POSTFIX%%.  This  recopying  of  data  is*
>%%LINK%%[[#^r8k7tcg772|show annotation]]
>%%COMMENT%%
>一旦你遇到容量不足的情况，唯一的解决方案是增加该topic的分区数量。然而这种容量扩容的过程需要对整个topic进行重平衡。在重平衡过程中，topic已有的数据需要重新分配到所有的分区上，以便从现有节点的磁盘上释放出空间。
>%%TAGS%%
>
^r8k7tcg772


>%%
>```annotation-json
>{"created":"2023-07-14T13:30:52.727Z","text":"重新复制数据代价极大并且容易出错，因为它消耗的网络带宽和磁盘io与topic的大小成比例。\n只有当重平衡完成、原来的数据已经删除后，该topic才能够对外提供服务","updated":"2023-07-14T13:30:52.727Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":38007,"end":38622},{"type":"TextQuoteSelector","exact":"This  recopying  of  data  is  expensive  and  error  prone  as  it  consumes  network  bandwidth and  disk  I/O  directly  proportional  to  the  size  of  the  topic,  e.g.,  rebalancing  a  10TB  topic  would result in 10TB of data being read from disk, transmitted over the network, and written to  disk  on  the  target  brokers.  Only  after  the  rebalancing  process  has  completed,  can  the  previously existing data be deleted, and the topic can resume serving clients. Therefore, it is advisable  to  choose  your  partition  sizing  wisely,  as  the  cost  to  rebalance  cannot  be  easily  dismissed","prefix":"ancing  process has completed.  ","suffix":". ©Manning Publications Co.  To "}]}]}
>```
>%%
>*%%PREFIX%%ancing  process has completed.%%HIGHLIGHT%% ==This  recopying  of  data  is  expensive  and  error  prone  as  it  consumes  network  bandwidth and  disk  I/O  directly  proportional  to  the  size  of  the  topic,  e.g.,  rebalancing  a  10TB  topic  would result in 10TB of data being read from disk, transmitted over the network, and written to  disk  on  the  target  brokers.  Only  after  the  rebalancing  process  has  completed,  can  the  previously existing data be deleted, and the topic can resume serving clients. Therefore, it is advisable  to  choose  your  partition  sizing  wisely,  as  the  cost  to  rebalance  cannot  be  easily  dismissed== %%POSTFIX%%. ©Manning Publications Co.  To*
>%%LINK%%[[#^0td0phifjppk|show annotation]]
>%%COMMENT%%
>重新复制数据代价极大并且容易出错，因为它消耗的网络带宽和磁盘io与topic的大小成比例。
>只有当重平衡完成、原来的数据已经删除后，该topic才能够对外提供服务
>%%TAGS%%
>
^0td0phifjppk


>%%
>```annotation-json
>{"created":"2023-07-14T13:41:50.157Z","text":"默认的副本数量设置是3，这意味着每一条消息会保存3份拷贝","updated":"2023-07-14T13:41:50.157Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":39233,"end":39342},{"type":"TextQuoteSelector","exact":"The  default  replica  setting is three, which means that the system will retain three copies of each message","prefix":"  event  of  a  node  failure.  ","suffix":". While this  is  a  good  trade"}]}]}
>```
>%%
>*%%PREFIX%%event  of  a  node  failure.%%HIGHLIGHT%% ==The  default  replica  setting is three, which means that the system will retain three copies of each message== %%POSTFIX%%. While this  is  a  good  trade*
>%%LINK%%[[#^eg9a8beyl29|show annotation]]
>%%COMMENT%%
>默认的副本数量设置是3，这意味着每一条消息会保存3份拷贝
>%%TAGS%%
>
^eg9a8beyl29


>%%
>```annotation-json
>{"created":"2023-07-14T13:44:00.460Z","text":"pulsar基于apache bookkeeper提供消息的持久化存储","updated":"2023-07-14T13:44:00.460Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":39556,"end":39669},{"type":"TextQuoteSelector","exact":"Pulsar  relies  upon  the  Apache  BookKeeper  project  to  provide  the  persistent  storage  of  its  messages.","prefix":"GMENT-CENTRIC STORAGE IN PULSAR ","suffix":" BookKeeper's logical storage mo"}]}]}
>```
>%%
>*%%PREFIX%%GMENT-CENTRIC STORAGE IN PULSAR%%HIGHLIGHT%% ==Pulsar  relies  upon  the  Apache  BookKeeper  project  to  provide  the  persistent  storage  of  its  messages.== %%POSTFIX%%BookKeeper's logical storage mo*
>%%LINK%%[[#^t5yw04agxq|show annotation]]
>%%COMMENT%%
>pulsar基于apache bookkeeper提供消息的持久化存储
>%%TAGS%%
>
^t5yw04agxq


>%%
>```annotation-json
>{"created":"2023-07-14T13:45:25.769Z","text":"BookKeeper的每一个日志都被拆成小的数据块，它由多个log项组成，被称为segment","updated":"2023-07-14T13:45:25.769Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":39880,"end":40028},{"type":"TextQuoteSelector","exact":"BookKeeper each log  is  broken  down  into  smaller  chunks  of  data  known  as  segments  which  in  turn  are  comprised of multiple log entries","prefix":"an see from Figure 1.15, within ","suffix":". These segments are then writte"}]}]}
>```
>%%
>*%%PREFIX%%an see from Figure 1.15, within%%HIGHLIGHT%% ==BookKeeper each log  is  broken  down  into  smaller  chunks  of  data  known  as  segments  which  in  turn  are  comprised of multiple log entries== %%POSTFIX%%. These segments are then writte*
>%%LINK%%[[#^zka5vqx1xa|show annotation]]
>%%COMMENT%%
>BookKeeper的每一个日志都被拆成小的数据块，它由多个log项组成，被称为segment
>%%TAGS%%
>
^zka5vqx1xa


>%%
>```annotation-json
>{"created":"2023-07-14T13:47:13.656Z","text":"segment可以保存在存储层的任意位置，只要有足够的磁盘空间即可","updated":"2023-07-14T13:47:13.656Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":40422,"end":40516},{"type":"TextQuoteSelector","exact":"he segments can be placed anywhere on the storage layer  that  has  sufficient  disk  capacity","prefix":" you can see from Figure 1.15, t","suffix":".  When  there  isn’t  sufficien"}]}]}
>```
>%%
>*%%PREFIX%%you can see from Figure 1.15, t%%HIGHLIGHT%% ==he segments can be placed anywhere on the storage layer  that  has  sufficient  disk  capacity== %%POSTFIX%%.  When  there  isn’t  sufficien*
>%%LINK%%[[#^zthx2i1ego|show annotation]]
>%%COMMENT%%
>segment可以保存在存储层的任意位置，只要有足够的磁盘空间即可
>%%TAGS%%
>
^zthx2i1ego


>%%
>```annotation-json
>{"created":"2023-07-14T13:48:22.577Z","text":"当没有足够的存储空间用于保存新的segment，可以很容易地添加新的节点","updated":"2023-07-14T13:48:22.577Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":40519,"end":40693},{"type":"TextQuoteSelector","exact":"When  there  isn’t  sufficient  storage  capacity  in  the  storage  layer  for  new  segments,  new  nodes  can  be  easily  added  and  used  immediately  for storing  data","prefix":"s  sufficient  disk  capacity.  ","suffix":".  One  of  the  key  benefits  "}]}]}
>```
>%%
>*%%PREFIX%%s  sufficient  disk  capacity.%%HIGHLIGHT%% ==When  there  isn’t  sufficient  storage  capacity  in  the  storage  layer  for  new  segments,  new  nodes  can  be  easily  added  and  used  immediately  for storing  data== %%POSTFIX%%.  One  of  the  key  benefits*
>%%LINK%%[[#^2y1ghcjlcfh|show annotation]]
>%%COMMENT%%
>当没有足够的存储空间用于保存新的segment，可以很容易地添加新的节点
>%%TAGS%%
>
^2y1ghcjlcfh


>%%
>```annotation-json
>{"created":"2023-07-14T13:49:43.567Z","text":"一个关键的优势：可以水平扩展，因为segment可以存储在任意位置","updated":"2023-07-14T13:49:43.567Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":40696,"end":40871},{"type":"TextQuoteSelector","exact":"One  of  the  key  benefits  of  segment-centric  storage  architecture  is  true  horizontal  scalability  as  segments  can  be  created  indefinitely  and  stored  anywhere","prefix":"mmediately  for storing  data.  ","suffix":".  Unlike  partition-centric  st"}]}]}
>```
>%%
>*%%PREFIX%%mmediately  for storing  data.%%HIGHLIGHT%% ==One  of  the  key  benefits  of  segment-centric  storage  architecture  is  true  horizontal  scalability  as  segments  can  be  created  indefinitely  and  stored  anywhere== %%POSTFIX%%.  Unlike  partition-centric  st*
>%%LINK%%[[#^fuae1fwra8|show annotation]]
>%%COMMENT%%
>一个关键的优势：可以水平扩展，因为segment可以存储在任意位置
>%%TAGS%%
>
^fuae1fwra8


>%%
>```annotation-json
>{"created":"2023-07-14T13:50:31.488Z","text":"基于分区的存储在垂直和水平扩展方面都有限制","updated":"2023-07-14T13:50:31.488Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":40882,"end":41029},{"type":"TextQuoteSelector","exact":"partition-centric  storage  which  imposes  artificial  limitations  to  both  vertical  and  horizontal  scaling based on the number of partitions","prefix":"and  stored  anywhere.  Unlike  ","suffix":".  ©Manning Publications Co.  To"}]}]}
>```
>%%
>*%%PREFIX%%and  stored  anywhere.  Unlike%%HIGHLIGHT%% ==partition-centric  storage  which  imposes  artificial  limitations  to  both  vertical  and  horizontal  scaling based on the number of partitions== %%POSTFIX%%.  ©Manning Publications Co.  To*
>%%LINK%%[[#^6hyaor1yebi|show annotation]]
>%%COMMENT%%
>基于分区的存储在垂直和水平扩展方面都有限制
>%%TAGS%%
>
^6hyaor1yebi


>%%
>```annotation-json
>{"created":"2023-07-14T13:51:47.270Z","text":"pulsar: 消息服务层、存储层解耦，可以独立地扩展","updated":"2023-07-14T13:51:47.270Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":41579,"end":41747},{"type":"TextQuoteSelector","exact":"Apache  Pulsar’s  Multi-layered  architecture  completely  decouples  the  message  serving  layer  from the message storage layer, allowing each to scale independently","prefix":"4.1  Multi-Layered Architecture ","suffix":". Traditional distributed messag"}]}]}
>```
>%%
>*%%PREFIX%%4.1  Multi-Layered Architecture%%HIGHLIGHT%% ==Apache  Pulsar’s  Multi-layered  architecture  completely  decouples  the  message  serving  layer  from the message storage layer, allowing each to scale independently== %%POSTFIX%%. Traditional distributed messag*
>%%LINK%%[[#^h4qpkjincf4|show annotation]]
>%%COMMENT%%
>pulsar: 消息服务层、存储层解耦，可以独立地扩展
>%%TAGS%%
>
^h4qpkjincf4


>%%
>```annotation-json
>{"created":"2023-07-14T13:53:16.412Z","text":"kafka: 架构简单，性能上有优势（减少了数据在网络上的传输）。但是在扩展性上较差","updated":"2023-07-14T13:53:16.412Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":41933,"end":42171},{"type":"TextQuoteSelector","exact":"That  design  choice  offered  a  simpler  infrastructure  and  some  performance  benefits  due  to  reducing  transfer  of  data over the network, but at the cost of a lot of tradeoffs that impact scalability, resiliency, and operations","prefix":"cluster  nodes  or  instances.  ","suffix":".  Figure 1.16: Monolithic distr"}]}]}
>```
>%%
>*%%PREFIX%%cluster  nodes  or  instances.%%HIGHLIGHT%% ==That  design  choice  offered  a  simpler  infrastructure  and  some  performance  benefits  due  to  reducing  transfer  of  data over the network, but at the cost of a lot of tradeoffs that impact scalability, resiliency, and operations== %%POSTFIX%%.  Figure 1.16: Monolithic distr*
>%%LINK%%[[#^mzn81y4ekmn|show annotation]]
>%%COMMENT%%
>kafka: 架构简单，性能上有优势（减少了数据在网络上的传输）。但是在扩展性上较差
>%%TAGS%%
>
^mzn81y4ekmn


>%%
>```annotation-json
>{"created":"2023-07-14T13:56:45.543Z","text":"解耦的优势：动态扩容、无停机升级、无限的存储空间","updated":"2023-07-14T13:56:45.543Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":42981,"end":43141},{"type":"TextQuoteSelector","exact":"This  decoupling  has  several  benefits  including dynamic scalability, zero down-time upgrades, and infinite storage capacity upgrades  just  to  name  a  few","prefix":"  as  shown  in  Figure  1.16.  ","suffix":".  Further,  this  design  is  c"}]}]}
>```
>%%
>*%%PREFIX%%as  shown  in  Figure  1.16.%%HIGHLIGHT%% ==This  decoupling  has  several  benefits  including dynamic scalability, zero down-time upgrades, and infinite storage capacity upgrades  just  to  name  a  few== %%POSTFIX%%.  Further,  this  design  is  c*
>%%LINK%%[[#^b6rfp5957t|show annotation]]
>%%COMMENT%%
>解耦的优势：动态扩容、无停机升级、无限的存储空间
>%%TAGS%%
>
^b6rfp5957t


>%%
>```annotation-json
>{"created":"2023-07-21T12:50:06.281Z","text":"动态扩缩容","updated":"2023-07-21T12:50:06.281Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":43277,"end":43292},{"type":"TextQuoteSelector","exact":"DYNAMIC SCALING","prefix":"cloud native streaming system.  ","suffix":" Consider  the  case  where  we "}]}]}
>```
>%%
>*%%PREFIX%%cloud native streaming system.%%HIGHLIGHT%% ==DYNAMIC SCALING== %%POSTFIX%%Consider  the  case  where  we*
>%%LINK%%[[#^e4k4fuwe6xt|show annotation]]
>%%COMMENT%%
>动态扩缩容
>%%TAGS%%
>
^e4k4fuwe6xt


>%%
>```annotation-json
>{"created":"2023-07-21T12:51:23.112Z","text":"高峰期后自动缩容","updated":"2023-07-21T12:51:23.112Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":44653,"end":44741},{"type":"TextQuoteSelector","exact":"enables  the  ability  to  scale  the infrastructure  down  once  the  spike  has  past,","prefix":" in  the  serving  layer  also  ","suffix":"  which  translates  directly  i"}]}]}
>```
>%%
>*%%PREFIX%%in  the  serving  layer  also%%HIGHLIGHT%% ==enables  the  ability  to  scale  the infrastructure  down  once  the  spike  has  past,== %%POSTFIX%%which  translates  directly  i*
>%%LINK%%[[#^cdzbkrdu7a|show annotation]]
>%%COMMENT%%
>高峰期后自动缩容
>%%TAGS%%
>
^cdzbkrdu7a


>%%
>```annotation-json
>{"created":"2023-07-21T12:58:10.879Z","text":"对于其他的单体消息系统而言，因为节点的硬盘上还存储着数据，所以不能直接缩容掉。需要等节点上所有的数据转移到集群中其他在线节点上之后，才能对其执行缩容操作","updated":"2023-07-21T12:58:10.879Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":44827,"end":45199},{"type":"TextQuoteSelector","exact":"Other  messaging  systems  that  use  a  monolithic  architecture  cannot  scale  down  the  nodes  due  to  the  fact  that  the  nodes  contain  data  on  their  attached  hard  drives.  Removal  of  the  excess  nodes  can  only  be  done  once  that  data  has  been  completely  processed  or  has  been  moved  to  another  node  that  will  remain  in  the  cluster","prefix":"a  public  cloud  environment.  ","suffix":".  Neither of these can be perfo"}]}]}
>```
>%%
>*%%PREFIX%%a  public  cloud  environment.%%HIGHLIGHT%% ==Other  messaging  systems  that  use  a  monolithic  architecture  cannot  scale  down  the  nodes  due  to  the  fact  that  the  nodes  contain  data  on  their  attached  hard  drives.  Removal  of  the  excess  nodes  can  only  be  done  once  that  data  has  been  completely  processed  or  has  been  moved  to  another  node  that  will  remain  in  the  cluster== %%POSTFIX%%.  Neither of these can be perfo*
>%%LINK%%[[#^if8618unko|show annotation]]
>%%COMMENT%%
>对于其他的单体消息系统而言，因为节点的硬盘上还存储着数据，所以不能直接缩容掉。需要等节点上所有的数据转移到集群中其他在线节点上之后，才能对其执行缩容操作
>%%TAGS%%
>
^if8618unko


>%%
>```annotation-json
>{"created":"2023-07-21T13:02:14.239Z","text":"kafa节点只能为存储在其磁盘上的数据对外提供服务","updated":"2023-07-21T13:02:14.239Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":45338,"end":45421},{"type":"TextQuoteSelector","exact":"the  broker  can  only  serve  requests for data that is stored on an attached disk","prefix":"ture  such  as  Apache  Kafka,  ","suffix":". This limits the usefulness of "}]}]}
>```
>%%
>*%%PREFIX%%ture  such  as  Apache  Kafka,%%HIGHLIGHT%% ==the  broker  can  only  serve  requests for data that is stored on an attached disk== %%POSTFIX%%. This limits the usefulness of*
>%%LINK%%[[#^qegc8lmu8ko|show annotation]]
>%%COMMENT%%
>kafa节点只能为存储在其磁盘上的数据对外提供服务
>%%TAGS%%
>
^qegc8lmu8ko


>%%
>```annotation-json
>{"created":"2023-07-21T13:06:52.641Z","text":"这限制了自动扩容在应对流量尖刺时的作用，因为新添加到kafka集群的节点还没有任何数据，也就不能去处理任何读取数据请求","updated":"2023-07-21T13:06:52.641Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":45424,"end":45704},{"type":"TextQuoteSelector","exact":"his limits the usefulness of auto-scaling the cluster in response to traffic spikes because the newly added nodes to the Kafka cluster will not have any data to serve, and therefore will not be able to handle any of incoming requests  to  read  existing  data  from  the  topics. ","prefix":"is stored on an attached disk. T","suffix":" The  newly  added  nodes  will "}]}]}
>```
>%%
>*%%PREFIX%%is stored on an attached disk. T%%HIGHLIGHT%% ==his limits the usefulness of auto-scaling the cluster in response to traffic spikes because the newly added nodes to the Kafka cluster will not have any data to serve, and therefore will not be able to handle any of incoming requests  to  read  existing  data  from  the  topics.== %%POSTFIX%%The  newly  added  nodes  will*
>%%LINK%%[[#^x8ix3kypjr7|show annotation]]
>%%COMMENT%%
>这限制了自动扩容在应对流量尖刺时的作用，因为新添加到kafka集群的节点还没有任何数据，也就不能去处理任何读取数据请求
>%%TAGS%%
>
^x8ix3kypjr7


>%%
>```annotation-json
>{"created":"2023-07-21T13:09:27.697Z","text":"单体架构中，水平扩容添加节点时会同时增加存储和计算能力，这样一来，假设你仅仅是cpu使用率过高需要增加计算能力，你也不得不增加存储容量，虽然你并不需要","updated":"2023-07-21T13:09:27.697Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":45788,"end":46212},{"type":"TextQuoteSelector","exact":"in a monolithic architecture such as Apache Kafka, horizonal scaling is achieved by adding  new  nodes  that  have  both  storage  and  serving  capacity  regardless  of  which  metric  you  are  tracking  and  responding  to.  Therefore,  when  you  scale  up  your  serving  capacity  in  response  to  high  CPU  you  are  also  scaling  up  your  storage  capacity  whether  you  actually  need additional storage or not","prefix":" handle write requests. Lastly, ","suffix":". AUTO-RECOVERY Before you move "}]}]}
>```
>%%
>*%%PREFIX%%handle write requests. Lastly,%%HIGHLIGHT%% ==in a monolithic architecture such as Apache Kafka, horizonal scaling is achieved by adding  new  nodes  that  have  both  storage  and  serving  capacity  regardless  of  which  metric  you  are  tracking  and  responding  to.  Therefore,  when  you  scale  up  your  serving  capacity  in  response  to  high  CPU  you  are  also  scaling  up  your  storage  capacity  whether  you  actually  need additional storage or not== %%POSTFIX%%. AUTO-RECOVERY Before you move*
>%%LINK%%[[#^sbpoq4ldii|show annotation]]
>%%COMMENT%%
>单体架构中，水平扩容添加节点时会同时增加存储和计算能力，这样一来，假设你仅仅是cpu使用率过高需要增加计算能力，你也不得不增加存储容量，虽然你并不需要
>%%TAGS%%
>
^sbpoq4ldii


>%%
>```annotation-json
>{"created":"2023-07-21T13:11:48.229Z","text":"自动恢复","updated":"2023-07-21T13:11:48.229Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":46214,"end":46227},{"type":"TextQuoteSelector","exact":"AUTO-RECOVERY","prefix":"need additional storage or not. ","suffix":" Before you move your messaging "}]}]}
>```
>%%
>*%%PREFIX%%need additional storage or not.%%HIGHLIGHT%% ==AUTO-RECOVERY== %%POSTFIX%%Before you move your messaging*
>%%LINK%%[[#^v5yn4v819ga|show annotation]]
>%%COMMENT%%
>自动恢复
>%%TAGS%%
>
^v5yn4v819ga


>%%
>```annotation-json
>{"created":"2023-07-21T13:13:23.690Z","text":"broker节点是无状态的，可以直接使用新的实例进行替换，无需中断服务或进行数据迁移","updated":"2023-07-21T13:13:23.690Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":46482,"end":46695},{"type":"TextQuoteSelector","exact":"Since the broker nodes are stateless,  they can be replaced by spinning up a new instance of the service  to replace the one that failed without a disruption of service or any other data replacement considerations","prefix":"ocess is very straight-forward. ","suffix":". At  the  storage  layer,  mult"}]}]}
>```
>%%
>*%%PREFIX%%ocess is very straight-forward.%%HIGHLIGHT%% ==Since the broker nodes are stateless,  they can be replaced by spinning up a new instance of the service  to replace the one that failed without a disruption of service or any other data replacement considerations== %%POSTFIX%%. At  the  storage  layer,  mult*
>%%LINK%%[[#^71yrgdlmu53|show annotation]]
>%%COMMENT%%
>broker节点是无状态的，可以直接使用新的实例进行替换，无需中断服务或进行数据迁移
>%%TAGS%%
>
^71yrgdlmu53


>%%
>```annotation-json
>{"created":"2023-07-21T13:15:00.305Z","text":"对于存储层而言，数据采用多副本跨节点存储，因此当出现故障时可以直接使用新节点进行替换","updated":"2023-07-21T13:15:00.305Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":46697,"end":46884},{"type":"TextQuoteSelector","exact":"At  the  storage  layer,  multiple  replicas  of  the  data  are  distributed  across  multiple  nodes,  which  can  be  easily  replaced  with  new  nodes  in  the  event  of  a  failure","prefix":"ata replacement considerations. ","suffix":".  In  either  scenario,  Pulsar"}]}]}
>```
>%%
>*%%PREFIX%%ata replacement considerations.%%HIGHLIGHT%% ==At  the  storage  layer,  multiple  replicas  of  the  data  are  distributed  across  multiple  nodes,  which  can  be  easily  replaced  with  new  nodes  in  the  event  of  a  failure== %%POSTFIX%%.  In  either  scenario,  Pulsar*
>%%LINK%%[[#^eru12txfr6o|show annotation]]
>%%COMMENT%%
>对于存储层而言，数据采用多副本跨节点存储，因此当出现故障时可以直接使用新节点进行替换
>%%TAGS%%
>
^eru12txfr6o


>%%
>```annotation-json
>{"created":"2023-07-21T13:16:46.083Z","text":"得益于云服务提供的自动扩缩容机制，在这两种场景下pulsar都可以确保最小数量的节点在运行","updated":"2023-07-21T13:16:46.083Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":46886,"end":47041},{"type":"TextQuoteSelector","exact":" In  either  scenario,  Pulsar can rely on cloud-provider mechanisms such as auto-scaling groups to ensure that a minimum number of nodes are always runnin","prefix":"in  the  event  of  a  failure. ","suffix":"g.  Monolithic  architectures  s"}]}]}
>```
>%%
>*%%PREFIX%%in  the  event  of  a  failure.%%HIGHLIGHT%% ==In  either  scenario,  Pulsar can rely on cloud-provider mechanisms such as auto-scaling groups to ensure that a minimum number of nodes are always runnin== %%POSTFIX%%g.  Monolithic  architectures  s*
>%%LINK%%[[#^8lmqwbhu0o|show annotation]]
>%%COMMENT%%
>得益于云服务提供的自动扩缩容机制，在这两种场景下pulsar都可以确保最小数量的节点在运行
>%%TAGS%%
>
^8lmqwbhu0o


>%%
>```annotation-json
>{"created":"2023-07-21T13:19:41.414Z","text":"消息消费","updated":"2023-07-21T13:19:41.414Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":47334,"end":47354},{"type":"TextQuoteSelector","exact":" Message Consumption","prefix":"o comment go to  liveBook 1.4.2 ","suffix":" Reading messages from a distrib"}]}]}
>```
>%%
>*%%PREFIX%%o comment go to  liveBook 1.4.2%%HIGHLIGHT%% ==Message Consumption== %%POSTFIX%%Reading messages from a distrib*
>%%LINK%%[[#^7ln5uplv3k|show annotation]]
>%%COMMENT%%
>消息消费
>%%TAGS%%
>
^7ln5uplv3k


>%%
>```annotation-json
>{"created":"2023-07-21T13:23:13.751Z","text":"kafka所有的消费者都需要关联到消费组，也被称为topic的逻辑订阅组","updated":"2023-07-21T13:23:13.751Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":47851,"end":47983},{"type":"TextQuoteSelector","exact":"Within Kafka, all consumers belong to what is referred to as a consumer group, which forms a single \"logical subscriber\" for a topic","prefix":"s. MESSAGE CONSUMPTION IN KAFKA ","suffix":". Each group is composed of many"}]}]}
>```
>%%
>*%%PREFIX%%s. MESSAGE CONSUMPTION IN KAFKA%%HIGHLIGHT%% ==Within Kafka, all consumers belong to what is referred to as a consumer group, which forms a single "logical subscriber" for a topic== %%POSTFIX%%. Each group is composed of many*
>%%LINK%%[[#^l8y73bpscaj|show annotation]]
>%%COMMENT%%
>kafka所有的消费者都需要关联到消费组，也被称为topic的逻辑订阅组
>%%TAGS%%
>
^l8y73bpscaj


>%%
>```annotation-json
>{"created":"2023-07-21T13:25:05.214Z","text":"每一个消费组都有很多个消费实例，用于提供可扩展性和失败容忍性。如果一个实例挂了，其他的实例会取代它","updated":"2023-07-21T13:25:05.214Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":47985,"end":48146},{"type":"TextQuoteSelector","exact":"Each group is composed of many consumer instances for  scalability  and  fault  tolerance,  if  one  instance  fails  the  remaining  consumers  will  take  over","prefix":"ogical subscriber\" for a topic. ","suffix":". By default, a new consumer gro"}]}]}
>```
>%%
>*%%PREFIX%%ogical subscriber" for a topic.%%HIGHLIGHT%% ==Each group is composed of many consumer instances for  scalability  and  fault  tolerance,  if  one  instance  fails  the  remaining  consumers  will  take  over== %%POSTFIX%%. By default, a new consumer gro*
>%%LINK%%[[#^iti1ajg061r|show annotation]]
>%%COMMENT%%
>每一个消费组都有很多个消费实例，用于提供可扩展性和失败容忍性。如果一个实例挂了，其他的实例会取代它
>%%TAGS%%
>
^iti1ajg061r


>%%
>```annotation-json
>{"created":"2023-07-21T13:29:39.344Z","text":"kafka官方文档对于消费策略的描述","updated":"2023-07-21T13:29:39.344Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":48393,"end":48610},{"type":"TextQuoteSelector","exact":"The way consumption is implemented in Kafka is by dividing up the partitions in the log over the consumer instances so that each instance is the exclusive consumer of a \"fair share\" of partitions at any point in time.","prefix":"ng to the Kafka documentation, “","suffix":"” In layman’s terms this means t"}]}]}
>```
>%%
>*%%PREFIX%%ng to the Kafka documentation, “%%HIGHLIGHT%% ==The way consumption is implemented in Kafka is by dividing up the partitions in the log over the consumer instances so that each instance is the exclusive consumer of a "fair share" of partitions at any point in time.== %%POSTFIX%%” In layman’s terms this means t*
>%%LINK%%[[#^h2rjf20ck8d|show annotation]]
>%%COMMENT%%
>kafka官方文档对于消费策略的描述
>%%TAGS%%
>
^h2rjf20ck8d


>%%
>```annotation-json
>{"created":"2023-07-21T13:32:24.569Z","text":"kafka topic的每一个分区，在同一时间只能对应一个消费者","updated":"2023-07-21T13:32:24.569Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":48646,"end":48712},{"type":"TextQuoteSelector","exact":"each partition within a topic can only have one consumer at a time","prefix":" layman’s terms this means that ","suffix":", and that the  partitions  are "}]}]}
>```
>%%
>*%%PREFIX%%layman’s terms this means that%%HIGHLIGHT%% ==each partition within a topic can only have one consumer at a time== %%POSTFIX%%, and that the  partitions  are*
>%%LINK%%[[#^pppdocmtf2q|show annotation]]
>%%COMMENT%%
>kafka topic的每一个分区，在同一时间只能对应一个消费者
>%%TAGS%%
>
^pppdocmtf2q


>%%
>```annotation-json
>{"created":"2023-07-21T13:33:44.269Z","text":"如果消费组的成员数量小于分区数，那么某些消费者会分配到多个分区。但是如果消费者数量大于分区数，那么某些消费者会分配不到，或者只有出现消费者失败事件时才能分配到","updated":"2023-07-21T13:33:44.269Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":48842,"end":49108},{"type":"TextQuoteSelector","exact":"f  a  consumer  group  has  less  members  than  partitions,  then  some  consumers  will be assigned to  multiple partitions, but if you have more consumers than partitions, the excess consumers will remain idle and only take over in the event of a consumer failure","prefix":" As  shown  in  Figure  1.17,  i","suffix":". One  important  side-effect  o"}]}]}
>```
>%%
>*%%PREFIX%%As  shown  in  Figure  1.17,  i%%HIGHLIGHT%% ==f  a  consumer  group  has  less  members  than  partitions,  then  some  consumers  will be assigned to  multiple partitions, but if you have more consumers than partitions, the excess consumers will remain idle and only take over in the event of a consumer failure== %%POSTFIX%%. One  important  side-effect  o*
>%%LINK%%[[#^dpmqxi2010a|show annotation]]
>%%COMMENT%%
>如果消费组的成员数量小于分区数，那么某些消费者会分配到多个分区。但是如果消费者数量大于分区数，那么某些消费者会分配不到，或者只有出现消费者失败事件时才能分配到
>%%TAGS%%
>
^dpmqxi2010a


>%%
>```annotation-json
>{"created":"2023-07-21T13:36:50.127Z","text":"同一个消费组的消费者独占分区的一个大的副作用是：活动的消费者数量不能超过该topic下分区的数量","updated":"2023-07-21T13:36:50.127Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":49110,"end":49315},{"type":"TextQuoteSelector","exact":"One  important  side-effect  of  creating  “exclusive”  consumers  is  that  within  a  consumer  group,  the  number  of  active  consumers  can  never  exceed  the  number  of  partitions  in  the  topic","prefix":"he event of a consumer failure. ","suffix":". This limitation can be problem"}]}]}
>```
>%%
>*%%PREFIX%%he event of a consumer failure.%%HIGHLIGHT%% ==One  important  side-effect  of  creating  “exclusive”  consumers  is  that  within  a  consumer  group,  the  number  of  active  consumers  can  never  exceed  the  number  of  partitions  in  the  topic== %%POSTFIX%%. This limitation can be problem*
>%%LINK%%[[#^ddv2e4jvrr5|show annotation]]
>%%COMMENT%%
>同一个消费组的消费者独占分区的一个大的副作用是：活动的消费者数量不能超过该topic下分区的数量
>%%TAGS%%
>
^ddv2e4jvrr5


>%%
>```annotation-json
>{"created":"2023-07-21T13:40:24.741Z","text":"这限制了最大并行度为分区的数量。当消费速度跟不上生产速度时，这也限制了数据消费扩容的能力","updated":"2023-07-21T13:40:24.741Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":49475,"end":49700},{"type":"TextQuoteSelector","exact":"This  effectively  limits  the  amount of parallelism to the number of partitions, which in turn limits the ability to scale up data  consumption  in  the  event  that  your  consumers  cannot  keep  up  the  topic  producers","prefix":"umers  to  a  consumer  group.  ","suffix":".  Unfortunately, the only remed"}]}]}
>```
>%%
>*%%PREFIX%%umers  to  a  consumer  group.%%HIGHLIGHT%% ==This  effectively  limits  the  amount of parallelism to the number of partitions, which in turn limits the ability to scale up data  consumption  in  the  event  that  your  consumers  cannot  keep  up  the  topic  producers== %%POSTFIX%%.  Unfortunately, the only remed*
>%%LINK%%[[#^0l0r5yuw32h|show annotation]]
>%%COMMENT%%
>这限制了最大并行度为分区的数量。当消费速度跟不上生产速度时，这也限制了数据消费扩容的能力
>%%TAGS%%
>
^0l0r5yuw32h


>%%
>```annotation-json
>{"created":"2023-07-21T13:44:32.759Z","text":"kafka仅提供分区内的有序性，而不管分区间的顺序","updated":"2023-07-21T13:44:32.759Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":50298,"end":50408},{"type":"TextQuoteSelector","exact":"Kafka only provides a total order over records within a partition, not between different partitions in a topic","prefix":"intained by the consumer group. ","suffix":".  As I mentioned earlier, consu"}]}]}
>```
>%%
>*%%PREFIX%%intained by the consumer group.%%HIGHLIGHT%% ==Kafka only provides a total order over records within a partition, not between different partitions in a topic== %%POSTFIX%%.  As I mentioned earlier, consu*
>%%LINK%%[[#^tooiv14yq4p|show annotation]]
>%%COMMENT%%
>kafka仅提供分区内的有序性，而不管分区间的顺序
>%%TAGS%%
>
^tooiv14yq4p


>%%
>```annotation-json
>{"created":"2023-07-21T13:47:10.616Z","text":"消费组以集群的行程提供可扩展性和失败容忍性，这意味着它能动态地新增或移除消费组。当一个新的消费者添加到消费组时，它会获取到一个原属于另一个消费者的分区，然后开始消费。反之，移除消费者时则会将分区交给另一个消费者。这种分区所属权洗牌的过程叫做rebalancing，它可能会产生预期之外的结果，例如rebalancing时未保存offset导致的潜在的数据丢失","updated":"2023-07-21T13:47:10.616Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":50411,"end":51209},{"type":"TextQuoteSelector","exact":"As I mentioned earlier, consumer groups act as a cluster to provide scalability and fault-tolerance. This means they dynamically adapt to the addition or loss of consumers within the group.  When  a  new  consumer  is  added  to  the  group,  it  starts  consuming  messages  from  partitions  previously  consumed  by  another  consumer.  The  same  thing  happens  when  a  consumer shuts down or crashes; it leaves the group, and the partitions it used to consume will  be  consumed  by  one  of  the  remaining  consumers.  This  shuffling  of  partition  ownership  with  a  consumer  group  is  referred  to  as  rebalancing  which  can  have  some  undesirable  consequences  including  the  potential  for  data  loss,  if  consumer  offsets  aren’t  saved  before  the rebalancing occurred","prefix":"fferent partitions in a topic.  ","suffix":". It  is  very  common  to  have"}]}]}
>```
>%%
>*%%PREFIX%%fferent partitions in a topic.%%HIGHLIGHT%% ==As I mentioned earlier, consumer groups act as a cluster to provide scalability and fault-tolerance. This means they dynamically adapt to the addition or loss of consumers within the group.  When  a  new  consumer  is  added  to  the  group,  it  starts  consuming  messages  from  partitions  previously  consumed  by  another  consumer.  The  same  thing  happens  when  a  consumer shuts down or crashes; it leaves the group, and the partitions it used to consume will  be  consumed  by  one  of  the  remaining  consumers.  This  shuffling  of  partition  ownership  with  a  consumer  group  is  referred  to  as  rebalancing  which  can  have  some  undesirable  consequences  including  the  potential  for  data  loss,  if  consumer  offsets  aren’t  saved  before  the rebalancing occurred== %%POSTFIX%%. It  is  very  common  to  have*
>%%LINK%%[[#^lygkpeso7ct|show annotation]]
>%%COMMENT%%
>消费组以集群的行程提供可扩展性和失败容忍性，这意味着它能动态地新增或移除消费组。当一个新的消费者添加到消费组时，它会获取到一个原属于另一个消费者的分区，然后开始消费。反之，移除消费者时则会将分区交给另一个消费者。这种分区所属权洗牌的过程叫做rebalancing，它可能会产生预期之外的结果，例如rebalancing时未保存offset导致的潜在的数据丢失
>%%TAGS%%
>
^lygkpeso7ct


>%%
>```annotation-json
>{"created":"2023-07-21T13:58:49.482Z","text":"多应用不同消费需求场景，每个应用使用一个消费组：1.并行消费，多分区保证消费的并行度 2.顺序消费，单分区确保有序性 3.特殊字段分区，每个分区数据易于统计\n解决方案：kafka单个分区无法支持，需要创建多个topic，数据存储多份","updated":"2023-07-21T13:58:49.482Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":51211,"end":51527},{"type":"TextQuoteSelector","exact":"It  is  very  common  to  have  multiple  applications  that  need  to  read  data  from  the  same  topic, in fact this is one of the primary features of a messaging system. Consequently, topics are  shared  resources  among  multiple  consuming  applications  that  may  have  very  different  consumption  needs. ","prefix":"fore  the rebalancing occurred. ","suffix":" Consider  a  financial  service"}]}]}
>```
>%%
>*%%PREFIX%%fore  the rebalancing occurred.%%HIGHLIGHT%% ==It  is  very  common  to  have  multiple  applications  that  need  to  read  data  from  the  same  topic, in fact this is one of the primary features of a messaging system. Consequently, topics are  shared  resources  among  multiple  consuming  applications  that  may  have  very  different  consumption  needs.== %%POSTFIX%%Consider  a  financial  service*
>%%LINK%%[[#^y4ntgsvqpxd|show annotation]]
>%%COMMENT%%
>多应用不同消费需求场景，每个应用使用一个消费组：1.并行消费，多分区保证消费的并行度 2.顺序消费，单分区确保有序性 3.特殊字段分区，每个分区数据易于统计
>解决方案：kafka单个分区无法支持，需要创建多个topic，数据存储多份
>%%TAGS%%
>
^y4ntgsvqpxd


>%%
>```annotation-json
>{"created":"2023-07-21T14:01:57.489Z","text":"数据持久性","updated":"2023-07-21T14:01:57.489Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":53318,"end":53333},{"type":"TextQuoteSelector","exact":"Data Durability","prefix":"s  for the application.  1.4.3  ","suffix":" Within the context of messaging"}]}]}
>```
>%%
>*%%PREFIX%%s  for the application.  1.4.3%%HIGHLIGHT%% ==Data Durability== %%POSTFIX%%Within the context of messaging*
>%%LINK%%[[#^0q8y5t9jbc6|show annotation]]
>%%COMMENT%%
>数据持久性
>%%TAGS%%
>
^0q8y5t9jbc6


>%%
>```annotation-json
>{"created":"2023-07-21T16:36:07.798Z","text":"根据配置的数据冗余级别，需要为每一个分区维护多个副本","updated":"2023-07-21T16:36:07.798Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":54324,"end":54440},{"type":"TextQuoteSelector","exact":"multiple replicas of each partition are maintained within cluster to provide a configurable level of data redundancy","prefix":"rder to ensure data durability, ","suffix":". ©Manning Publications Co.  To "}]}]}
>```
>%%
>*%%PREFIX%%rder to ensure data durability,%%HIGHLIGHT%% ==multiple replicas of each partition are maintained within cluster to provide a configurable level of data redundancy== %%POSTFIX%%. ©Manning Publications Co.  To*
>%%LINK%%[[#^sxxbfydjhe|show annotation]]
>%%COMMENT%%
>根据配置的数据冗余级别，需要为每一个分区维护多个副本
>%%TAGS%%
>
^sxxbfydjhe


>%%
>```annotation-json
>{"created":"2023-07-21T16:38:08.028Z","text":"通过hash函数计算每个消息应该发送到哪个分区","updated":"2023-07-21T16:38:08.028Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":54591,"end":54705},{"type":"TextQuoteSelector","exact":"a hashing function is applied to message to determine which of topic’s partitions the message should be written to","prefix":"a receives an incoming message, ","suffix":". Once that has been determined,"}]}]}
>```
>%%
>*%%PREFIX%%a receives an incoming message,%%HIGHLIGHT%% ==a hashing function is applied to message to determine which of topic’s partitions the message should be written to== %%POSTFIX%%. Once that has been determined,*
>%%LINK%%[[#^thf72khmjui|show annotation]]
>%%COMMENT%%
>通过hash函数计算每个消息应该发送到哪个分区
>%%TAGS%%
>
^thf72khmjui


>%%
>```annotation-json
>{"created":"2023-07-21T16:39:04.981Z","text":"消息内容会直接写入到leader的page cache中（不是磁盘上）","updated":"2023-07-21T16:39:04.981Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":54739,"end":54852},{"type":"TextQuoteSelector","exact":"the  message  contents  are  written  to  the  page  cache  (not  the  disk)  of  the  partition “leader” replica","prefix":"Once that has been determined,  ","suffix":". Once the message has been ackn"}]}]}
>```
>%%
>*%%PREFIX%%Once that has been determined,%%HIGHLIGHT%% ==the  message  contents  are  written  to  the  page  cache  (not  the  disk)  of  the  partition “leader” replica== %%POSTFIX%%. Once the message has been ackn*
>%%LINK%%[[#^yq878h3ycs|show annotation]]
>%%COMMENT%%
>消息内容会直接写入到leader的page cache中（不是磁盘上）
>%%TAGS%%
>
^yq878h3ycs


>%%
>```annotation-json
>{"created":"2023-07-21T16:41:00.454Z","text":"leader回复完ack后，follower会从leader拉取消息内容","updated":"2023-07-21T16:41:00.454Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":54854,"end":55017},{"type":"TextQuoteSelector","exact":"Once the message has been acknowledged by the leader, each of the “follower” replicas are responsible for retrieving the message contents from the partition leader","prefix":"he  partition “leader” replica. ","suffix":"  as  show  in  Figure  1.18  in"}]}]}
>```
>%%
>*%%PREFIX%%he  partition “leader” replica.%%HIGHLIGHT%% ==Once the message has been acknowledged by the leader, each of the “follower” replicas are responsible for retrieving the message contents from the partition leader== %%POSTFIX%%as  show  in  Figure  1.18  in*
>%%LINK%%[[#^uc2ej8tlfu|show annotation]]
>%%COMMENT%%
>leader回复完ack后，follower会从leader拉取消息内容
>%%TAGS%%
>
^uc2ej8tlfu


>%%
>```annotation-json
>{"created":"2023-07-21T16:45:03.099Z","text":"最终一致性：在分布式系统中，有一个节点拥有数据的最新视图，这些数据会同步给其他节点，最终会达到一个一致的数据视图(view of the data)","updated":"2023-07-21T16:45:03.099Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":55148,"end":55466},{"type":"TextQuoteSelector","exact":"This  overall  approach  is  what  is  referred  to  as  an  eventually  consistent  strategy,  in  which  there  is  one  node  in  a  distributed  system  that  has  the  most  recent  view  of  the  data  which  is  eventually  communicated  to  other  nodes  until  they  all  achieve a consistent view of the data","prefix":"  messages  from  the  leader.  ","suffix":". While this approach has the ad"}]}]}
>```
>%%
>*%%PREFIX%%messages  from  the  leader.%%HIGHLIGHT%% ==This  overall  approach  is  what  is  referred  to  as  an  eventually  consistent  strategy,  in  which  there  is  one  node  in  a  distributed  system  that  has  the  most  recent  view  of  the  data  which  is  eventually  communicated  to  other  nodes  until  they  all  achieve a consistent view of the data== %%POSTFIX%%. While this approach has the ad*
>%%LINK%%[[#^vmeqos4m6da|show annotation]]
>%%COMMENT%%
>最终一致性：在分布式系统中，有一个节点拥有数据的最新视图，这些数据会同步给其他节点，最终会达到一个一致的数据视图(view of the data)
>%%TAGS%%
>
^vmeqos4m6da


>%%
>```annotation-json
>{"created":"2023-07-21T16:54:35.845Z","text":"仍然有两个场景会导致数据丢失：1.leader节点断电或者被其他进程结束，所以已写入到page cache并且未持久化到磁盘的数据会丢失 2.leader故障，一个follower被选举为新的leader，故障前还未复制到该follower的数据会丢失","updated":"2023-07-21T16:54:35.845Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":55578,"end":56173},{"type":"TextQuoteSelector","exact":"it also introduces two opportunities for data loss; first, in the event of a power outage or other process termination event  on  the  leader  node  any  data  that  was  written  to  the  page  cache  that  had  not  been  persisted to local disk will be lost. The second opportunity for data loss is when the current leader process fails and another one of the remaining followers is selected as the new leader. In  the  leader  fail-over  scenario,  any  messages  that  were  acknowledged  by  the  previous  leader but not yet replicated to newly elected leader replica will be lost as well","prefix":"d to store an incoming message, ","suffix":". Kafka does provide the ability"}]}]}
>```
>%%
>*%%PREFIX%%d to store an incoming message,%%HIGHLIGHT%% ==it also introduces two opportunities for data loss; first, in the event of a power outage or other process termination event  on  the  leader  node  any  data  that  was  written  to  the  page  cache  that  had  not  been  persisted to local disk will be lost. The second opportunity for data loss is when the current leader process fails and another one of the remaining followers is selected as the new leader. In  the  leader  fail-over  scenario,  any  messages  that  were  acknowledged  by  the  previous  leader but not yet replicated to newly elected leader replica will be lost as well== %%POSTFIX%%. Kafka does provide the ability*
>%%LINK%%[[#^frrfudd031d|show annotation]]
>%%COMMENT%%
>仍然有两个场景会导致数据丢失：1.leader节点断电或者被其他进程结束，所以已写入到page cache并且未持久化到磁盘的数据会丢失 2.leader故障，一个follower被选举为新的leader，故障前还未复制到该follower的数据会丢失
>%%TAGS%%
>
^frrfudd031d


>%%
>```annotation-json
>{"created":"2023-07-21T17:01:06.338Z","text":"kafka提供了配置ack策略的能力，甚至选择等所有副本都收到消息后再回复ack","updated":"2023-07-21T17:01:06.338Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":56175,"end":56384},{"type":"TextQuoteSelector","exact":"Kafka does provide the ability to configure this default behavior where only the leader has a copy before acknowledgement is sent, to withhold an acknowledgement until ALL replicas have  received  the  message","prefix":"r replica will be lost as well. ","suffix":".  However,  this  does  not  im"}]}]}
>```
>%%
>*%%PREFIX%%r replica will be lost as well.%%HIGHLIGHT%% ==Kafka does provide the ability to configure this default behavior where only the leader has a copy before acknowledgement is sent, to withhold an acknowledgement until ALL replicas have  received  the  message== %%POSTFIX%%.  However,  this  does  not  im*
>%%LINK%%[[#^hd56o8935pr|show annotation]]
>%%COMMENT%%
>kafka提供了配置ack策略的能力，甚至选择等所有副本都收到消息后再回复ack
>%%TAGS%%
>
^hd56o8935pr


>%%
>```annotation-json
>{"created":"2023-07-21T17:03:26.101Z","text":"这种策略会增加性能损耗，然而大多数kafka性能测试会避开这点，因此建议你自己根据实际配置进行性能测试","updated":"2023-07-21T17:03:26.101Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":56636,"end":56844},{"type":"TextQuoteSelector","exact":"this behavior will incur a performance penalty which is  often  hidden  in  most  published  Kafka  performance  benchmarks  so  you  are  advised  to  do  your own performance testing with this configuration","prefix":" back to the leader. Obviously, ","suffix":" in order to get a better unders"}]}]}
>```
>%%
>*%%PREFIX%%back to the leader. Obviously,%%HIGHLIGHT%% ==this behavior will incur a performance penalty which is  often  hidden  in  most  published  Kafka  performance  benchmarks  so  you  are  advised  to  do  your own performance testing with this configuration== %%POSTFIX%%in order to get a better unders*
>%%LINK%%[[#^6w0c6k0fzpy|show annotation]]
>%%COMMENT%%
>这种策略会增加性能损耗，然而大多数kafka性能测试会避开这点，因此建议你自己根据实际配置进行性能测试
>%%TAGS%%
>
^6w0c6k0fzpy


>%%
>```annotation-json
>{"created":"2023-07-21T17:05:39.335Z","text":"这种复制策略的另一个副作用是：只有leader可以提供生产、消费服务，因为只有它拥有最新的数据","updated":"2023-07-21T17:05:39.335Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":56926,"end":57133},{"type":"TextQuoteSelector","exact":"The other side-effect of this replication strategy is that only the leader replica can serve both producers and consumers as it is the only one guaranteed to have the most recent and correct copy of the data","prefix":"e expected performance will be. ","suffix":". All  of the follower replicas "}]}]}
>```
>%%
>*%%PREFIX%%e expected performance will be.%%HIGHLIGHT%% ==The other side-effect of this replication strategy is that only the leader replica can serve both producers and consumers as it is the only one guaranteed to have the most recent and correct copy of the data== %%POSTFIX%%. All  of the follower replicas*
>%%LINK%%[[#^usdlj3y0o9g|show annotation]]
>%%COMMENT%%
>这种复制策略的另一个副作用是：只有leader可以提供生产、消费服务，因为只有它拥有最新的数据
>%%TAGS%%
>
^usdlj3y0o9g


>%%
>```annotation-json
>{"created":"2023-07-21T17:07:22.687Z","text":"pulsar的数据持久性","updated":"2023-07-21T17:07:22.687Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":57260,"end":57285},{"type":"TextQuoteSelector","exact":"DATA DURABILITY IN PULSAR","prefix":"e leader during traffic spikes. ","suffix":" When Pulsar receives an incomin"}]}]}
>```
>%%
>*%%PREFIX%%e leader during traffic spikes.%%HIGHLIGHT%% ==DATA DURABILITY IN PULSAR== %%POSTFIX%%When Pulsar receives an incomin*
>%%LINK%%[[#^40pizmpgxmc|show annotation]]
>%%COMMENT%%
>pulsar的数据持久性
>%%TAGS%%
>
^40pizmpgxmc


>%%
>```annotation-json
>{"created":"2023-07-21T17:08:23.839Z","text":"pulsar收到一条消息时，它会在内存中保存一个副本，并且会写一个WAL，在给生产者回复ack之前会强制写到磁盘上","updated":"2023-07-21T17:08:23.839Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":57286,"end":57509},{"type":"TextQuoteSelector","exact":"When Pulsar receives an incoming message, it saves a copy in memory and also writes the data  to  a  write-ahead-log  (WAL),  which  is  forced  onto  disk  before  an  acknowledgement  is  sent back to the message publishe","prefix":"ikes. DATA DURABILITY IN PULSAR ","suffix":"r as shown in Figure 1.19. This "}]}]}
>```
>%%
>*%%PREFIX%%ikes. DATA DURABILITY IN PULSAR%%HIGHLIGHT%% ==When Pulsar receives an incoming message, it saves a copy in memory and also writes the data  to  a  write-ahead-log  (WAL),  which  is  forced  onto  disk  before  an  acknowledgement  is  sent back to the message publishe== %%POSTFIX%%r as shown in Figure 1.19. This*
>%%LINK%%[[#^r1gfqsc86s|show annotation]]
>%%COMMENT%%
>pulsar收到一条消息时，它会在内存中保存一个副本，并且会写一个WAL，在给生产者回复ack之前会强制写到磁盘上
>%%TAGS%%
>
^r1gfqsc86s


>%%
>```annotation-json
>{"created":"2023-07-21T17:10:33.084Z","text":"这种方式参考了传统关系数据库的ACID语义，可以保证即使机器故障数据也不会丢失","updated":"2023-07-21T17:10:33.084Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":57537,"end":57718},{"type":"TextQuoteSelector","exact":"his approach is modelled after traditional database ACID transaction semantics, which ensures that the data is not lost even if the machine fails and comes back online in the future","prefix":"isher as shown in Figure 1.19. T","suffix":".  The  number  of  replicas  re"}]}]}
>```
>%%
>*%%PREFIX%%isher as shown in Figure 1.19. T%%HIGHLIGHT%% ==his approach is modelled after traditional database ACID transaction semantics, which ensures that the data is not lost even if the machine fails and comes back online in the future== %%POSTFIX%%.  The  number  of  replicas  re*
>%%LINK%%[[#^5ylwqxx1fk2|show annotation]]
>%%COMMENT%%
>这种方式参考了传统关系数据库的ACID语义，可以保证即使机器故障数据也不会丢失
>%%TAGS%%
>
^5ylwqxx1fk2


>%%
>```annotation-json
>{"created":"2023-07-21T17:13:02.559Z","text":"每个topic需要的副本数量是可配置的，pulsar会确保quorum数量的节点收到数据并且通知到leader，然后再给生产者发送ack","updated":"2023-07-21T17:13:02.559Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":57721,"end":58024},{"type":"TextQuoteSelector","exact":"The  number  of  replicas  required  for  a  topic  can  be  configured  in  Pulsar,  based  on  your  data  replication  needs,  and  Pulsar  guarantees  that  the  data  that  has  been  received  and  acknowledged  by  a  quorum  of  servers  before  an  acknowledgement  is  sent  to  the  producer.","prefix":"mes back online in the future.  ","suffix":"  This  design  ensures  that  d"}]}]}
>```
>%%
>*%%PREFIX%%mes back online in the future.%%HIGHLIGHT%% ==The  number  of  replicas  required  for  a  topic  can  be  configured  in  Pulsar,  based  on  your  data  replication  needs,  and  Pulsar  guarantees  that  the  data  that  has  been  received  and  acknowledged  by  a  quorum  of  servers  before  an  acknowledgement  is  sent  to  the  producer.== %%POSTFIX%%This  design  ensures  that  d*
>%%LINK%%[[#^9p2qjlfzdrc|show annotation]]
>%%COMMENT%%
>每个topic需要的副本数量是可配置的，pulsar会确保quorum数量的节点收到数据并且通知到leader，然后再给生产者发送ack
>%%TAGS%%
>
^9p2qjlfzdrc


>%%
>```annotation-json
>{"created":"2023-07-22T08:06:02.086Z","text":"不需要专门的同步线程去复制数据，这种机制也保证了多副本间的数据一致性","updated":"2023-07-22T08:06:02.086Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":58623,"end":58856},{"type":"TextQuoteSelector","exact":"this design eliminates the need for a secondary replication process that is responsible for ensuring that the data is kept in sync between replica and eliminates any data inconsistency issues due to any lag in the replication process","prefix":"to the topic. More importantly, ","suffix":". 1.4.4  Message Acknowledgement"}]}]}
>```
>%%
>*%%PREFIX%%to the topic. More importantly,%%HIGHLIGHT%% ==this design eliminates the need for a secondary replication process that is responsible for ensuring that the data is kept in sync between replica and eliminates any data inconsistency issues due to any lag in the replication process== %%POSTFIX%%. 1.4.4  Message Acknowledgement*
>%%LINK%%[[#^1cect2shkjm|show annotation]]
>%%COMMENT%%
>不需要专门的同步线程去复制数据，这种机制也保证了多副本间的数据一致性
>%%TAGS%%
>
^1cect2shkjm


>%%
>```annotation-json
>{"created":"2023-07-22T08:07:52.065Z","text":"消息ack","updated":"2023-07-22T08:07:52.065Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":58865,"end":58888},{"type":"TextQuoteSelector","exact":"Message Acknowledgement","prefix":"the replication process. 1.4.4  ","suffix":" Within a distributed messaging "}]}]}
>```
>%%
>*%%PREFIX%%the replication process. 1.4.4%%HIGHLIGHT%% ==Message Acknowledgement== %%POSTFIX%%Within a distributed messaging*
>%%LINK%%[[#^oc8diynvu7h|show annotation]]
>%%COMMENT%%
>消息ack
>%%TAGS%%
>
^oc8diynvu7h


>%%
>```annotation-json
>{"created":"2023-07-22T08:09:44.398Z","text":"在分布式消息系统中，失败总是难免的，包括消费者消费消息、broker提供消息都可能失败","updated":"2023-07-22T08:09:44.398Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":58889,"end":59113},{"type":"TextQuoteSelector","exact":"Within a distributed messaging system, failures are to be expected. In a distributed message system  such  as  Pulsar,  both  the  consumers  consuming  the  messages  and  the  message  brokers serving the messages can fail","prefix":" 1.4.4  Message Acknowledgement ","suffix":". When such a failure occurs, it"}]}]}
>```
>%%
>*%%PREFIX%%1.4.4  Message Acknowledgement%%HIGHLIGHT%% ==Within a distributed messaging system, failures are to be expected. In a distributed message system  such  as  Pulsar,  both  the  consumers  consuming  the  messages  and  the  message  brokers serving the messages can fail== %%POSTFIX%%. When such a failure occurs, it*
>%%LINK%%[[#^m1ukf7nemv|show annotation]]
>%%COMMENT%%
>在分布式消息系统中，失败总是难免的，包括消费者消费消息、broker提供消息都可能失败
>%%TAGS%%
>
^m1ukf7nemv


>%%
>```annotation-json
>{"created":"2023-07-22T08:12:54.730Z","text":"当出现上述情况后，一旦系统恢复，最终要的是消费者要从上次的消费位点开始消费，确保不会跳过或重新消费消息","updated":"2023-07-22T08:12:54.730Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":59115,"end":59339},{"type":"TextQuoteSelector","exact":"When such a failure occurs, it is imperative to resume consumption  from  exactly  the  point  where  the  consumers  have  left  off  once  everything  recovers  to  ensure  that  messages  aren't  skipped  or  reprocessed.","prefix":" serving the messages can fail. ","suffix":"  This  point  from  which  the "}]}]}
>```
>%%
>*%%PREFIX%%serving the messages can fail.%%HIGHLIGHT%% ==When such a failure occurs, it is imperative to resume consumption  from  exactly  the  point  where  the  consumers  have  left  off  once  everything  recovers  to  ensure  that  messages  aren't  skipped  or  reprocessed.== %%POSTFIX%%This  point  from  which  the*
>%%LINK%%[[#^omt19fmllf|show annotation]]
>%%COMMENT%%
>当出现上述情况后，一旦系统恢复，最终要的是消费者要从上次的消费位点开始消费，确保不会跳过或重新消费消息
>%%TAGS%%
>
^omt19fmllf


>%%
>```annotation-json
>{"created":"2023-07-22T08:39:39.194Z","text":"kafka中的恢复点和消费偏移量有关，它由消费者控制","updated":"2023-07-22T08:39:39.194Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":59606,"end":59723},{"type":"TextQuoteSelector","exact":"The resume point is referred to as the consumer offset in Apache Kafka, which is controlled entirely by the consumer.","prefix":"ESSAGE ACKNOWLEDGEMENT IN KAFKA ","suffix":" Typically, a consumer increment"}]}]}
>```
>%%
>*%%PREFIX%%ESSAGE ACKNOWLEDGEMENT IN KAFKA%%HIGHLIGHT%% ==The resume point is referred to as the consumer offset in Apache Kafka, which is controlled entirely by the consumer.== %%POSTFIX%%Typically, a consumer increment*
>%%LINK%%[[#^o0uphuxwcyb|show annotation]]
>%%COMMENT%%
>kafka中的恢复点和消费偏移量有关，它由消费者控制
>%%TAGS%%
>
^o0uphuxwcyb


>%%
>```annotation-json
>{"created":"2023-07-22T08:41:27.010Z","text":"仅仅将偏移量保存在消费组的内存中是比较危险的，因此还会将其保存在一个叫做 __consumer_offsets 的单独topic中","updated":"2023-07-22T08:41:27.010Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":59946,"end":60124},{"type":"TextQuoteSelector","exact":"this  offset  solely  in  the  consumers  memory  is  dangerous.  Therefore,  these  offsets  are  also  stored  as  messages  in  a  separate  topic  named  '__consumer_offsets'","prefix":"Co.  To comment go to  liveBook ","suffix":".  Each  consumer  commits a mes"}]}]}
>```
>%%
>*%%PREFIX%%Co.  To comment go to  liveBook%%HIGHLIGHT%% ==this  offset  solely  in  the  consumers  memory  is  dangerous.  Therefore,  these  offsets  are  also  stored  as  messages  in  a  separate  topic  named  '__consumer_offsets'== %%POSTFIX%%.  Each  consumer  commits a mes*
>%%LINK%%[[#^bas14tmq6m8|show annotation]]
>%%COMMENT%%
>仅仅将偏移量保存在消费组的内存中是比较危险的，因此还会将其保存在一个叫做 __consumer_offsets 的单独topic中
>%%TAGS%%
>
^bas14tmq6m8


>%%
>```annotation-json
>{"created":"2023-07-22T08:43:48.659Z","text":"kafka消费者默认每5s提交一次offset","updated":"2023-07-22T08:43:48.659Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":60127,"end":60301},{"type":"TextQuoteSelector","exact":"Each  consumer  commits a message containing its current position into that topic at periodic intervals, which is every five seconds if you use Kafka's auto commit capability","prefix":"  named  '__consumer_offsets'.  ","suffix":". While this strategy is better "}]}]}
>```
>%%
>*%%PREFIX%%named  '__consumer_offsets'.%%HIGHLIGHT%% ==Each  consumer  commits a message containing its current position into that topic at periodic intervals, which is every five seconds if you use Kafka's auto commit capability== %%POSTFIX%%. While this strategy is better*
>%%LINK%%[[#^gqbiiuz5irt|show annotation]]
>%%COMMENT%%
>kafka消费者默认每5s提交一次offset
>%%TAGS%%
>
^gqbiiuz5irt


>%%
>```annotation-json
>{"created":"2023-07-22T08:47:15.994Z","text":"kafka还提供了一个提交当前消费便宜量的api，开发者可以自己选择提交的时机","updated":"2023-07-22T08:47:15.994Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":60995,"end":61178},{"type":"TextQuoteSelector","exact":"The Kafka consumer API provides a method that enables committing the current offset at a  point  that  makes  sense  to  the  application  developer  rather  than  based  on  a  timer","prefix":"e to completely eliminate them. ","suffix":".  Therefore,  if  you  really  "}]}]}
>```
>%%
>*%%PREFIX%%e to completely eliminate them.%%HIGHLIGHT%% ==The Kafka consumer API provides a method that enables committing the current offset at a  point  that  makes  sense  to  the  application  developer  rather  than  based  on  a  timer== %%POSTFIX%%.  Therefore,  if  you  really*
>%%LINK%%[[#^13p0sdh8a32d|show annotation]]
>%%COMMENT%%
>kafka还提供了一个提交当前消费便宜量的api，开发者可以自己选择提交的时机
>%%TAGS%%
>
^13p0sdh8a32d


>%%
>```annotation-json
>{"created":"2023-07-22T08:48:57.181Z","text":"每次消费后提交的缺点：1.增加了开发者的负担 2.增加了消费延迟（每次处理完消息需要提交ack并且等待确认）","updated":"2023-07-22T08:48:57.181Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":61368,"end":61610},{"type":"TextQuoteSelector","exact":"However,  this  pushes the burden of ensuring accurate recovery offsets onto the application developer and introduces additional latency to the message consumers who now have to commit each offset to a Kafka topic and await an acknowledgement","prefix":"ccessfully  consumed  message.  ","suffix":". MESSAGE ACKNOWLEDGEMENT IN PUL"}]}]}
>```
>%%
>*%%PREFIX%%ccessfully  consumed  message.%%HIGHLIGHT%% ==However,  this  pushes the burden of ensuring accurate recovery offsets onto the application developer and introduces additional latency to the message consumers who now have to commit each offset to a Kafka topic and await an acknowledgement== %%POSTFIX%%. MESSAGE ACKNOWLEDGEMENT IN PUL*
>%%LINK%%[[#^7ky1s8iylbu|show annotation]]
>%%COMMENT%%
>每次消费后提交的缺点：1.增加了开发者的负担 2.增加了消费延迟（每次处理完消息需要提交ack并且等待确认）
>%%TAGS%%
>
^7ky1s8iylbu


>%%
>```annotation-json
>{"created":"2023-07-22T08:51:38.370Z","text":"pulsar通过BookKeeper为每一个订阅者维护了一个ledger，它被称作cursor ledger，用于跟踪消息ack","updated":"2023-07-22T08:51:38.370Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":61646,"end":61827},{"type":"TextQuoteSelector","exact":"Apache  Pulsar  maintains  a  ledger  inside  of  Apache  BookKeeper  for  each  subscriber  that  is  referred  to  as  the  cursor  ledger  for  tracking  message  acknowledgments","prefix":"SSAGE ACKNOWLEDGEMENT IN PULSAR ","suffix":".  When  a  consumer  has read a"}]}]}
>```
>%%
>*%%PREFIX%%SSAGE ACKNOWLEDGEMENT IN PULSAR%%HIGHLIGHT%% ==Apache  Pulsar  maintains  a  ledger  inside  of  Apache  BookKeeper  for  each  subscriber  that  is  referred  to  as  the  cursor  ledger  for  tracking  message  acknowledgments== %%POSTFIX%%.  When  a  consumer  has read a*
>%%LINK%%[[#^274ccghc5c3|show annotation]]
>%%COMMENT%%
>pulsar通过BookKeeper为每一个订阅者维护了一个ledger，它被称作cursor ledger，用于跟踪消息ack
>%%TAGS%%
>
^274ccghc5c3


>%%
>```annotation-json
>{"created":"2023-07-22T13:07:18.733Z","text":"消费者处理完一条消息后会给broker发送ack","updated":"2023-07-22T13:07:18.733Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":61830,"end":61931},{"type":"TextQuoteSelector","exact":"When  a  consumer  has read and processed a message, it sends an acknowledgement to the Pulsar Broker","prefix":"ing  message  acknowledgments.  ","suffix":". Upon receipt of this acknowled"}]}]}
>```
>%%
>*%%PREFIX%%ing  message  acknowledgments.%%HIGHLIGHT%% ==When  a  consumer  has read and processed a message, it sends an acknowledgement to the Pulsar Broker== %%POSTFIX%%. Upon receipt of this acknowled*
>%%LINK%%[[#^oq3vancs0xs|show annotation]]
>%%COMMENT%%
>消费者处理完一条消息后会给broker发送ack
>%%TAGS%%
>
^oq3vancs0xs


>%%
>```annotation-json
>{"created":"2023-07-22T13:09:01.057Z","text":"在收到ack后broker会立即更新cursor ledger","updated":"2023-07-22T13:09:01.057Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":61933,"end":62053},{"type":"TextQuoteSelector","exact":"Upon receipt of this acknowledgement, the Broker immediately updates the cursor ledger for that consumer’s  subscription","prefix":"ledgement to the Pulsar Broker. ","suffix":".  Since  this  information  is "}]}]}
>```
>%%
>*%%PREFIX%%ledgement to the Pulsar Broker.%%HIGHLIGHT%% ==Upon receipt of this acknowledgement, the Broker immediately updates the cursor ledger for that consumer’s  subscription== %%POSTFIX%%.  Since  this  information  is*
>%%LINK%%[[#^495j61qhe1y|show annotation]]
>%%COMMENT%%
>在收到ack后broker会立即更新cursor ledger
>%%TAGS%%
>
^495j61qhe1y


>%%
>```annotation-json
>{"created":"2023-07-22T13:12:07.737Z","text":"这些信息已经在多个bookie节点上落盘","updated":"2023-07-22T13:12:07.737Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":62056,"end":62238},{"type":"TextQuoteSelector","exact":"Since  this  information  is  stored  on  a  ledger  in  BookKeeper,  we  know  that  it  has  been  fsync-ed  to  disk  and  multiple  copies  exist  across  multiple  bookie  nodes","prefix":"that consumer’s  subscription.  ","suffix":".  Keeping  this  information  o"}]}]}
>```
>%%
>*%%PREFIX%%that consumer’s  subscription.%%HIGHLIGHT%% ==Since  this  information  is  stored  on  a  ledger  in  BookKeeper,  we  know  that  it  has  been  fsync-ed  to  disk  and  multiple  copies  exist  across  multiple  bookie  nodes== %%POSTFIX%%.  Keeping  this  information  o*
>%%LINK%%[[#^jxhg6smpk6g|show annotation]]
>%%COMMENT%%
>这些信息已经在多个bookie节点上落盘
>%%TAGS%%
>
^jxhg6smpk6g


>%%
>```annotation-json
>{"created":"2023-07-22T13:13:05.405Z","text":"pulsar支持两种ack方式，选择性ack或累积式ack","updated":"2023-07-22T13:13:05.405Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":62406,"end":62506},{"type":"TextQuoteSelector","exact":"In Apache Pulsar, there are two ways that messages can be acknowledged, selectively or cumulatively.","prefix":"start at a later point in time. ","suffix":"  With  cumulative  acknowledgme"}]}]}
>```
>%%
>*%%PREFIX%%start at a later point in time.%%HIGHLIGHT%% ==In Apache Pulsar, there are two ways that messages can be acknowledged, selectively or cumulatively.== %%POSTFIX%%With  cumulative  acknowledgme*
>%%LINK%%[[#^0bltjqvqnbwj|show annotation]]
>%%COMMENT%%
>pulsar支持两种ack方式，选择性ack或累积式ack
>%%TAGS%%
>
^0bltjqvqnbwj


>%%
>```annotation-json
>{"created":"2023-07-22T13:15:11.348Z","text":"累积式ack只需要对最新的消息回复ack即可","updated":"2023-07-22T13:15:11.348Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":62508,"end":62616},{"type":"TextQuoteSelector","exact":"With  cumulative  acknowledgment,  the  consumer  only  needs  to  acknowledge  the last message it receives","prefix":", selectively or cumulatively.  ","suffix":". All the messages in the topic "}]}]}
>```
>%%
>*%%PREFIX%%, selectively or cumulatively.%%HIGHLIGHT%% ==With  cumulative  acknowledgment,  the  consumer  only  needs  to  acknowledge  the last message it receives== %%POSTFIX%%. All the messages in the topic*
>%%LINK%%[[#^n3ghgiyr54|show annotation]]
>%%COMMENT%%
>累积式ack只需要对最新的消息回复ack即可
>%%TAGS%%
>
^n3ghgiyr54


>%%
>```annotation-json
>{"created":"2023-07-22T13:26:10.208Z","text":"kafka的偏移量概念：它将消费组的偏移量作为一个高水位标记，表示在这之前的消息都已经收到了ack","updated":"2023-07-22T13:26:10.208Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":63767,"end":63945},{"type":"TextQuoteSelector","exact":"Given the fact that Kafka’s offset concept treats consumer groups offsets as a high-water mark  that  marks  the  point  up to  which  all messages  are  considered  acknowledged","prefix":"ssage acknowledgment in Pulsar. ","suffix":". Therefore, in this scenario th"}]}]}
>```
>%%
>*%%PREFIX%%ssage acknowledgment in Pulsar.%%HIGHLIGHT%% ==Given the fact that Kafka’s offset concept treats consumer groups offsets as a high-water mark  that  marks  the  point  up to  which  all messages  are  considered  acknowledged== %%POSTFIX%%. Therefore, in this scenario th*
>%%LINK%%[[#^pxyln6xchbc|show annotation]]
>%%COMMENT%%
>kafka的偏移量概念：它将消费组的偏移量作为一个高水位标记，表示在这之前的消息都已经收到了ack
>%%TAGS%%
>
^pxyln6xchbc


>%%
>```annotation-json
>{"created":"2023-07-22T13:35:38.707Z","text":"消息保留","updated":"2023-07-22T13:35:38.707Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":64558,"end":64576},{"type":"TextQuoteSelector","exact":"Message Retention ","prefix":"umer offset limitations. 1.4.5  ","suffix":" In  contrast  to  legacy  messa"}]}]}
>```
>%%
>*%%PREFIX%%umer offset limitations. 1.4.5%%HIGHLIGHT%% ==Message Retention== %%POSTFIX%%In  contrast  to  legacy  messa*
>%%LINK%%[[#^sebl2o9m27|show annotation]]
>%%COMMENT%%
>消息保留
>%%TAGS%%
>
^sebl2o9m27


>%%
>```annotation-json
>{"created":"2023-07-22T13:39:27.910Z","text":"kafka的消息保留策略","updated":"2023-07-22T13:39:27.910Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":65376,"end":65402},{"type":"TextQuoteSelector","exact":"MESSAGE RETENTION IN KAFKA","prefix":"ss, if not properly configured. ","suffix":" Kafka  retains  all  messages  "}]}]}
>```
>%%
>*%%PREFIX%%ss, if not properly configured.%%HIGHLIGHT%% ==MESSAGE RETENTION IN KAFKA== %%POSTFIX%%Kafka  retains  all  messages*
>%%LINK%%[[#^g3uwhyusbie|show annotation]]
>%%COMMENT%%
>kafka的消息保留策略
>%%TAGS%%
>
^g3uwhyusbie


>%%
>```annotation-json
>{"created":"2023-07-22T13:42:21.557Z","text":"kafka可以配置发送到topic里的消息保存周期","updated":"2023-07-22T13:42:21.557Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":65403,"end":65495},{"type":"TextQuoteSelector","exact":"Kafka  retains  all  messages  published  to  a  topic  for  configurable  retention  period","prefix":"red. MESSAGE RETENTION IN KAFKA ","suffix":".  For instance,  if  the  reten"}]}]}
>```
>%%
>*%%PREFIX%%red. MESSAGE RETENTION IN KAFKA%%HIGHLIGHT%% ==Kafka  retains  all  messages  published  to  a  topic  for  configurable  retention  period== %%POSTFIX%%.  For instance,  if  the  reten*
>%%LINK%%[[#^vneo2oakeg|show annotation]]
>%%COMMENT%%
>kafka可以配置发送到topic里的消息保存周期
>%%TAGS%%
>
^vneo2oakeg


>%%
>```annotation-json
>{"created":"2023-07-22T13:43:37.054Z","text":"过期时间一到，不管消息有没被消费及ack都会直接删除","updated":"2023-07-22T13:43:37.054Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":65792,"end":65884},{"type":"TextQuoteSelector","exact":"This deletion is regardless of whether or not the message has been consumed and acknowledged","prefix":" be discarded to free up space. ","suffix":". Obviously, this presents the o"}]}]}
>```
>%%
>*%%PREFIX%%be discarded to free up space.%%HIGHLIGHT%% ==This deletion is regardless of whether or not the message has been consumed and acknowledged== %%POSTFIX%%. Obviously, this presents the o*
>%%LINK%%[[#^5w3iopd0oqd|show annotation]]
>%%COMMENT%%
>过期时间一到，不管消息有没被消费及ack都会直接删除
>%%TAGS%%
>
^5w3iopd0oqd


>%%
>```annotation-json
>{"created":"2023-07-22T13:45:33.586Z","text":"基于时间清理方式的另一个缺点是：消息的保存时间有很大概率超过实际需求，从而降低存储空间的利用率","updated":"2023-07-22T13:45:33.586Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":66105,"end":66395},{"type":"TextQuoteSelector","exact":"The  other  drawback  to  this  time-based  approach  is  that  there  is  a  high  probability  that  you  will  be  retaining  messages  much  longer  than  necessary,  i.e.  after  they  have  been  consumed by all relevant consumers, which is an inefficient use of your storage capacity","prefix":"outage of the consuming system. ","suffix":". ©Manning Publications Co.  To "}]}]}
>```
>%%
>*%%PREFIX%%outage of the consuming system.%%HIGHLIGHT%% ==The  other  drawback  to  this  time-based  approach  is  that  there  is  a  high  probability  that  you  will  be  retaining  messages  much  longer  than  necessary,  i.e.  after  they  have  been  consumed by all relevant consumers, which is an inefficient use of your storage capacity== %%POSTFIX%%. ©Manning Publications Co.  To*
>%%LINK%%[[#^fgefhokx2u|show annotation]]
>%%COMMENT%%
>基于时间清理方式的另一个缺点是：消息的保存时间有很大概率超过实际需求，从而降低存储空间的利用率
>%%TAGS%%
>
^fgefhokx2u


>%%
>```annotation-json
>{"created":"2023-07-22T13:47:19.400Z","text":"pulsar的消息保留策略","updated":"2023-07-22T13:47:19.400Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":66451,"end":66478},{"type":"TextQuoteSelector","exact":"MESSAGE RETENTION IN PULSAR","prefix":"Co.  To comment go to  liveBook ","suffix":" In  Pulsar,  when  a  consumer "}]}]}
>```
>%%
>*%%PREFIX%%Co.  To comment go to  liveBook%%HIGHLIGHT%% ==MESSAGE RETENTION IN PULSAR== %%POSTFIX%%In  Pulsar,  when  a  consumer*
>%%LINK%%[[#^0ov3m5l9vqqs|show annotation]]
>%%COMMENT%%
>pulsar的消息保留策略
>%%TAGS%%
>
^0ov3m5l9vqqs


>%%
>```annotation-json
>{"created":"2023-07-22T13:48:46.054Z","text":"pulsar默认会在收到所有消费者的ack后立即删除消息，未收到ack的消息会保留在消息的backlog中","updated":"2023-07-22T13:48:46.054Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":66679,"end":66857},{"type":"TextQuoteSelector","exact":"Pulsar  immediately  deletes  all  messages  that  have  been  acknowledged  by  all  the  topic’s consumers  and  retains  all  unacknowledged  messages  in  a  message  backlog","prefix":"d  the  message.  By  default,  ","suffix":".  In  Pulsar,  messages  can  o"}]}]}
>```
>%%
>*%%PREFIX%%d  the  message.  By  default,%%HIGHLIGHT%% ==Pulsar  immediately  deletes  all  messages  that  have  been  acknowledged  by  all  the  topic’s consumers  and  retains  all  unacknowledged  messages  in  a  message  backlog== %%POSTFIX%%.  In  Pulsar,  messages  can  o*
>%%LINK%%[[#^0wtgkc5lavag|show annotation]]
>%%COMMENT%%
>pulsar默认会在收到所有消费者的ack后立即删除消息，未收到ack的消息会保留在消息的backlog中
>%%TAGS%%
>
^0wtgkc5lavag


>%%
>```annotation-json
>{"created":"2023-07-22T13:50:11.820Z","text":"只有当所有的订阅者都消费后才会删除消息","updated":"2023-07-22T13:50:11.820Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":66873,"end":66966},{"type":"TextQuoteSelector","exact":"messages  can  only  be  deleted  after  all  the  subscriptions  have  already  consumed  it","prefix":"message  backlog.  In  Pulsar,  ","suffix":".  Pulsar also allows you to kee"}]}]}
>```
>%%
>*%%PREFIX%%message  backlog.  In  Pulsar,%%HIGHLIGHT%% ==messages  can  only  be  deleted  after  all  the  subscriptions  have  already  consumed  it== %%POSTFIX%%.  Pulsar also allows you to kee*
>%%LINK%%[[#^uqjfe2upx7r|show annotation]]
>%%COMMENT%%
>只有当所有的订阅者都消费后才会删除消息
>%%TAGS%%
>
^uqjfe2upx7r


>%%
>```annotation-json
>{"created":"2023-07-22T16:03:33.389Z","text":"长期存在","updated":"2023-07-22T16:03:33.389Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":67969,"end":67980},{"type":"TextQuoteSelector","exact":"perpetuated","prefix":"  technology  that  are  often  ","suffix":"  throughout  the  user  communi"}]}]}
>```
>%%
>*%%PREFIX%%technology  that  are  often%%HIGHLIGHT%% ==perpetuated== %%POSTFIX%%throughout  the  user  communi*
>%%LINK%%[[#^zsxyd4am8o|show annotation]]
>%%COMMENT%%
>长期存在
>%%TAGS%%
>
^zsxyd4am8o


>%%
>```annotation-json
>{"created":"2023-07-22T16:04:04.396Z","text":"自始至终","updated":"2023-07-22T16:04:04.396Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":67982,"end":67993},{"type":"TextQuoteSelector","exact":"throughout ","prefix":" that  are  often  perpetuated  ","suffix":" the  user  community  for  a  m"}]}]}
>```
>%%
>*%%PREFIX%%that  are  often  perpetuated%%HIGHLIGHT%% ==throughout== %%POSTFIX%%the  user  community  for  a  m*
>%%LINK%%[[#^0pkkgeb6ihe|show annotation]]
>%%COMMENT%%
>自始至终
>%%TAGS%%
>
^0pkkgeb6ihe


>%%
>```annotation-json
>{"created":"2023-07-22T16:05:43.059Z","text":"要去说服自己及其他人替换架构的核心，这是一场艰苦的战斗","updated":"2023-07-22T16:05:43.059Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":68049,"end":68194},{"type":"TextQuoteSelector","exact":"t is often an uphill battle to convince yourself and others that you need to replace a technology that sits at the very core of your architecture","prefix":"or  a  multitude  of  reasons. I","suffix":". It is not until we have the be"}]}]}
>```
>%%
>*%%PREFIX%%or  a  multitude  of  reasons. I%%HIGHLIGHT%% ==t is often an uphill battle to convince yourself and others that you need to replace a technology that sits at the very core of your architecture== %%POSTFIX%%. It is not until we have the be*
>%%LINK%%[[#^r0h64gjdrtj|show annotation]]
>%%COMMENT%%
>要去说服自己及其他人替换架构的核心，这是一场艰苦的战斗
>%%TAGS%%
>
^r0h64gjdrtj


>%%
>```annotation-json
>{"created":"2023-07-22T16:12:05.134Z","text":"喜好","updated":"2023-07-22T16:12:05.134Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":69002,"end":69010},{"type":"TextQuoteSelector","exact":"affinity","prefix":"emind us that we cannot let our ","suffix":" for the status quo blind us fro"}]}]}
>```
>%%
>*%%PREFIX%%emind us that we cannot let our%%HIGHLIGHT%% ==affinity== %%POSTFIX%%for the status quo blind us fro*
>%%LINK%%[[#^c7pbe9cbd3v|show annotation]]
>%%COMMENT%%
>喜好
>%%TAGS%%
>
^c7pbe9cbd3v


>%%
>```annotation-json
>{"created":"2023-07-22T16:12:15.057Z","text":"维持现状","updated":"2023-07-22T16:12:15.057Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":69019,"end":69029},{"type":"TextQuoteSelector","exact":"status quo","prefix":"cannot let our affinity for the ","suffix":" blind us from issues lurking wi"}]}]}
>```
>%%
>*%%PREFIX%%cannot let our affinity for the%%HIGHLIGHT%% ==status quo== %%POSTFIX%%blind us from issues lurking wi*
>%%LINK%%[[#^3hr6m8svghm|show annotation]]
>%%COMMENT%%
>维持现状
>%%TAGS%%
>
^3hr6m8svghm


>%%
>```annotation-json
>{"created":"2023-07-22T16:12:44.368Z","text":"隐藏的问题","updated":"2023-07-22T16:12:44.368Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":69044,"end":69058},{"type":"TextQuoteSelector","exact":"issues lurking","prefix":"or the status quo blind us from ","suffix":" within our core architectural s"}]}]}
>```
>%%
>*%%PREFIX%%or the status quo blind us from%%HIGHLIGHT%% ==issues lurking== %%POSTFIX%%within our core architectural s*
>%%LINK%%[[#^vm1igjun45|show annotation]]
>%%COMMENT%%
>隐藏的问题
>%%TAGS%%
>
^vm1igjun45


>%%
>```annotation-json
>{"created":"2023-07-22T16:14:03.082Z","text":"缺点","updated":"2023-07-22T16:14:03.082Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":69299,"end":69304},{"type":"TextQuoteSelector","exact":"flaws","prefix":"ffer  from  key  architectural  ","suffix":".  The  team  that  developed  A"}]}]}
>```
>%%
>*%%PREFIX%%ffer  from  key  architectural%%HIGHLIGHT%% ==flaws== %%POSTFIX%%.  The  team  that  developed  A*
>%%LINK%%[[#^siyugoc34sr|show annotation]]
>%%COMMENT%%
>缺点
>%%TAGS%%
>
^siyugoc34sr


>%%
>```annotation-json
>{"created":"2023-07-22T16:15:13.067Z","text":"有保障的消息投递","updated":"2023-07-22T16:15:13.067Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":69635,"end":69664},{"type":"TextQuoteSelector","exact":" Guaranteed Message Delivery ","prefix":" monolithic technologies: 1.5.1 ","suffix":"Because of the data durability m"}]}]}
>```
>%%
>*%%PREFIX%%monolithic technologies: 1.5.1%%HIGHLIGHT%% ==Guaranteed Message Delivery== %%POSTFIX%%Because of the data durability m*
>%%LINK%%[[#^pik58ya83o8|show annotation]]
>%%COMMENT%%
>有保障的消息投递
>%%TAGS%%
>
^pik58ya83o8


>%%
>```annotation-json
>{"created":"2023-07-22T16:17:07.617Z","text":"无限的可扩展性","updated":"2023-07-22T16:17:07.617Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":70640,"end":70660},{"type":"TextQuoteSelector","exact":"Infinite Scalability","prefix":"uring  message delivery. 1.5.2  ","suffix":" In  order  to  better  understa"}]}]}
>```
>%%
>*%%PREFIX%%uring  message delivery. 1.5.2%%HIGHLIGHT%% ==Infinite Scalability== %%POSTFIX%%In  order  to  better  understa*
>%%LINK%%[[#^dvy8o911qh|show annotation]]
>%%COMMENT%%
>无限的可扩展性
>%%TAGS%%
>
^dvy8o911qh


>%%
>```annotation-json
>{"created":"2023-07-22T16:20:21.081Z","text":"无缝集群扩展","updated":"2023-07-22T16:20:21.081Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":71561,"end":71588},{"type":"TextQuoteSelector","exact":"SEAMLESS CLUSTER EXPANSION ","prefix":"ds of the client applications.  ","suffix":"Any bookies that are added to th"}]}]}
>```
>%%
>*%%PREFIX%%ds of the client applications.%%HIGHLIGHT%% ==SEAMLESS CLUSTER EXPANSION== %%POSTFIX%%Any bookies that are added to th*
>%%LINK%%[[#^dgwqac2ypy|show annotation]]
>%%COMMENT%%
>无缝集群扩展
>%%TAGS%%
>
^dgwqac2ypy


>%%
>```annotation-json
>{"created":"2023-07-22T16:21:43.707Z","text":"不受限制的topic分区存储","updated":"2023-07-22T16:21:43.707Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":71991,"end":72024},{"type":"TextQuoteSelector","exact":"UNBOUNDED TOPIC PARTITION STORAGE","prefix":"Co.  To comment go to  liveBook ","suffix":" Unlike  Kafka,  the  capacity  "}]}]}
>```
>%%
>*%%PREFIX%%Co.  To comment go to  liveBook%%HIGHLIGHT%% ==UNBOUNDED TOPIC PARTITION STORAGE== %%POSTFIX%%Unlike  Kafka,  the  capacity*
>%%LINK%%[[#^1dpiflqcdrt|show annotation]]
>%%COMMENT%%
>不受限制的topic分区存储
>%%TAGS%%
>
^1dpiflqcdrt


>%%
>```annotation-json
>{"created":"2023-07-22T16:23:41.904Z","text":"无需数据重平衡的实时扩缩容","updated":"2023-07-22T16:23:41.904Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":72455,"end":72495},{"type":"TextQuoteSelector","exact":"INSTANT SCALING WITHOUT DATA REBALANCING","prefix":" restrictions  apply to Pulsar. ","suffix":" Because message serving and sto"}]}]}
>```
>%%
>*%%PREFIX%%restrictions  apply to Pulsar.%%HIGHLIGHT%% ==INSTANT SCALING WITHOUT DATA REBALANCING== %%POSTFIX%%Because message serving and sto*
>%%LINK%%[[#^m6w9x28apg|show annotation]]
>%%COMMENT%%
>无需数据重平衡的实时扩缩容
>%%TAGS%%
>
^m6w9x28apg


>%%
>```annotation-json
>{"created":"2023-07-22T16:25:17.084Z","text":"故障恢复","updated":"2023-07-22T16:25:17.084Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":72876,"end":72896},{"type":"TextQuoteSelector","exact":"Resilient to Failure","prefix":"ker and bookie failures. 1.5.3  ","suffix":" Pulsar’s de-coupled architectur"}]}]}
>```
>%%
>*%%PREFIX%%ker and bookie failures. 1.5.3%%HIGHLIGHT%% ==Resilient to Failure== %%POSTFIX%%Pulsar’s de-coupled architectur*
>%%LINK%%[[#^bxnow54rk7q|show annotation]]
>%%COMMENT%%
>故障恢复
>%%TAGS%%
>
^bxnow54rk7q


>%%
>```annotation-json
>{"created":"2023-07-22T16:26:37.678Z","text":"broker故障无缝恢复","updated":"2023-07-22T16:26:37.678Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":73206,"end":73238},{"type":"TextQuoteSelector","exact":"SEAMLESS BROKER FAILURE RECOVERY","prefix":"e  recovery  process  seamless. ","suffix":" Brokers  form  the  stateless  "}]}]}
>```
>%%
>*%%PREFIX%%e  recovery  process  seamless.%%HIGHLIGHT%% ==SEAMLESS BROKER FAILURE RECOVERY== %%POSTFIX%%Brokers  form  the  stateless*
>%%LINK%%[[#^jjunh37tof|show annotation]]
>%%COMMENT%%
>broker故障无缝恢复
>%%TAGS%%
>
^jjunh37tof


>%%
>```annotation-json
>{"created":"2023-07-22T16:30:35.654Z","text":"bookie故障无缝恢复","updated":"2023-07-22T16:30:35.654Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":74265,"end":74297},{"type":"TextQuoteSelector","exact":"SEAMLESS BOOKIE FAILURE RECOVERY","prefix":" lost before it is copied over. ","suffix":" The  stateful  persistence  lay"}]}]}
>```
>%%
>*%%PREFIX%%lost before it is copied over.%%HIGHLIGHT%% ==SEAMLESS BOOKIE FAILURE RECOVERY== %%POSTFIX%%The  stateful  persistence  lay*
>%%LINK%%[[#^390ymuguozd|show annotation]]
>%%COMMENT%%
>bookie故障无缝恢复
>%%TAGS%%
>
^390ymuguozd


>%%
>```annotation-json
>{"created":"2023-07-22T16:33:07.173Z","text":"更细的粒度","updated":"2023-07-22T16:33:07.173Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":75116,"end":75140},{"type":"TextQuoteSelector","exact":"much  finer  granularity","prefix":" segment  level,  which  is  a  ","suffix":" than recopying the whole topic "}]}]}
>```
>%%
>*%%PREFIX%%segment  level,  which  is  a%%HIGHLIGHT%% ==much  finer  granularity== %%POSTFIX%%than recopying the whole topic*
>%%LINK%%[[#^dv2jy2ehxx|show annotation]]
>%%COMMENT%%
>更细的粒度
>%%TAGS%%
>
^dv2jy2ehxx


>%%
>```annotation-json
>{"created":"2023-07-22T16:33:38.939Z","text":"支持百万数量级的topic","updated":"2023-07-22T16:33:38.939Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":75271,"end":75301},{"type":"TextQuoteSelector","exact":"Support for Millions of Topics","prefix":" comment go to  liveBook 1.5.4  ","suffix":" Consider a scenario in which yo"}]}]}
>```
>%%
>*%%PREFIX%%comment go to  liveBook 1.5.4%%HIGHLIGHT%% ==Support for Millions of Topics== %%POSTFIX%%Consider a scenario in which yo*
>%%LINK%%[[#^ikgp3lpwyu|show annotation]]
>%%COMMENT%%
>支持百万数量级的topic
>%%TAGS%%
>
^ikgp3lpwyu


>%%
>```annotation-json
>{"created":"2023-07-22T16:35:33.563Z","text":"按时间有序","updated":"2023-07-22T16:35:33.563Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":75754,"end":75772},{"type":"TextQuoteSelector","exact":"chronological orde","prefix":"process  them  in  the  correct ","suffix":"r, and can quickly scan the topi"}]}]}
>```
>%%
>*%%PREFIX%%process  them  in  the  correct%%HIGHLIGHT%% ==chronological orde== %%POSTFIX%%r, and can quickly scan the topi*
>%%LINK%%[[#^iv2ff5cfe88|show annotation]]
>%%COMMENT%%
>按时间有序
>%%TAGS%%
>
^iv2ff5cfe88


>%%
>```annotation-json
>{"created":"2023-07-22T16:37:16.049Z","text":"根据经验，在Kafka中，如果你关心延迟性能，你应该将topic分区的总数保持在数百个以内","updated":"2023-07-22T16:37:16.049Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":76196,"end":76337},{"type":"TextQuoteSelector","exact":"n Kafka, as a rule of thumb you should keep your total number of topic-partitions in the hundreds  if  you  care  about  latency  performance","prefix":"ecovery time after a failure.  I","suffix":".  There  are  several  guides  "}]}]}
>```
>%%
>*%%PREFIX%%ecovery time after a failure.  I%%HIGHLIGHT%% ==n Kafka, as a rule of thumb you should keep your total number of topic-partitions in the hundreds  if  you  care  about  latency  performance== %%POSTFIX%%.  There  are  several  guides*
>%%LINK%%[[#^esoxn5oa2rn|show annotation]]
>%%COMMENT%%
>根据经验，在Kafka中，如果你关心延迟性能，你应该将topic分区的总数保持在数百个以内
>%%TAGS%%
>
^esoxn5oa2rn


>%%
>```annotation-json
>{"created":"2023-07-22T16:38:47.983Z","text":"280万个topic","updated":"2023-07-22T16:38:47.983Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":76670,"end":76690},{"type":"TextQuoteSelector","exact":"2.8  million  topics","prefix":"  ability  to  support  up  to  ","suffix":"  while  continuing  to  provide"}]}]}
>```
>%%
>*%%PREFIX%%ability  to  support  up  to%%HIGHLIGHT%% ==2.8  million  topics== %%POSTFIX%%while  continuing  to  provide*
>%%LINK%%[[#^98gogvzwulg|show annotation]]
>%%COMMENT%%
>280万个topic
>%%TAGS%%
>
^98gogvzwulg


>%%
>```annotation-json
>{"created":"2023-07-22T16:39:39.969Z","text":"专用的文件","updated":"2023-07-22T16:39:39.969Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":76915,"end":76931},{"type":"TextQuoteSelector","exact":"dedicated  files","prefix":"e  topic  data  is  stored  in  ","suffix":"  or  directories  as  it  is  i"}]}]}
>```
>%%
>*%%PREFIX%%e  topic  data  is  stored  in%%HIGHLIGHT%% ==dedicated  files== %%POSTFIX%%or  directories  as  it  is  i*
>%%LINK%%[[#^6yykh7kemgg|show annotation]]
>%%COMMENT%%
>专用的文件
>%%TAGS%%
>
^6yykh7kemgg


>%%
>```annotation-json
>{"created":"2023-07-22T16:41:03.743Z","text":"pulsar会将来自不同topic的消息聚合、排序并且存储在一个大的文件内，然后为其建立索引","updated":"2023-07-22T16:41:03.743Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":77281,"end":77395},{"type":"TextQuoteSelector","exact":"messages from different topics are aggregated, sorted, and stored in large files and then indexed in Apache Pulsar","prefix":"der  to  prevent this behavior, ","suffix":". This approach limits the proli"}]}]}
>```
>%%
>*%%PREFIX%%der  to  prevent this behavior,%%HIGHLIGHT%% ==messages from different topics are aggregated, sorted, and stored in large files and then indexed in Apache Pulsar== %%POSTFIX%%. This approach limits the proli*
>%%LINK%%[[#^mjffc3r7mg8|show annotation]]
>%%COMMENT%%
>pulsar会将来自不同topic的消息聚合、排序并且存储在一个大的文件内，然后为其建立索引
>%%TAGS%%
>
^mjffc3r7mg8


>%%
>```annotation-json
>{"created":"2023-07-22T16:42:55.357Z","text":"两地复制和故障切换","updated":"2023-07-22T16:42:55.357Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":77528,"end":77563},{"type":"TextQuoteSelector","exact":"Geo-Replication and Active Failover","prefix":"ber of topics increases. 1.5.5  ","suffix":" Apache Pulsar is a messaging sy"}]}]}
>```
>%%
>*%%PREFIX%%ber of topics increases. 1.5.5%%HIGHLIGHT%% ==Geo-Replication and Active Failover== %%POSTFIX%%Apache Pulsar is a messaging sy*
>%%LINK%%[[#^l65kca9ml0j|show annotation]]
>%%COMMENT%%
>两地复制和故障切换
>%%TAGS%%
>
^l65kca9ml0j


>%%
>```annotation-json
>{"created":"2023-07-24T16:12:34.440Z","text":"开启异步geo-replication时，生产者不需要等待消息复制到其他数据中心","updated":"2023-07-24T16:12:34.440Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":78875,"end":79041},{"type":"TextQuoteSelector","exact":"With  asynchronous  geo-replication  the  producer  doesn’t  wait  for  an  acknowledgement from  the  other  data  centers  that  they  have  received  the  message,","prefix":"ar Cluster in the other region. ","suffix":"  instead  the  producing  clien"}]}]}
>```
>%%
>*%%PREFIX%%ar Cluster in the other region.%%HIGHLIGHT%% ==With  asynchronous  geo-replication  the  producer  doesn’t  wait  for  an  acknowledgement from  the  other  data  centers  that  they  have  received  the  message,== %%POSTFIX%%instead  the  producing  clien*
>%%LINK%%[[#^w5egjm3a4z|show annotation]]
>%%COMMENT%%
>开启异步geo-replication时，生产者不需要等待消息复制到其他数据中心
>%%TAGS%%
>
^w5egjm3a4z


>%%
>```annotation-json
>{"created":"2023-07-24T16:14:38.358Z","text":"异步复制的缺点：弱一致性","updated":"2023-07-24T16:14:38.358Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":79481,"end":79571},{"type":"TextQuoteSelector","exact":"However, it also results in weaker consistency guarantees, due to asynchronous replication","prefix":"es from the other data centers. ","suffix":". Since there is always a replic"}]}]}
>```
>%%
>*%%PREFIX%%es from the other data centers.%%HIGHLIGHT%% ==However, it also results in weaker consistency guarantees, due to asynchronous replication== %%POSTFIX%%. Since there is always a replic*
>%%LINK%%[[#^uha66r9u02t|show annotation]]
>%%COMMENT%%
>异步复制的缺点：弱一致性
>%%TAGS%%
>
^uha66r9u02t


>%%
>```annotation-json
>{"created":"2023-07-24T16:19:51.336Z","text":"实际案例","updated":"2023-07-24T16:19:51.336Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":81714,"end":81734},{"type":"TextQuoteSelector","exact":"Real World Use Cases","prefix":"  detail  in  Appendix B.   1.6 ","suffix":" If  you  are  a  product  manag"}]}]}
>```
>%%
>*%%PREFIX%%detail  in  Appendix B.   1.6%%HIGHLIGHT%% ==Real World Use Cases== %%POSTFIX%%If  you  are  a  product  manag*
>%%LINK%%[[#^xai8s43ppj|show annotation]]
>%%COMMENT%%
>实际案例
>%%TAGS%%
>
^xai8s43ppj


>%%
>```annotation-json
>{"created":"2023-07-24T16:20:54.851Z","text":"统一的消息系统","updated":"2023-07-24T16:20:54.851Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":82284,"end":82308},{"type":"TextQuoteSelector","exact":"Unified Messaging System","prefix":"has already been proven. 1.6.1  ","suffix":" You are probably familiar with "}]}]}
>```
>%%
>*%%PREFIX%%has already been proven. 1.6.1%%HIGHLIGHT%% ==Unified Messaging System== %%POSTFIX%%You are probably familiar with*
>%%LINK%%[[#^zkr1dq0efjf|show annotation]]
>%%COMMENT%%
>统一的消息系统
>%%TAGS%%
>
^zkr1dq0efjf


>%%
>```annotation-json
>{"created":"2023-07-24T16:22:40.063Z","text":"微服务平台","updated":"2023-07-24T16:22:40.063Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":83635,"end":83657},{"type":"TextQuoteSelector","exact":"Microservices Platform","prefix":"ghput, and low latency.  1.6.2  ","suffix":" Narvar  provides  a  supply  ch"}]}]}
>```
>%%
>*%%PREFIX%%ghput, and low latency.  1.6.2%%HIGHLIGHT%% ==Microservices Platform== %%POSTFIX%%Narvar  provides  a  supply  ch*
>%%LINK%%[[#^4drcq4ug1wl|show annotation]]
>%%COMMENT%%
>微服务平台
>%%TAGS%%
>
^4drcq4ug1wl


>%%
>```annotation-json
>{"created":"2023-07-24T16:45:25.169Z","text":"不可持续的","updated":"2023-07-24T16:45:25.169Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":84478,"end":84491},{"type":"TextQuoteSelector","exact":"unsustainable","prefix":"nd  scale  these  systems  was  ","suffix":".  Many  of  them  were  not  co"}]}]}
>```
>%%
>*%%PREFIX%%nd  scale  these  systems  was%%HIGHLIGHT%% ==unsustainable== %%POSTFIX%%.  Many  of  them  were  not  co*
>%%LINK%%[[#^vs3ykxps87|show annotation]]
>%%COMMENT%%
>不可持续的
>%%TAGS%%
>
^vs3ykxps87


>%%
>```annotation-json
>{"created":"2023-07-24T16:49:11.754Z","text":"云服务无关的","updated":"2023-07-24T16:49:11.754Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":85390,"end":85405},{"type":"TextQuoteSelector","exact":"cloud-agnostic ","prefix":"Kafka,  Pulsar  was  reliable,  ","suffix":" and  open-sourced.  Unlike  Kaf"}]}]}
>```
>%%
>*%%PREFIX%%Kafka,  Pulsar  was  reliable,%%HIGHLIGHT%% ==cloud-agnostic== %%POSTFIX%%and  open-sourced.  Unlike  Kaf*
>%%LINK%%[[#^4wi06hovb1h|show annotation]]
>%%COMMENT%%
>云服务无关的
>%%TAGS%%
>
^4wi06hovb1h


>%%
>```annotation-json
>{"created":"2023-07-24T16:52:24.617Z","text":"金融诈骗","updated":"2023-07-24T16:52:24.617Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":87367,"end":87383},{"type":"TextQuoteSelector","exact":"financial  fraud","prefix":"50M transactions per  day  for  ","suffix":"  on  behalf  of  it  500M  regi"}]}]}
>```
>%%
>*%%PREFIX%%50M transactions per  day  for%%HIGHLIGHT%% ==financial  fraud== %%POSTFIX%%on  behalf  of  it  500M  regi*
>%%LINK%%[[#^2etkaxx2w2v|show annotation]]
>%%COMMENT%%
>金融诈骗
>%%TAGS%%
>
^2etkaxx2w2v


>%%
>```annotation-json
>{"created":"2023-07-24T16:59:57.370Z","text":"pulsar的概念和架构","updated":"2023-07-24T16:59:57.370Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":90356,"end":90388},{"type":"TextQuoteSelector","exact":"Pulsar Concepts and Architecture","prefix":".  To comment go to  liveBook   ","suffix":" This chapter covers • Pulsar’s "}]}]}
>```
>%%
>*%%PREFIX%%.  To comment go to  liveBook%%HIGHLIGHT%% ==Pulsar Concepts and Architecture== %%POSTFIX%%This chapter covers • Pulsar’s*
>%%LINK%%[[#^5cbt7fsl863|show annotation]]
>%%COMMENT%%
>pulsar的概念和架构
>%%TAGS%%
>
^5cbt7fsl863


>%%
>```annotation-json
>{"created":"2023-07-24T17:00:21.207Z","text":"pulsar的物理架构","updated":"2023-07-24T17:00:21.207Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":91153,"end":91183},{"type":"TextQuoteSelector","exact":"Pulsar’s Physical Architecture","prefix":"ng a more concrete example. 2.1 ","suffix":" As  we  mentioned,  there  will"}]}]}
>```
>%%
>*%%PREFIX%%ng a more concrete example. 2.1%%HIGHLIGHT%% ==Pulsar’s Physical Architecture== %%POSTFIX%%As  we  mentioned,  there  will*
>%%LINK%%[[#^eeobv4e0qsf|show annotation]]
>%%COMMENT%%
>pulsar的物理架构
>%%TAGS%%
>
^eeobv4e0qsf


>%%
>```annotation-json
>{"created":"2023-07-24T17:03:41.054Z","text":"Pulsar Instance由一个或多个pulsar集群组成，这些集群作为一个单独的单元可以统一进行管理","updated":"2023-07-24T17:03:41.054Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":91676,"end":91824},{"type":"TextQuoteSelector","exact":"Pulsar Instance, which is comprised of one or more Pulsar clusters that act together as a single unit and can be administered from a single location","prefix":"level of abstraction known as a ","suffix":", as shown in Figure 2.1.  One  "}]}]}
>```
>%%
>*%%PREFIX%%level of abstraction known as a%%HIGHLIGHT%% ==Pulsar Instance, which is comprised of one or more Pulsar clusters that act together as a single unit and can be administered from a single location== %%POSTFIX%%, as shown in Figure 2.1.  One*
>%%LINK%%[[#^sl83ljidcik|show annotation]]
>%%COMMENT%%
>Pulsar Instance由一个或多个pulsar集群组成，这些集群作为一个单独的单元可以统一进行管理
>%%TAGS%%
>
^sl83ljidcik


>%%
>```annotation-json
>{"created":"2023-07-24T17:08:58.389Z","text":"使用Pulsar Instance的一个最大的原因是开启geo-replication","updated":"2023-07-24T17:08:58.389Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":91851,"end":91948},{"type":"TextQuoteSelector","exact":"One  of  the  biggest  reasons  for  using  a  Pulsar  Instance,  is  to  enable  geo-replication","prefix":"ation, as shown in Figure 2.1.  ","suffix":".  In  fact,  only  clusters  wi"}]}]}
>```
>%%
>*%%PREFIX%%ation, as shown in Figure 2.1.%%HIGHLIGHT%% ==One  of  the  biggest  reasons  for  using  a  Pulsar  Instance,  is  to  enable  geo-replication== %%POSTFIX%%.  In  fact,  only  clusters  wi*
>%%LINK%%[[#^lxg5fupnrc9|show annotation]]
>%%COMMENT%%
>使用Pulsar Instance的一个最大的原因是开启geo-replication
>%%TAGS%%
>
^lxg5fupnrc9


>%%
>```annotation-json
>{"created":"2023-07-24T17:11:07.448Z","text":"每个Pulsar Instance使用一个全实例的zookeeper集群(configuration store)来保存关于多个集群的信息，例如geo-replication和租户级别的安全策略","updated":"2023-07-24T17:11:07.448Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":92393,"end":92625},{"type":"TextQuoteSelector","exact":"A  Pulsar  Instance  employs  an  instance-wide  Zookeeper  cluster  called  the  configuration store  to  retain  information  that  pertains  to  multiple  clusters,  such  as  geo-replication,  and  tenant-level security policies","prefix":"graphically dispersed clusters. ","suffix":". This allows you to define and "}]}]}
>```
>%%
>*%%PREFIX%%graphically dispersed clusters.%%HIGHLIGHT%% ==A  Pulsar  Instance  employs  an  instance-wide  Zookeeper  cluster  called  the  configuration store  to  retain  information  that  pertains  to  multiple  clusters,  such  as  geo-replication,  and  tenant-level security policies== %%POSTFIX%%. This allows you to define and*
>%%LINK%%[[#^z1shekdh89|show annotation]]
>%%COMMENT%%
>每个Pulsar Instance使用一个全实例的zookeeper集群(configuration store)来保存关于多个集群的信息，例如geo-replication和租户级别的安全策略
>%%TAGS%%
>
^z1shekdh89


>%%
>```annotation-json
>{"created":"2023-07-24T17:16:00.910Z","text":"弹性","updated":"2023-07-24T17:16:00.910Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":92726,"end":92738},{"type":"TextQuoteSelector","exact":"resiliency  ","prefix":"ation.  In  order  to  provide  ","suffix":"to  the  configuration  store,  "}]}]}
>```
>%%
>*%%PREFIX%%ation.  In  order  to  provide%%HIGHLIGHT%% ==resiliency== %%POSTFIX%%to  the  configuration  store,*
>%%LINK%%[[#^uwv9qhonock|show annotation]]
>%%COMMENT%%
>弹性
>%%TAGS%%
>
^uwv9qhonock


>%%
>```annotation-json
>{"created":"2023-07-24T17:18:24.585Z","text":"Pulsar Instance的zk集群中的节点应该跨区域部署，以保障区域故障时的可用性","updated":"2023-07-24T17:18:24.585Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":92770,"end":92936},{"type":"TextQuoteSelector","exact":"each  of  the  nodes  within  the Pulsar Instance’s ZK ensemble should be deployed across multiple regions to ensure its availability in the event of a region failure","prefix":"to  the  configuration  store,  ","suffix":", etc.  It is important to note "}]}]}
>```
>%%
>*%%PREFIX%%to  the  configuration  store,%%HIGHLIGHT%% ==each  of  the  nodes  within  the Pulsar Instance’s ZK ensemble should be deployed across multiple regions to ensure its availability in the event of a region failure== %%POSTFIX%%, etc.  It is important to note*
>%%LINK%%[[#^90ik2pr9zqj|show annotation]]
>%%COMMENT%%
>Pulsar Instance的zk集群中的节点应该跨区域部署，以保障区域故障时的可用性
>%%TAGS%%
>
^90ik2pr9zqj


>%%
>```annotation-json
>{"created":"2023-07-24T17:21:11.618Z","text":"pulsar的分层架构","updated":"2023-07-24T17:21:11.618Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":93432,"end":93462},{"type":"TextQuoteSelector","exact":" Pulsar’s Layered Architecture","prefix":"ecomes operational again. 2.1.1 ","suffix":" Within  each  of  the  geograph"}]}]}
>```
>%%
>*%%PREFIX%%ecomes operational again. 2.1.1%%HIGHLIGHT%% ==Pulsar’s Layered Architecture== %%POSTFIX%%Within  each  of  the  geograph*
>%%LINK%%[[#^laqb1pxj06d|show annotation]]
>%%COMMENT%%
>pulsar的分层架构
>%%TAGS%%
>
^laqb1pxj06d


>%%
>```annotation-json
>{"created":"2023-07-31T16:36:30.137Z","text":"一旦broker获取到一个topic的所有权后，它将负责该topic的所有请求，包括发送消息和消费消息都需要通过它来实现","updated":"2023-07-31T16:36:30.137Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":94670,"end":94918},{"type":"TextQuoteSelector","exact":"Once a Broker assumes ownership of a topic, it is responsible for handling all requests for that topic, and any clients wishing to publish  to  or  consume  data  from  the  topic  need  to  interact  with  the  corresponding  Broker  that “owns” i","prefix":"quire “ownership” of the topic. ","suffix":"t. Therefore, if you want publis"}]}]}
>```
>%%
>*%%PREFIX%%quire “ownership” of the topic.%%HIGHLIGHT%% ==Once a Broker assumes ownership of a topic, it is responsible for handling all requests for that topic, and any clients wishing to publish  to  or  consume  data  from  the  topic  need  to  interact  with  the  corresponding  Broker  that “owns” i== %%POSTFIX%%t. Therefore, if you want publis*
>%%LINK%%[[#^ywqdvy59ns|show annotation]]
>%%COMMENT%%
>一旦broker获取到一个topic的所有权后，它将负责该topic的所有请求，包括发送消息和消费消息都需要通过它来实现
>%%TAGS%%
>
^ywqdvy59ns


>%%
>```annotation-json
>{"created":"2023-07-31T16:38:28.205Z","text":"pulsar代理","updated":"2023-07-31T16:38:28.205Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":95476,"end":95492},{"type":"TextQuoteSelector","exact":"THE PULSAR PROXY","prefix":"all the brokers in the cluster. ","suffix":" If you are hosting your Pulsar "}]}]}
>```
>%%
>*%%PREFIX%%all the brokers in the cluster.%%HIGHLIGHT%% ==THE PULSAR PROXY== %%POSTFIX%%If you are hosting your Pulsar*
>%%LINK%%[[#^j602y7btr7|show annotation]]
>%%COMMENT%%
>pulsar代理
>%%TAGS%%
>
^j602y7btr7


>%%
>```annotation-json
>{"created":"2023-07-31T16:41:13.267Z","text":"传统的负载均衡方案无法感知到哪个broker被分配给指定的topic，因此只能将请求随机路由给集群中的一个broker","updated":"2023-07-31T16:41:13.267Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":96196,"end":96419},{"type":"TextQuoteSelector","exact":"The traditional load-balancer approach is not efficient as the load-balancer will not know which  broker  is  assigned  to  a  given  topic  and  instead  will  direct  the  request  to  a  random  broker  in  the  cluster.","prefix":"Co.  To comment go to  liveBook ","suffix":"  If  a  broker  receives  a  re"}]}]}
>```
>%%
>*%%PREFIX%%Co.  To comment go to  liveBook%%HIGHLIGHT%% ==The traditional load-balancer approach is not efficient as the load-balancer will not know which  broker  is  assigned  to  a  given  topic  and  instead  will  direct  the  request  to  a  random  broker  in  the  cluster.== %%POSTFIX%%If  a  broker  receives  a  re*
>%%LINK%%[[#^mtra5b2sfv|show annotation]]
>%%COMMENT%%
>传统的负载均衡方案无法感知到哪个broker被分配给指定的topic，因此只能将请求随机路由给集群中的一个broker
>%%TAGS%%
>
^mtra5b2sfv


>%%
>```annotation-json
>{"created":"2023-07-31T16:43:10.548Z","text":"proxy通过pulsar内置的服务发现机制找到为指定topic提供服务的broker，然后将请求自动路由到该broker节点","updated":"2023-07-31T16:43:10.548Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":96952,"end":97154},{"type":"TextQuoteSelector","exact":"The  proxy  will  then  use  Pulsar’s  built-in service discovery mechanism to determine which broker is hosting the topic you are trying to reach  and  automatically  route  the  client  request  to  i","prefix":" to  the  brokers  themselves.  ","suffix":"t.  Furthermore,  it  will  cach"}]}]}
>```
>%%
>*%%PREFIX%%to  the  brokers  themselves.%%HIGHLIGHT%% ==The  proxy  will  then  use  Pulsar’s  built-in service discovery mechanism to determine which broker is hosting the topic you are trying to reach  and  automatically  route  the  client  request  to  i== %%POSTFIX%%t.  Furthermore,  it  will  cach*
>%%LINK%%[[#^axcu7i02jvo|show annotation]]
>%%COMMENT%%
>proxy通过pulsar内置的服务发现机制找到为指定topic提供服务的broker，然后将请求自动路由到该broker节点
>%%TAGS%%
>
^axcu7i02jvo


>%%
>```annotation-json
>{"created":"2023-07-31T16:44:54.396Z","text":"无状态的服务层","updated":"2023-07-31T16:44:54.396Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":97549,"end":97572},{"type":"TextQuoteSelector","exact":"Stateless Serving Layer","prefix":"anced without any issue. 2.1.2  ","suffix":" Pulsar’s  multi-layered  design"}]}]}
>```
>%%
>*%%PREFIX%%anced without any issue. 2.1.2%%HIGHLIGHT%% ==Stateless Serving Layer== %%POSTFIX%%Pulsar’s  multi-layered  design*
>%%LINK%%[[#^4j05jd9gznv|show annotation]]
>%%COMMENT%%
>无状态的服务层
>%%TAGS%%
>
^4j05jd9gznv


>%%
>```annotation-json
>{"created":"2023-07-31T16:45:56.167Z","text":"无状态的含义是：broker不保存用于处理请求的任何信息","updated":"2023-07-31T16:45:56.167Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":97973,"end":98140},{"type":"TextQuoteSelector","exact":"we use the  term “stateless” to describe the serving  layer, since there is no information stored on the brokers themselves that is necessary to handle client requests","prefix":"ata  they  are  serving. Hence, ","suffix":". The “stateless” nature of the "}]}]}
>```
>%%
>*%%PREFIX%%ata  they  are  serving. Hence,%%HIGHLIGHT%% ==we use the  term “stateless” to describe the serving  layer, since there is no information stored on the brokers themselves that is necessary to handle client requests== %%POSTFIX%%. The “stateless” nature of the*
>%%LINK%%[[#^4f1j72z50a3|show annotation]]
>%%COMMENT%%
>无状态的含义是：broker不保存用于处理请求的任何信息
>%%TAGS%%
>
^4f1j72z50a3


>%%
>```annotation-json
>{"created":"2023-07-31T16:46:53.227Z","text":"bundles:软件集、捆、束","updated":"2023-07-31T16:46:53.227Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":98509,"end":98516},{"type":"TextQuoteSelector","exact":"BUNDLES","prefix":" ever-changing message traffic. ","suffix":" The assignment of a topic to a "}]}]}
>```
>%%
>*%%PREFIX%%ever-changing message traffic.%%HIGHLIGHT%% ==BUNDLES== %%POSTFIX%%The assignment of a topic to a*
>%%LINK%%[[#^8thicx2uzna|show annotation]]
>%%COMMENT%%
>bundles:软件集、捆、束
>%%TAGS%%
>
^8thicx2uzna


>%%
>```annotation-json
>{"created":"2023-07-31T16:52:35.691Z","text":"所有的topic都会分配到指定的bundle，每一个bundle再分配给不同的broker","updated":"2023-07-31T16:52:35.691Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":98618,"end":98738},{"type":"TextQuoteSelector","exact":"All the topics in a Pulsar cluster assigned to a specific bundle, with each bundle being assigned to a  different broker","prefix":"eferred to as the bundle level. ","suffix":" as  shown in  Figure 2.3. This "}]}]}
>```
>%%
>*%%PREFIX%%eferred to as the bundle level.%%HIGHLIGHT%% ==All the topics in a Pulsar cluster assigned to a specific bundle, with each bundle being assigned to a  different broker== %%POSTFIX%%as  shown in  Figure 2.3. This*
>%%LINK%%[[#^hxs8j9h5fbf|show annotation]]
>%%COMMENT%%
>所有的topic都会分配到指定的bundle，每一个bundle再分配给不同的broker
>%%TAGS%%
>
^hxs8j9h5fbf


>%%
>```annotation-json
>{"created":"2023-07-31T16:53:30.412Z","text":"defaultNumberOfNamespaceBundles: 每个namespace下可创建的bundle数量，默认为4","updated":"2023-07-31T16:53:30.412Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":99183,"end":99325},{"type":"TextQuoteSelector","exact":"The number of bundles created per namespace is controlled by the defaultNumberOfNamespaceBundles property inside the broker configuration file","prefix":" that information in Zookeeper. ","suffix":", which has a default value of 4"}]}]}
>```
>%%
>*%%PREFIX%%that information in Zookeeper.%%HIGHLIGHT%% ==The number of bundles created per namespace is controlled by the defaultNumberOfNamespaceBundles property inside the broker configuration file== %%POSTFIX%%, which has a default value of 4*
>%%LINK%%[[#^k28a4dxh58|show annotation]]
>%%COMMENT%%
>defaultNumberOfNamespaceBundles: 每个namespace下可创建的bundle数量，默认为4
>%%TAGS%%
>
^k28a4dxh58


>%%
>```annotation-json
>{"created":"2023-07-31T16:54:45.649Z","text":"bundle的数量最好是broker数量的整数倍","updated":"2023-07-31T16:54:45.649Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":99576,"end":99650},{"type":"TextQuoteSelector","exact":"he  number  of  bundles  to  be  a  multiple  of  the  number  of  brokers","prefix":"API.  In  general,  you  want  t","suffix":"  to  ensure  that  they  are  e"}]}]}
>```
>%%
>*%%PREFIX%%API.  In  general,  you  want  t%%HIGHLIGHT%% ==he  number  of  bundles  to  be  a  multiple  of  the  number  of  brokers== %%POSTFIX%%to  ensure  that  they  are  e*
>%%LINK%%[[#^qdy4704bx2|show annotation]]
>%%COMMENT%%
>bundle的数量最好是broker数量的整数倍
>%%TAGS%%
>
^qdy4704bx2


>%%
>```annotation-json
>{"created":"2023-07-31T16:55:15.375Z","text":"负载均衡","updated":"2023-07-31T16:55:15.375Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":99867,"end":99881},{"type":"TextQuoteSelector","exact":"LOAD BALANCING","prefix":" while the others only get one. ","suffix":" While  the  message  traffic  m"}]}]}
>```
>%%
>*%%PREFIX%%while the others only get one.%%HIGHLIGHT%% ==LOAD BALANCING== %%POSTFIX%%While  the  message  traffic  m*
>%%LINK%%[[#^cwuaqlzqnvv|show annotation]]
>%%COMMENT%%
>负载均衡
>%%TAGS%%
>
^cwuaqlzqnvv


>%%
>```annotation-json
>{"created":"2023-07-31T16:56:42.404Z","text":"一个bundle的某些指标超过指定阈值后就会分裂成两个","updated":"2023-07-31T16:56:42.404Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":100262,"end":100460},{"type":"TextQuoteSelector","exact":"When  an  existing  bundle  exceeds  some  preconfigured  thresholds  defined  by  the  following  properties  in  the  broker  configuration file, then the bundle will be split into two new bundles","prefix":"n’t  being  utilized  at  all.  ","suffix":", with one of them being offload"}]}]}
>```
>%%
>*%%PREFIX%%n’t  being  utilized  at  all.%%HIGHLIGHT%% ==When  an  existing  bundle  exceeds  some  preconfigured  thresholds  defined  by  the  following  properties  in  the  broker  configuration file, then the bundle will be split into two new bundles== %%POSTFIX%%, with one of them being offload*
>%%LINK%%[[#^nxplkgl5t5o|show annotation]]
>%%COMMENT%%
>一个bundle的某些指标超过指定阈值后就会分裂成两个
>%%TAGS%%
>
^nxplkgl5t5o


>%%
>```annotation-json
>{"created":"2023-07-31T16:58:01.954Z","text":"每个bundle下的最大topic数、最大session数、最大消息速率、最大带宽","updated":"2023-07-31T16:58:01.954Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":100512,"end":100679},{"type":"TextQuoteSelector","exact":"• loadBalancerNamespaceBundleMaxTopics • loadBalancerNamespaceBundleMaxSessions • loadBalancerNamespaceBundleMaxMsgRate • loadBalancerNamespaceBundleMaxBandwidthMbytes","prefix":"eing offloaded to a new Broker: ","suffix":" This  mechanism  identifies  an"}]}]}
>```
>%%
>*%%PREFIX%%eing offloaded to a new Broker:%%HIGHLIGHT%% ==• loadBalancerNamespaceBundleMaxTopics • loadBalancerNamespaceBundleMaxSessions • loadBalancerNamespaceBundleMaxMsgRate • loadBalancerNamespaceBundleMaxBandwidthMbytes== %%POSTFIX%%This  mechanism  identifies  an*
>%%LINK%%[[#^npdoy3he97|show annotation]]
>%%COMMENT%%
>每个bundle下的最大topic数、最大session数、最大消息速率、最大带宽
>%%TAGS%%
>
^npdoy3he97


>%%
>```annotation-json
>{"created":"2023-07-31T16:59:02.559Z","text":"负荷削减","updated":"2023-07-31T16:59:02.559Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":100997,"end":101010},{"type":"TextQuoteSelector","exact":"LOAD SHEDDING","prefix":"Co.  To comment go to  liveBook ","suffix":" The Pulsar Brokers have another"}]}]}
>```
>%%
>*%%PREFIX%%Co.  To comment go to  liveBook%%HIGHLIGHT%% ==LOAD SHEDDING== %%POSTFIX%%The Pulsar Brokers have another*
>%%LINK%%[[#^yzj1u1q85o|show annotation]]
>%%COMMENT%%
>负荷削减
>%%TAGS%%
>
^yzj1u1q85o


>%%
>```annotation-json
>{"created":"2023-07-31T16:59:50.628Z","text":"loadBalancerBrokerOverloadedThresholdPercentage: 当broker的资源使用率超过阈值后，它会将一个或多个bundle移到其他broker上","updated":"2023-07-31T16:59:50.628Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":101198,"end":101436},{"type":"TextQuoteSelector","exact":"When a Broker’s resource utilization exceeds the preconfigured threshold defined by the loadBalancerBrokerOverloadedThresholdPercentage property in the broker configuration file, the Broker will offload one or more bundles to a new Broker","prefix":"o other Brokers in the cluster. ","suffix":". This property defines  the  ma"}]}]}
>```
>%%
>*%%PREFIX%%o other Brokers in the cluster.%%HIGHLIGHT%% ==When a Broker’s resource utilization exceeds the preconfigured threshold defined by the loadBalancerBrokerOverloadedThresholdPercentage property in the broker configuration file, the Broker will offload one or more bundles to a new Broker== %%POSTFIX%%. This property defines  the  ma*
>%%LINK%%[[#^amajsj82wxg|show annotation]]
>%%COMMENT%%
>loadBalancerBrokerOverloadedThresholdPercentage: 当broker的资源使用率超过阈值后，它会将一个或多个bundle移到其他broker上
>%%TAGS%%
>
^amajsj82wxg


>%%
>```annotation-json
>{"created":"2023-07-31T17:02:56.673Z","text":"数据访问模式","updated":"2023-07-31T17:02:56.673Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":103148,"end":103168},{"type":"TextQuoteSelector","exact":"DATA ACCESS PATTERNS","prefix":"t still on the original Broker. ","suffix":" There  are  generally  three  I"}]}]}
>```
>%%
>*%%PREFIX%%t still on the original Broker.%%HIGHLIGHT%% ==DATA ACCESS PATTERNS== %%POSTFIX%%There  are  generally  three  I*
>%%LINK%%[[#^bpj5qfi6o2u|show annotation]]
>%%COMMENT%%
>数据访问模式
>%%TAGS%%
>
^bpj5qfi6o2u


>%%
>```annotation-json
>{"created":"2023-07-31T17:03:58.979Z","text":"在流系统中通常有3种io模式\n1.写：新数据写入系统\n2.尾部读：当消息发布到系统后，消费者读取最新的数据\n3.补读：新加入的消费者需要从消息的最开始位置读","updated":"2023-07-31T17:03:58.979Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":103169,"end":103691},{"type":"TextQuoteSelector","exact":"There  are  generally  three  I/O  patterns  in  a  streaming  system;  Writes,  where  new  data  is  written  to  the  system,  Tailing  Reads,  where  the  consumer  is  reading  the  most  recently  published  messages  immediately  after  they  have  been  published,  and  Catch-up  Reads, where  a  consumer  reads  a  large  number  of  messages  from  the  beginning  of  the  topic  in  order to catch up, such as when a new consumer wants to access data beginning at a point much earlier than the latest message","prefix":"al Broker. DATA ACCESS PATTERNS ","suffix":". ©Manning Publications Co.  To "}]}]}
>```
>%%
>*%%PREFIX%%al Broker. DATA ACCESS PATTERNS%%HIGHLIGHT%% ==There  are  generally  three  I/O  patterns  in  a  streaming  system;  Writes,  where  new  data  is  written  to  the  system,  Tailing  Reads,  where  the  consumer  is  reading  the  most  recently  published  messages  immediately  after  they  have  been  published,  and  Catch-up  Reads, where  a  consumer  reads  a  large  number  of  messages  from  the  beginning  of  the  topic  in  order to catch up, such as when a new consumer wants to access data beginning at a point much earlier than the latest message== %%POSTFIX%%. ©Manning Publications Co.  To*
>%%LINK%%[[#^st28v3ziwhm|show annotation]]
>%%COMMENT%%
>在流系统中通常有3种io模式
>1.写：新数据写入系统
>2.尾部读：当消息发布到系统后，消费者读取最新的数据
>3.补读：新加入的消费者需要从消息的最开始位置读
>%%TAGS%%
>
^st28v3ziwhm


>%%
>```annotation-json
>{"created":"2023-07-31T17:08:19.648Z","text":"数据写入bookie后，broker会在内存中保存一份拷贝，用于提供tailing read","updated":"2023-07-31T17:08:19.648Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":103962,"end":104103},{"type":"TextQuoteSelector","exact":"he  broker  stores  a  copy  of  the  message  in  its  local  cache  before  it  acknowledges  the  message  publication  to  the  producer.","prefix":"t  the  data  was  committed,  t","suffix":"  This  allows  the  broker  to "}]}]}
>```
>%%
>*%%PREFIX%%t  the  data  was  committed,  t%%HIGHLIGHT%% ==he  broker  stores  a  copy  of  the  message  in  its  local  cache  before  it  acknowledges  the  message  publication  to  the  producer.== %%POSTFIX%%This  allows  the  broker  to*
>%%LINK%%[[#^dnqgmwe471e|show annotation]]
>%%COMMENT%%
>数据写入bookie后，broker会在内存中保存一份拷贝，用于提供tailing read
>%%TAGS%%
>
^dnqgmwe471e


>%%
>```annotation-json
>{"created":"2023-07-31T17:09:50.778Z","text":"流存储层","updated":"2023-07-31T17:09:50.778Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":104830,"end":104851},{"type":"TextQuoteSelector","exact":"Stream Storage Layer ","prefix":"ignment to a new Broker. 2.1.3  ","suffix":"Pulsar  guarantees  message  del"}]}]}
>```
>%%
>*%%PREFIX%%ignment to a new Broker. 2.1.3%%HIGHLIGHT%% ==Stream Storage Layer== %%POSTFIX%%Pulsar  guarantees  message  del*
>%%LINK%%[[#^g30yj7swp14|show annotation]]
>%%COMMENT%%
>流存储层
>%%TAGS%%
>
^g30yj7swp14


>%%
>```annotation-json
>{"created":"2023-07-31T17:11:07.249Z","text":"逻辑存储架构","updated":"2023-07-31T17:11:07.249Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":105536,"end":105564},{"type":"TextQuoteSelector","exact":"LOGICAL STORAGE ARCHITECTURE","prefix":"Co.  To comment go to  liveBook ","suffix":" Pulsar topics can be thought of"}]}]}
>```
>%%
>*%%PREFIX%%Co.  To comment go to  liveBook%%HIGHLIGHT%% ==LOGICAL STORAGE ARCHITECTURE== %%POSTFIX%%Pulsar topics can be thought of*
>%%LINK%%[[#^optaf7w7egf|show annotation]]
>%%COMMENT%%
>逻辑存储架构
>%%TAGS%%
>
^optaf7w7egf


>%%
>```annotation-json
>{"created":"2023-08-01T16:37:24.467Z","text":"Pulsar的topic可以看做是消息的无限流，它按消息的接收顺序存储","updated":"2023-08-01T16:37:24.467Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":105565,"end":105696},{"type":"TextQuoteSelector","exact":"Pulsar topics can be thought of as infinite streams of messages that are stored sequentially in the order the messages are received","prefix":"ok LOGICAL STORAGE ARCHITECTURE ","suffix":". Incoming messages are appended"}]}]}
>```
>%%
>*%%PREFIX%%ok LOGICAL STORAGE ARCHITECTURE%%HIGHLIGHT%% ==Pulsar topics can be thought of as infinite streams of messages that are stored sequentially in the order the messages are received== %%POSTFIX%%. Incoming messages are appended*
>%%LINK%%[[#^0kwmn5ezg0n|show annotation]]
>%%COMMENT%%
>Pulsar的topic可以看做是消息的无限流，它按消息的接收顺序存储
>%%TAGS%%
>
^0kwmn5ezg0n


>%%
>```annotation-json
>{"created":"2023-08-01T16:43:13.108Z","text":"kafka的每个topic被分割成多个部分并存储在broker的磁盘上","updated":"2023-08-01T16:43:13.108Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":106376,"end":106506},{"type":"TextQuoteSelector","exact":"Within Kafka, each stream is separated  into  multiple  replicas  that  each  are  stored  entirely  on  a  Broker’s  local  disk.","prefix":"to implementing stream storage. ","suffix":"  The  great thing about this ap"}]}]}
>```
>%%
>*%%PREFIX%%to implementing stream storage.%%HIGHLIGHT%% ==Within Kafka, each stream is separated  into  multiple  replicas  that  each  are  stored  entirely  on  a  Broker’s  local  disk.== %%POSTFIX%%The  great thing about this ap*
>%%LINK%%[[#^sitjy7s1qb|show annotation]]
>%%COMMENT%%
>kafka的每个topic被分割成多个部分并存储在broker的磁盘上
>%%TAGS%%
>
^sitjy7s1qb


>%%
>```annotation-json
>{"created":"2023-08-01T16:45:32.535Z","text":"优点：简单、快，因为所有的写都是顺序的，它的访问数据的速度受磁头的移动速度限制\n缺点：单个broker必须有足够的空间来存储一个分区的数据","updated":"2023-08-01T16:45:32.535Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":106508,"end":106806},{"type":"TextQuoteSelector","exact":"The  great thing about this approach is that it is simple and fast because all writes are sequential, which limits the amount of disk head movement required to access the data. The downside to Kafka’s approach is that a single Broker must have sufficient storage capacity to hold the partition data","prefix":" on  a  Broker’s  local  disk.  ","suffix":", as I discussed in Chapter 1.  "}]}]}
>```
>%%
>*%%PREFIX%%on  a  Broker’s  local  disk.%%HIGHLIGHT%% ==The  great thing about this approach is that it is simple and fast because all writes are sequential, which limits the amount of disk head movement required to access the data. The downside to Kafka’s approach is that a single Broker must have sufficient storage capacity to hold the partition data== %%POSTFIX%%, as I discussed in Chapter 1.*
>%%LINK%%[[#^u1g17qd4ygn|show annotation]]
>%%COMMENT%%
>优点：简单、快，因为所有的写都是顺序的，它的访问数据的速度受磁头的移动速度限制
>缺点：单个broker必须有足够的空间来存储一个分区的数据
>%%TAGS%%
>
^u1g17qd4ygn


>%%
>```annotation-json
>{"created":"2023-08-01T17:00:56.268Z","text":"pulsar在bookkeeper之上增加了一层叫做managed ledgers的抽象，它保存了ledger的id（ledger用于存储发送到topic的数据）","updated":"2023-08-01T17:00:56.268Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":108245,"end":108439},{"type":"TextQuoteSelector","exact":"Pulsar  adds  an  additional  layer  of  abstraction  on  top  of  BookKeeper’s  ledgers  known  as  managed ledgers that retains the IDs of the ledgers that hold the data published to the topic","prefix":"e storage location of the data. ","suffix":". As  we  can  see  in  Figure  "}]}]}
>```
>%%
>*%%PREFIX%%e storage location of the data.%%HIGHLIGHT%% ==Pulsar  adds  an  additional  layer  of  abstraction  on  top  of  BookKeeper’s  ledgers  known  as  managed ledgers that retains the IDs of the ledgers that hold the data published to the topic== %%POSTFIX%%. As  we  can  see  in  Figure*
>%%LINK%%[[#^q9vuc0xp11|show annotation]]
>%%COMMENT%%
>pulsar在bookkeeper之上增加了一层叫做managed ledgers的抽象，它保存了ledger的id（ledger用于存储发送到topic的数据）
>%%TAGS%%
>
^q9vuc0xp11


>%%
>```annotation-json
>{"created":"2023-08-01T17:05:13.943Z","text":"managed ledger把ledger id的顺序保存在zookeeper中","updated":"2023-08-01T17:05:13.943Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":108782,"end":108867},{"type":"TextQuoteSelector","exact":"the managed ledger retains this unique sequence of the ledger ids inside of Zookeeper","prefix":"to store the incoming data, and ","suffix":". Later  when  a  consumer  atte"}]}]}
>```
>%%
>*%%PREFIX%%to store the incoming data, and%%HIGHLIGHT%% ==the managed ledger retains this unique sequence of the ledger ids inside of Zookeeper== %%POSTFIX%%. Later  when  a  consumer  atte*
>%%LINK%%[[#^69s9b0uxo5f|show annotation]]
>%%COMMENT%%
>managed ledger把ledger id的顺序保存在zookeeper中
>%%TAGS%%
>
^69s9b0uxo5f


>%%
>```annotation-json
>{"created":"2023-08-01T17:27:56.768Z","text":"BookKeeper的物理架构","updated":"2023-08-01T17:27:56.768Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":109622,"end":109654},{"type":"TextQuoteSelector","exact":"BOOKKEEPER PHYSICAL ARCHITECTURE","prefix":"der  as  they  were  published. ","suffix":" In  BookKeeper,  each  unit  of"}]}]}
>```
>%%
>*%%PREFIX%%der  as  they  were  published.%%HIGHLIGHT%% ==BOOKKEEPER PHYSICAL ARCHITECTURE== %%POSTFIX%%In  BookKeeper,  each  unit  of*
>%%LINK%%[[#^e2bnn3l2c6r|show annotation]]
>%%COMMENT%%
>BookKeeper的物理架构
>%%TAGS%%
>
^e2bnn3l2c6r


>%%
>```annotation-json
>{"created":"2023-08-01T17:30:46.458Z","text":"entry中包含了消息的原始字节信息和一些用于追踪和访问entry的重要元数据","updated":"2023-08-01T17:30:46.458Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":109733,"end":109907},{"type":"TextQuoteSelector","exact":"These  entries  contain  the  actual  raw  bytes  from  the  incoming  messages  along  with  some  important  metadata  that  is  used  to  track  and  access  the  entries.","prefix":"  referred  to  as  an  entry.  ","suffix":"  The  most  critical  piece  of"}]}]}
>```
>%%
>*%%PREFIX%%referred  to  as  an  entry.%%HIGHLIGHT%% ==These  entries  contain  the  actual  raw  bytes  from  the  incoming  messages  along  with  some  important  metadata  that  is  used  to  track  and  access  the  entries.== %%POSTFIX%%The  most  critical  piece  of*
>%%LINK%%[[#^jzao2uuswf|show annotation]]
>%%COMMENT%%
>entry中包含了消息的原始字节信息和一些用于追踪和访问entry的重要元数据
>%%TAGS%%
>
^jzao2uuswf


>%%
>```annotation-json
>{"created":"2023-08-02T16:55:51.990Z","text":"元数据中最重要的部分是ledger的id，它保存在broker的local zookeeper里","updated":"2023-08-02T16:55:51.990Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":109909,"end":110046},{"type":"TextQuoteSelector","exact":"The  most  critical  piece  of  metadata  is  the  ID  of  the  ledger to which it belongs, which is kept in the local Zookeeper instance","prefix":"ck  and  access  the  entries.  ","suffix":" so that the message can be retr"}]}]}
>```
>%%
>*%%PREFIX%%ck  and  access  the  entries.%%HIGHLIGHT%% ==The  most  critical  piece  of  metadata  is  the  ID  of  the  ledger to which it belongs, which is kept in the local Zookeeper instance== %%POSTFIX%%so that the message can be retr*
>%%LINK%%[[#^l9qaaj26icq|show annotation]]
>%%COMMENT%%
>元数据中最重要的部分是ledger的id，它保存在broker的local zookeeper里
>%%TAGS%%
>
^l9qaaj26icq


>%%
>```annotation-json
>{"created":"2023-08-02T16:57:56.109Z","text":"ledger的append-only语义意味着数据项是顺序写入的，并且一旦写入就不能再修改","updated":"2023-08-02T16:57:56.109Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":110394,"end":110559},{"type":"TextQuoteSelector","exact":"Ledgers  have  append-only  semantics  meaning  that  entries  are  written  to  a  ledger  sequentially and cannot be modified once they’ve been written to a ledger","prefix":"rs on servers known as bookies. ","suffix":". From a practical perspective, "}]}]}
>```
>%%
>*%%PREFIX%%rs on servers known as bookies.%%HIGHLIGHT%% ==Ledgers  have  append-only  semantics  meaning  that  entries  are  written  to  a  ledger  sequentially and cannot be modified once they’ve been written to a ledger== %%POSTFIX%%. From a practical perspective,*
>%%LINK%%[[#^ocbegvkwshe|show annotation]]
>%%COMMENT%%
>ledger的append-only语义意味着数据项是顺序写入的，并且一旦写入就不能再修改
>%%TAGS%%
>
^ocbegvkwshe


>%%
>```annotation-json
>{"created":"2023-08-02T16:59:17.501Z","text":"pulsar的broker先创建一个ledger，然后往里写入数据项，最后关闭ledger，除此之外不允许其他类型的操作","updated":"2023-08-02T16:59:17.501Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":110605,"end":110767},{"type":"TextQuoteSelector","exact":"A  Pulsar  broker  first  creates  a  ledger,  then  append  entries  to  the  ledger,  and  finally  closes the ledger. There are no other interactions permitted","prefix":"ical perspective, this means: • ","suffix":". • After  the  ledger  has  bee"}]}]}
>```
>%%
>*%%PREFIX%%ical perspective, this means: •%%HIGHLIGHT%% ==A  Pulsar  broker  first  creates  a  ledger,  then  append  entries  to  the  ledger,  and  finally  closes the ledger. There are no other interactions permitted== %%POSTFIX%%. • After  the  ledger  has  bee*
>%%LINK%%[[#^dpvz12kon1g|show annotation]]
>%%COMMENT%%
>pulsar的broker先创建一个ledger，然后往里写入数据项，最后关闭ledger，除此之外不允许其他类型的操作
>%%TAGS%%
>
^dpvz12kon1g


>%%
>```annotation-json
>{"created":"2023-08-02T17:00:43.338Z","text":"ledger关闭之后，不管是正常或是因为进程挂掉，它都只能以只读模式打开","updated":"2023-08-02T17:00:43.338Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":110771,"end":110911},{"type":"TextQuoteSelector","exact":"After  the  ledger  has  been  closed,  either  normally  or  because  the  process  crashed,  it  can then be opened only in read-only mode","prefix":"other interactions permitted. • ","suffix":". • Finally,  when  entries  in "}]}]}
>```
>%%
>*%%PREFIX%%other interactions permitted. •%%HIGHLIGHT%% ==After  the  ledger  has  been  closed,  either  normally  or  because  the  process  crashed,  it  can then be opened only in read-only mode== %%POSTFIX%%. • Finally,  when  entries  in*
>%%LINK%%[[#^fgapegwa2e|show annotation]]
>%%COMMENT%%
>ledger关闭之后，不管是正常或是因为进程挂掉，它都只能以只读模式打开
>%%TAGS%%
>
^fgapegwa2e


>%%
>```annotation-json
>{"created":"2023-08-02T17:01:54.390Z","text":"当不在需要ledger中的数据项时，可以将整个ledger从系统中删除","updated":"2023-08-02T17:01:54.390Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":110915,"end":111035},{"type":"TextQuoteSelector","exact":"Finally,  when  entries  in  the  ledger  are  no  longer  needed,  the  whole  ledger  can  be  deleted from the system","prefix":"pened only in read-only mode. • ","suffix":". The individual  BookKeeper ser"}]}]}
>```
>%%
>*%%PREFIX%%pened only in read-only mode. •%%HIGHLIGHT%% ==Finally,  when  entries  in  the  ledger  are  no  longer  needed,  the  whole  ledger  can  be  deleted from the system== %%POSTFIX%%. The individual  BookKeeper ser*
>%%LINK%%[[#^5g0dciaqt0s|show annotation]]
>%%COMMENT%%
>当不在需要ledger中的数据项时，可以将整个ledger从系统中删除
>%%TAGS%%
>
^5g0dciaqt0s


>%%
>```annotation-json
>{"created":"2023-08-02T17:02:47.907Z","text":"负责存储ledger数据的bookkeeper叫做bookie","updated":"2023-08-02T17:02:47.907Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":111037,"end":111183},{"type":"TextQuoteSelector","exact":"The individual  BookKeeper servers that are  responsible for the storage of ledgers  (more specifically, fragments of ledgers) are known as Bookie","prefix":"n  be  deleted from the system. ","suffix":"s. Whenever entries are written "}]}]}
>```
>%%
>*%%PREFIX%%n  be  deleted from the system.%%HIGHLIGHT%% ==The individual  BookKeeper servers that are  responsible for the storage of ledgers  (more specifically, fragments of ledgers) are known as Bookie== %%POSTFIX%%s. Whenever entries are written*
>%%LINK%%[[#^p90o9eeixdl|show annotation]]
>%%COMMENT%%
>负责存储ledger数据的bookkeeper叫做bookie
>%%TAGS%%
>
^p90o9eeixdl


>%%
>```annotation-json
>{"created":"2023-08-02T17:04:18.710Z","text":"当把数据项写入ledger时，这些数据项会写入一组bookie节点，这些节点叫做ensemble，它们的数量等于副本因子","updated":"2023-08-02T17:04:18.710Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":111186,"end":111514},{"type":"TextQuoteSelector","exact":"Whenever entries are written to a ledger,  those  entries  are  written  across  a  sub-group  of  bookies  nodes  known  as  an  ensemble. The size of the ensemble is equal to the replication factor (R) you specify for your Pulsar topic and ensures that you have exactly R copies of the entry saved to disk to prevent data loss","prefix":" ledgers) are known as Bookies. ","suffix":". Bookies manage data in a log-s"}]}]}
>```
>%%
>*%%PREFIX%%ledgers) are known as Bookies.%%HIGHLIGHT%% ==Whenever entries are written to a ledger,  those  entries  are  written  across  a  sub-group  of  bookies  nodes  known  as  an  ensemble. The size of the ensemble is equal to the replication factor (R) you specify for your Pulsar topic and ensures that you have exactly R copies of the entry saved to disk to prevent data loss== %%POSTFIX%%. Bookies manage data in a log-s*
>%%LINK%%[[#^ap25b3fm8gf|show annotation]]
>%%COMMENT%%
>当把数据项写入ledger时，这些数据项会写入一组bookie节点，这些节点叫做ensemble，它们的数量等于副本因子
>%%TAGS%%
>
^ap25b3fm8gf


>%%
>```annotation-json
>{"created":"2023-08-02T17:06:44.840Z","text":"bookie通过结构化日志管理数据，包括journals、entry log、index file","updated":"2023-08-02T17:06:44.840Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":111516,"end":111646},{"type":"TextQuoteSelector","exact":"Bookies manage data in a log-structured way, which is implemented using three types of files: journals, entry logs, and index file","prefix":"d to disk to prevent data loss. ","suffix":". The journal file retains all o"}]}]}
>```
>%%
>*%%PREFIX%%d to disk to prevent data loss.%%HIGHLIGHT%% ==Bookies manage data in a log-structured way, which is implemented using three types of files: journals, entry logs, and index file== %%POSTFIX%%. The journal file retains all o*
>%%LINK%%[[#^32e6x1f5fnw|show annotation]]
>%%COMMENT%%
>bookie通过结构化日志管理数据，包括journals、entry log、index file
>%%TAGS%%
>
^32e6x1f5fnw


>%%
>```annotation-json
>{"created":"2023-08-02T17:17:24.968Z","text":"entry log文件包含了写入bookkeeper的真实数据","updated":"2023-08-02T17:17:24.968Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":111972,"end":112048},{"type":"TextQuoteSelector","exact":"The  Entry  log  file  contains  the  actual  data  written  to  BookKeeper.","prefix":"ge persistence steps in Pulsar. ","suffix":"  Entries  from  different  ledg"}]}]}
>```
>%%
>*%%PREFIX%%ge persistence steps in Pulsar.%%HIGHLIGHT%% ==The  Entry  log  file  contains  the  actual  data  written  to  BookKeeper.== %%POSTFIX%%Entries  from  different  ledg*
>%%LINK%%[[#^m5yxblsmj8|show annotation]]
>%%COMMENT%%
>entry log文件包含了写入bookkeeper的真实数据
>%%TAGS%%
>
^m5yxblsmj8


>%%
>```annotation-json
>{"created":"2023-08-02T17:18:39.839Z","text":"来自不同ledger的entry聚合后按顺序写入，它们的偏移量以指针的形式保存在ledger缓存中以便快速查询","updated":"2023-08-02T17:18:39.839Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":112050,"end":112199},{"type":"TextQuoteSelector","exact":"Entries  from  different  ledgers are aggregated and written sequentially, while their offsets are kept as pointers in a ledger cache for fast lookup","prefix":"data  written  to  BookKeeper.  ","suffix":". An index file is created for e"}]}]}
>```
>%%
>*%%PREFIX%%data  written  to  BookKeeper.%%HIGHLIGHT%% ==Entries  from  different  ledgers are aggregated and written sequentially, while their offsets are kept as pointers in a ledger cache for fast lookup== %%POSTFIX%%. An index file is created for e*
>%%LINK%%[[#^2z4i03j3xmh|show annotation]]
>%%COMMENT%%
>来自不同ledger的entry聚合后按顺序写入，它们的偏移量以指针的形式保存在ledger缓存中以便快速查询
>%%TAGS%%
>
^2z4i03j3xmh


>%%
>```annotation-json
>{"created":"2023-08-02T17:21:11.418Z","text":"bookie为每一个ledger创建一个索引文件，它包含了数据在entry log文件中的索引","updated":"2023-08-02T17:21:11.418Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":112201,"end":112496},{"type":"TextQuoteSelector","exact":"An index file is created for each ledger, which contains several indexes  that  record  the  offsets  of  data  stored  in  entry  log  files.  The  index  file  is  modelled  after  index  files  in  traditional  relational  databases  and  allows  for  quick  lookups  for  ledger  consumers. ","prefix":"a ledger cache for fast lookup. ","suffix":" When  a  client  publishes  a  "}]}]}
>```
>%%
>*%%PREFIX%%a ledger cache for fast lookup.%%HIGHLIGHT%% ==An index file is created for each ledger, which contains several indexes  that  record  the  offsets  of  data  stored  in  entry  log  files.  The  index  file  is  modelled  after  index  files  in  traditional  relational  databases  and  allows  for  quick  lookups  for  ledger  consumers.== %%POSTFIX%%When  a  client  publishes  a*
>%%LINK%%[[#^lvgrw5j86us|show annotation]]
>%%COMMENT%%
>bookie为每一个ledger创建一个索引文件，它包含了数据在entry log文件中的索引
>%%TAGS%%
>
^lvgrw5j86us


>%%
>```annotation-json
>{"created":"2023-08-02T17:24:00.817Z","text":"元数据存储","updated":"2023-08-02T17:24:00.817Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":112948,"end":112964},{"type":"TextQuoteSelector","exact":"Metadata Storage","prefix":"rrent reads and writes.  2.1.4  ","suffix":" Lastly,  each  cluster  also  h"}]}]}
>```
>%%
>*%%PREFIX%%rrent reads and writes.  2.1.4%%HIGHLIGHT%% ==Metadata Storage== %%POSTFIX%%Lastly,  each  cluster  also  h*
>%%LINK%%[[#^31epd06mvyp|show annotation]]
>%%COMMENT%%
>元数据存储
>%%TAGS%%
>
^31epd06mvyp


>%%
>```annotation-json
>{"created":"2023-08-02T17:25:09.266Z","text":"zookeeper基础","updated":"2023-08-02T17:25:09.266Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":113290,"end":113307},{"type":"TextQuoteSelector","exact":"ZOOKEEPER BASICS ","prefix":"tion that we discussed earlier. ","suffix":"According to the official Apache"}]}]}
>```
>%%
>*%%PREFIX%%tion that we discussed earlier.%%HIGHLIGHT%% ==ZOOKEEPER BASICS== %%POSTFIX%%According to the official Apache*
>%%LINK%%[[#^4cplxxzuvsh|show annotation]]
>%%COMMENT%%
>zookeeper基础
>%%TAGS%%
>
^4cplxxzuvsh


>%%
>```annotation-json
>{"created":"2023-08-03T17:12:49.811Z","text":"分布式协调工具提供了一种更有效的分布式锁工具——CAS","updated":"2023-08-03T17:12:49.811Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":114657,"end":114862},{"type":"TextQuoteSelector","exact":"Having access  to a consensus implementation enables distributed  systems  to coordinate  processes in a more effective manner by providing a compare-and-swap (CAS) operation to implement distributed locks","prefix":"efits of distributed computing. ","suffix":". The CAS operation compares the"}]}]}
>```
>%%
>*%%PREFIX%%efits of distributed computing.%%HIGHLIGHT%% ==Having access  to a consensus implementation enables distributed  systems  to coordinate  processes in a more effective manner by providing a compare-and-swap (CAS) operation to implement distributed locks== %%POSTFIX%%. The CAS operation compares the*
>%%LINK%%[[#^aaz5t5pemvq|show annotation]]
>%%COMMENT%%
>分布式协调工具提供了一种更有效的分布式锁工具——CAS
>%%TAGS%%
>
^aaz5t5pemvq


>%%
>```annotation-json
>{"created":"2023-08-03T17:17:21.933Z","text":"zookeeper集群内部为pulsar和bookkeeper提供了11个不同的znodes。根据提供的信息和使用场景，它们可以分为四类","updated":"2023-08-03T17:17:21.933Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":116597,"end":116823},{"type":"TextQuoteSelector","exact":"there  are  a  total  of  eleven  different  znodes  created  inside  Zookeeper  for  Apache  Pulsar  and  BookKeeper,  these  fall  into  one  of  four  categories  based  upon what information they contain and how it is used","prefix":" can  see  from  Listing  2.1,  ","suffix":".  CONFIGURATION DATA The  first"}]}]}
>```
>%%
>*%%PREFIX%%can  see  from  Listing  2.1,%%HIGHLIGHT%% ==there  are  a  total  of  eleven  different  znodes  created  inside  Zookeeper  for  Apache  Pulsar  and  BookKeeper,  these  fall  into  one  of  four  categories  based  upon what information they contain and how it is used== %%POSTFIX%%.  CONFIGURATION DATA The  first*
>%%LINK%%[[#^pa57mju2jk|show annotation]]
>%%COMMENT%%
>zookeeper集群内部为pulsar和bookkeeper提供了11个不同的znodes。根据提供的信息和使用场景，它们可以分为四类
>%%TAGS%%
>
^pa57mju2jk


>%%
>```annotation-json
>{"created":"2023-08-03T17:18:56.685Z","text":"配置数据","updated":"2023-08-03T17:18:56.685Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":116826,"end":116845},{"type":"TextQuoteSelector","exact":"CONFIGURATION DATA ","prefix":"ey contain and how it is used.  ","suffix":"The  first  category  of  inform"}]}]}
>```
>%%
>*%%PREFIX%%ey contain and how it is used.%%HIGHLIGHT%% ==CONFIGURATION DATA== %%POSTFIX%%The  first  category  of  inform*
>%%LINK%%[[#^kovjdusofw|show annotation]]
>%%COMMENT%%
>配置数据
>%%TAGS%%
>
^kovjdusofw


>%%
>```annotation-json
>{"created":"2023-08-03T17:20:37.948Z","text":"元数据存储","updated":"2023-08-03T17:20:37.948Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":117399,"end":117415},{"type":"TextQuoteSelector","exact":"METADATA STORAGE","prefix":" znodes,  /admin  and /schemas. ","suffix":" The  managed  ledger  informati"}]}]}
>```
>%%
>*%%PREFIX%%znodes,  /admin  and /schemas.%%HIGHLIGHT%% ==METADATA STORAGE== %%POSTFIX%%The  managed  ledger  informati*
>%%LINK%%[[#^dr58ekzbqq8|show annotation]]
>%%COMMENT%%
>元数据存储
>%%TAGS%%
>
^dr58ekzbqq8


>%%
>```annotation-json
>{"text":"服务之间的动态协调","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":118601,"end":118638},{"type":"TextQuoteSelector","exact":"DYNAMIC COORDINATION BETWEEN SERVICES","prefix":"ncoming data will be published.","suffix":"The remaining znodes are all us"}]}],"created":"2023-08-03T17:22:44.814Z","updated":"2023-08-03T17:22:44.814Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}
>```
>%%
>*%%PREFIX%%ncoming data will be published.%%HIGHLIGHT%% ==DYNAMIC COORDINATION BETWEEN SERVICES== %%POSTFIX%%The remaining znodes are all us*
>%%LINK%%[[#^cxsmun4eqlu|show annotation]]
>%%COMMENT%%
>服务之间的动态协调
>%%TAGS%%
>
^cxsmun4eqlu


>%%
>```annotation-json
>{"created":"2023-11-17T13:51:59.881Z","text":"/bookies用于维护BookKeeper集群注册的Bookie列表","updated":"2023-11-17T13:51:59.881Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":118732,"end":118830},{"type":"TextQuoteSelector","exact":"/bookies  which  maintains  a  list  of  the  Bookies  registered  with  the  BookKeeper  cluster,","prefix":"n across the systems  including ","suffix":"  and  /namespace  which  is  us"}]}]}
>```
>%%
>*%%PREFIX%%n across the systems  including%%HIGHLIGHT%% ==/bookies  which  maintains  a  list  of  the  Bookies  registered  with  the  BookKeeper  cluster,== %%POSTFIX%%and  /namespace  which  is  us*
>%%LINK%%[[#^dsmk6lr0glg|show annotation]]
>%%COMMENT%%
>/bookies用于维护BookKeeper集群注册的Bookie列表
>%%TAGS%%
>
^dsmk6lr0glg


>%%
>```annotation-json
>{"created":"2023-11-17T13:53:13.393Z","text":"/namespace用于为代理服务发现topic的所属broker节点","updated":"2023-11-17T13:53:13.393Z","document":{"title":"Apache Pulsar in Action","link":[{"href":"urn:x-pdf:f19bd3c79c98a04fbe603b594da34f45"},{"href":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf"}],"documentFingerprint":"f19bd3c79c98a04fbe603b594da34f45"},"uri":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","target":[{"source":"vault:/%E4%B9%A6%E7%B1%8D/ApachePulsarinAction.pdf","selector":[{"type":"TextPositionSelector","start":118837,"end":118944},{"type":"TextQuoteSelector","exact":"/namespace  which  is  used  by  the  proxy  service  to  determine  which  broker  “owns”  a  given  topic","prefix":"the  BookKeeper  cluster,  and  ","suffix":". As we can see from Listing 2.3"}]}]}
>```
>%%
>*%%PREFIX%%the  BookKeeper  cluster,  and%%HIGHLIGHT%% ==/namespace  which  is  used  by  the  proxy  service  to  determine  which  broker  “owns”  a  given  topic== %%POSTFIX%%. As we can see from Listing 2.3*
>%%LINK%%[[#^gpvlpqv2266|show annotation]]
>%%COMMENT%%
>/namespace用于为代理服务发现topic的所属broker节点
>%%TAGS%%
>
^gpvlpqv2266
